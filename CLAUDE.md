# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

**D&D Assistant** â€” Ğ²ĞµĞ±-Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°-Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº Ğ´Ğ»Ñ **Ğ¶Ğ¸Ğ²Ñ‹Ñ… Ğ½Ğ°ÑÑ‚Ğ¾Ğ»ÑŒĞ½Ñ‹Ñ… ÑĞµÑÑĞ¸Ğ¹** D&D 5e. Ğ­Ñ‚Ğ¾ ĞĞ• Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° (Ğ½Ğµ Foundry VTT, Ğ½Ğµ Roll20). Ğ¦ĞµĞ»ÑŒ â€” ÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ»ÑĞ´ĞµĞ¹ Ğ·Ğ° Ğ¾Ğ´Ğ½Ğ¸Ğ¼ ÑÑ‚Ğ¾Ğ»Ğ¾Ğ¼, ÑƒĞ±Ñ€Ğ°Ñ‚ÑŒ Ğ±ÑƒĞ¼Ğ°Ğ¶Ğ½ÑƒÑ Ğ²Ğ¾Ğ»Ğ¾ĞºĞ¸Ñ‚Ñƒ, Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºÑƒĞ±Ğ¸ĞºĞ¸, Ğ¾Ñ‚Ñ‹Ğ³Ñ€Ñ‹Ñˆ Ğ¸ ĞºĞ°Ğ¹Ñ„ Ğ¾Ñ‚ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ğ¾Ğ¹ Ğ¸Ğ³Ñ€Ñ‹.

### Ğ¤Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„Ğ¸Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

> Ğ›ÑƒÑ‡ÑˆĞ°Ñ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ Ğ·Ğ° ÑÑ‚Ğ¾Ğ»Ğ¾Ğ¼ â€” Ñ‚Ğ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ½ĞµĞ·Ğ°Ğ¼ĞµÑ‚Ğ½Ğ°. ĞĞ½Ğ° Ğ½Ğµ Ğ·Ğ°Ğ¼ĞµĞ½ÑĞµÑ‚ Ğ¶Ğ¸Ğ²Ğ¾Ğµ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ, Ğ° ÑƒĞ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ²ÑÑ‘, Ñ‡Ñ‚Ğ¾ Ğ¼ĞµÑˆĞ°ĞµÑ‚ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ.

**Ğ§Ñ‚Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ”Ğ•Ğ›ĞĞ•Ğ¢:**
- Ğ—Ğ°Ğ¼ĞµĞ½ÑĞµÑ‚ ÑÑ‚Ğ¾Ğ¿ĞºĞ¸ Ğ±ÑƒĞ¼Ğ°Ğ¶Ğ½Ñ‹Ñ… Ğ»Ğ¸ÑÑ‚Ğ¾Ğ² Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ â†’ Ğ¿Ğ»Ğ°Ğ½ÑˆĞµÑ‚/Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ñƒ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
- Ğ—Ğ°Ğ¼ĞµĞ½ÑĞµÑ‚ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ´ÑÑ‡Ñ‘Ñ‚ â†’ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ², ĞšĞ”, Ğ±Ğ¾Ğ½ÑƒÑĞ¾Ğ²
- Ğ—Ğ°Ğ¼ĞµĞ½ÑĞµÑ‚ Â«Ğ¿Ğ¾Ğ´Ğ¾Ğ¶Ğ´Ğ¸, ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ½Ğ°Ğ¹Ğ´Ñƒ Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸ĞµÂ» â†’ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸
- Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° Ğ½Ğ° 2 Ñ‡Ğ°ÑĞ° â†’ Ğ¿Ğ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ğ¼Ğ°ÑÑ‚ĞµÑ€ Ğ·Ğ° 10 Ğ¼Ğ¸Ğ½ÑƒÑ‚
- Ğ”Ğ°Ñ‘Ñ‚ ĞœĞ°ÑÑ‚ĞµÑ€Ñƒ ÑƒĞ´Ğ¾Ğ±Ğ½Ñ‹Ğ¹ Ğ¿ÑƒĞ»ÑŒÑ‚ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ°Ñ‚Ğ¼Ğ¾ÑÑ„ĞµÑ€Ğ¾Ğ¹ â†’ Ğ¼ÑƒĞ·Ñ‹ĞºĞ°, ÑÑ†ĞµĞ½Ñ‹ Ğ½Ğ° Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¼ ÑĞºÑ€Ğ°Ğ½Ğµ
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ñ€ÑƒÑ‚Ğ¸Ğ½Ñƒ ĞœĞ°ÑÑ‚ĞµÑ€Ğ° â†’ Ñ‚Ñ€ĞµĞºĞµÑ€ Ğ±Ğ¸Ñ‚Ğ²Ñ‹, Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ÑÑ‚ĞµĞ¹, Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸

**Ğ§Ñ‚Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° ĞĞ• Ğ”Ğ•Ğ›ĞĞ•Ğ¢:**
- ĞĞµ Ğ·Ğ°Ğ¼ĞµĞ½ÑĞµÑ‚ Ğ¶Ğ¸Ğ²Ğ¾Ğµ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ (Ğ½ĞµÑ‚ Ñ‡Ğ°Ñ‚Ğ°, Ğ½ĞµÑ‚ Ğ²Ğ¸Ğ´ĞµĞ¾)
- ĞĞµ Ğ·Ğ°Ğ¼ĞµĞ½ÑĞµÑ‚ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ĞºÑƒĞ±Ğ¸ĞºĞ¸ (Ğ±Ñ€Ğ¾ÑĞ¾Ğº Ğ² Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸ â€” Ğ¾Ğ¿Ñ†Ğ¸Ñ, Ğ½Ğµ Ğ¾Ğ±ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ)
- ĞĞµ Ñ€Ğ¸ÑÑƒĞµÑ‚ ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ¸ Ğ½Ğµ Ğ´Ğ²Ğ¸Ğ³Ğ°ĞµÑ‚ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ (ÑÑ‚Ğ¾ Ğ½Ğµ battlemap VTT)
- ĞĞµ Ğ¸Ğ³Ñ€Ğ°ĞµÑ‚ Ğ·Ğ° ĞœĞ°ÑÑ‚ĞµÑ€Ğ° (ÑÑ‚Ğ¾ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚, Ğ½Ğµ AI-Ğ²ĞµĞ´ÑƒÑ‰Ğ¸Ğ¹)

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

```
ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ° Ğ´Ğ»Ñ Ğ¸Ğ³Ñ€Ñ‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                             â”‚
â”‚   ğŸ“º Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ ÑĞºÑ€Ğ°Ğ½ (Display Client)         â”‚
â”‚   ĞÑ‚Ğ¼Ğ¾ÑÑ„ĞµÑ€Ğ½Ñ‹Ğµ ÑÑ†ĞµĞ½Ñ‹, Ğ¼ÑƒĞ·Ñ‹ĞºĞ°, ÑĞºÑ€Ğ°Ğ½Ñ‹ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°  â”‚
â”‚   /display/screen â€” fullscreen, Ğ±ĞµĞ· UI      â”‚
â”‚                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚   â”‚ ğŸ’» DM   â”‚  ĞĞ¾ÑƒÑ‚Ğ±ÑƒĞº ĞœĞ°ÑÑ‚ĞµÑ€Ğ°             â”‚
â”‚   â”‚ Back-   â”‚  /dashboard/* â€” backoffice    â”‚
â”‚   â”‚ office  â”‚  ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸, Ğ±Ğ¸Ñ‚Ğ²Ñ‹, ÑÑ†ĞµĞ½Ñ‹,      â”‚
â”‚   â”‚         â”‚  Ğ¿ÑƒĞ»ÑŒÑ‚ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¢Ğ’          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                             â”‚
â”‚   ğŸ“± Ğ˜Ğ³Ñ€Ğ¾Ğº 1   ğŸ“± Ğ˜Ğ³Ñ€Ğ¾Ğº 2   ğŸ“± Ğ˜Ğ³Ñ€Ğ¾Ğº 3    â”‚
â”‚   /player/*    /player/*    /player/*      â”‚
â”‚   Ğ›Ğ¸ÑÑ‚         Ğ›Ğ¸ÑÑ‚         Ğ›Ğ¸ÑÑ‚           â”‚
â”‚   Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°    Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°    Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°      â”‚
â”‚                                             â”‚
â”‚   ğŸ²ğŸ²ğŸ² ĞĞ°ÑÑ‚Ğ¾ÑÑ‰Ğ¸Ğµ ĞºÑƒĞ±Ğ¸ĞºĞ¸ Ğ½Ğ° ÑÑ‚Ğ¾Ğ»Ğµ ğŸ²ğŸ²ğŸ²  â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Ğ’ÑĞµ Ğ½Ğ° Ğ¾Ğ´Ğ½Ğ¾Ğ¼ ÑĞ°Ğ¹Ñ‚Ğµ, Ñƒ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞ²Ğ¾Ğ¹ ÑĞºÑ€Ğ°Ğ½.

Ğ Ñ‚ĞµĞ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½ĞµĞ¼ Ğ½Ğ° ÑĞ°Ğ¹Ñ‚Ğµ:
ğŸŒ Ğ“Ğ¾ÑÑ‚ÑŒ (Ğ°Ğ½Ğ¾Ğ½Ğ¸Ğ¼) â†’ Ğ’Ğ¸Ğ´Ğ¸Ñ‚ ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹ Ğ»ĞµĞ½Ğ´Ğ¸Ğ½Ğ³ â†’ "Ğ¥Ğ¾Ñ‡Ñƒ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ!" â†’ Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
```

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¸Ğ· Ñ‡ĞµÑ‚Ñ‹Ñ€Ñ‘Ñ… Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¾Ğ², Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ñ‹Ñ… Ğ¾Ğ±Ñ‰Ğ¸Ğ¼ Ğ±ÑĞºĞµĞ½Ğ´Ğ¾Ğ¼:

1. **Landing** (ğŸŒ Ğ»ÑĞ±Ğ¾Ğ¹ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€) â€” ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ Ğ´Ğ»Ñ Ğ³Ğ¾ÑÑ‚ĞµĞ¹, ĞºĞ½Ğ¾Ğ¿ĞºĞ° Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸
2. **Player Client** (ğŸ“± Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½/Ğ¿Ğ»Ğ°Ğ½ÑˆĞµÑ‚) â€” Ğ»Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°, Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ, Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ, Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°, Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ±Ñ€Ğ¾ÑĞ¾Ğº ĞºÑƒĞ±Ğ¸ĞºĞ¾Ğ²
3. **Dashboard / Backoffice** (ğŸ’» Ğ½Ğ¾ÑƒÑ‚Ğ±ÑƒĞº DM) â€” ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸ÑĞ¼Ğ¸, Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ÑÑ‚ĞµĞ¹, Ñ‚Ñ€ĞµĞºĞµÑ€ Ğ±Ğ¸Ñ‚Ğ², Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸, NPC, Ğ¼Ğ¾Ğ½ÑÑ‚Ñ€Ñ‹, Ğ¿ÑƒĞ»ÑŒÑ‚ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Display, ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸
4. **Display Client** (ğŸ“º Ğ¢Ğ’/Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€) â€” Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ ÑĞºÑ€Ğ°Ğ½ Ğ² ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğµ: ÑÑ†ĞµĞ½Ñ‹, Ğ¸Ğ»Ğ»ÑÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸, Ğ¼ÑƒĞ·Ñ‹ĞºĞ°, ÑĞºÑ€Ğ°Ğ½Ñ‹ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° (ÑÑ‚Ğ¸Ğ»ÑŒ Pillars of Eternity / Baldur's Gate)

ĞœĞ¾Ğ½Ğ¾Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹, Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ¹ Ğ½Ğ° reference-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ XStream (`C:\Projects\xstream-next`).

## Tech Stack

ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ â€” Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ²ĞµÑ€ÑĞ¸Ğ¸ Ğ²ÑĞµÑ… Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¹ (Ñ„ĞµĞ²Ñ€Ğ°Ğ»ÑŒ 2026).

| Layer | Technology | Version | Purpose |
|-------|-----------|---------|---------|
| Backend | Laravel | 12.x | REST API + WebSocket broadcasting Ñ Passport OAuth2 |
| Frontend | Next.js | 16.x (Turbopack by default) | SSR/SSG + SPA Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ² |
| Language (BE) | PHP | 8.4 | Typed constants, readonly props, arrow functions |
| Language (FE) | TypeScript | 5.x (strict mode) | Type safety Ğ½Ğ° Ğ²ÑÑ‘Ğ¼ Ñ„Ñ€Ğ¾Ğ½Ñ‚Ğµ |
| React | React | 19.x | Server Components, ref as prop, React Compiler |
| Styling | Tailwind CSS | 4.x | CSS-first config (`@theme`), Vite plugin, no `tailwind.config.js` |
| UI Components | shadcn/ui | latest | Radix-based, Tailwind-styled |
| Database | PostgreSQL | 17 | JSONB, GIN indexes, full-text search |
| Cache/Queue | Redis | 7.x | Sessions, cache, job queues, broadcasting |
| Real-time | Laravel Reverb / Pusher | latest | WebSocket Ğ´Ğ»Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ |
| File Storage | S3 + CloudFront | â€” | ĞœĞµĞ´Ğ¸Ğ°: Ğ¸Ğ»Ğ»ÑÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ ÑÑ†ĞµĞ½, Ğ¼ÑƒĞ·Ñ‹ĞºĞ°, Ğ¿Ğ¾Ñ€Ñ‚Ñ€ĞµÑ‚Ñ‹ |
| Email | AWS SES | â€” | Ğ’ĞµÑ€Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ email, ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ |
| Deployment | Coolify | latest | Self-hosted PaaS Ñ Caddy proxy (AWS) |
| Containers | Docker | â€” | Local dev + production |
| Runtime | Node.js | 22 LTS | Frontend build Ğ¸ dev server |

**Tailwind CSS v4 â€” ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ¸Ñ Ğ¾Ñ‚ v3:**
- CSS-first ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· `@theme` Ğ²Ğ¼ĞµÑÑ‚Ğ¾ `tailwind.config.js`
- Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ¾ĞºĞ¾Ğ¹: `@import "tailwindcss"` (Ğ±ĞµĞ· `@tailwind` Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¸Ğ²)
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² (Ğ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½ `content: [...]`)
- Vite plugin Ğ²Ğ¼ĞµÑÑ‚Ğ¾ PostCSS (`@tailwindcss/vite`)
- CSS layers (`@layer theme, base, components, utilities`)
- Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğµ container queries Ğ±ĞµĞ· Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ğ°

**Next.js 16 â€” ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ„Ğ¸Ñ‡Ğ¸:**
- Turbopack Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ (Ğ´Ğ»Ñ dev Ğ¸ build)
- Cache Components + `"use cache"` directive
- React Compiler (stable) â€” Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¼ĞµĞ¼Ğ¾Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- Build Adapters API
- Layout deduplication Ğ¿Ñ€Ğ¸ prefetching

## Architecture Principles

### SOLID

**S â€” Single Responsibility:**
- Controller â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ HTTP (Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ, Ğ¾Ñ‚Ğ²ĞµÑ‚), Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ² Services
- Model â€” data access, scopes, relations. ĞĞµ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
- Service â€” Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (`DiceService`, `CharacterCreatorService`, `BattleTrackerService`)
- Event/Listener â€” side effects (broadcasting, ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ)

```php
// âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾ â€” ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€ Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ğ²ÑÑ‘
class CharacterController {
    public function levelUp(Character $character) {
        $character->level++;
        $character->max_hp += rand(1, $character->hitDie) + $character->constitutionModifier;
        $character->save();
        broadcast(new CharacterUpdated($character));
        return response()->json($character);
    }
}

// âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾ â€” ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€ Ğ´ĞµĞ»ĞµĞ³Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞµÑ€Ğ²Ğ¸ÑÑƒ
class CharacterController {
    public function levelUp(Character $character, CharacterService $service): JsonResponse {
        $character = $service->levelUp($character);
        return response()->json(['success' => true, 'data' => $character]);
    }
}
```

**O â€” Open/Closed:**
- Spell effects, damage types, conditions â€” Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµĞ¼Ñ‹ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ Ğ¸ JSONB
- ĞĞ¾Ğ²Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ¸ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼ Ñ‡ĞµÑ€ĞµĞ· Ñ‚Ğ¾Ñ‚ Ğ¶Ğµ API
- Overrides Ğ² ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ñ… Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑÑ‚ Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ±ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»Ğ°

**L â€” Liskov Substitution:**
- Ğ’ÑĞµ API responses: `{ success: bool, data: {...}, meta?: {...}, message?: string }`
- Ğ’ÑĞµ translatable Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸: trait `HasTranslations` + `formatTranslationsForApi()`

**I â€” Interface Segregation:**
- Player API Ğ¸ Backoffice API â€” Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ñ‹, Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹
- Player Ğ²Ğ¸Ğ´Ğ¸Ñ‚ ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ¸Ğ¼Ñ, ĞšĞ”, ĞĞ—), DM Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ (Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ, Ñ‚Ğ°ĞºÑ‚Ğ¸ĞºĞ°)

**D â€” Dependency Injection:**
- Services Ñ‡ĞµÑ€ĞµĞ· constructor / method injection
- ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· `RuleSystem` model Ğ¸ `config/app-dnd.php`, Ğ½Ğµ Ñ…Ğ°Ñ€Ğ´ĞºĞ¾Ğ´
- Storage Ñ‡ĞµÑ€ĞµĞ· `StorageService`, Ğ½Ğµ Ğ¿Ñ€ÑĞ¼Ğ¾Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ² S3

### KISS â€” Keep It Simple, Stupid

- ĞĞµ ÑƒÑĞ»Ğ¾Ğ¶Ğ½ÑĞ¹ Ñ€Ğ°Ğ½ÑŒÑˆĞµ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸. ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ â†’ Ñ€ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€ ĞºĞ¾Ğ³Ğ´Ğ° Ğ±Ğ¾Ğ»Ğ¸Ñ‚
- JSONB Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ñ‡Ğ¸Ñ‚Ğ°ÑÑ‚ÑÑ Ñ†ĞµĞ»Ğ¸ĞºĞ¾Ğ¼
- `useState`/`useEffect` Ğ²Ğ¼ĞµÑÑ‚Ğ¾ state managers, Ğ¿Ğ¾ĞºĞ° Ğ½Ğµ ÑÑ‚Ğ°Ğ½ĞµÑ‚ Ñ‚ĞµÑĞ½Ğ¾
- ĞĞ´Ğ¸Ğ½ Laravel Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚, Ğ½Ğµ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
- REST, Ğ½Ğµ GraphQL

### DRY â€” Don't Repeat Yourself

- Traits: `FormatsWithTranslations`, `HasSlug`
- Form Requests Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑÑÑ‰ĞµĞ¹ÑÑ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸
- TypeScript types Ğ´Ğ»Ñ JSONB ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€ (`types/character.ts`, `types/spell.ts`)
- ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¸Ğ³Ñ€Ñ‹ â€” Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ `RuleSystem` (JSONB), Ğ½Ğµ Ñ€Ğ°Ğ·Ğ¼Ğ°Ğ·Ğ°Ğ½Ñ‹ Ğ¿Ğ¾ ĞºĞ¾Ğ´Ñƒ
- ĞĞ±Ñ‰Ğ¸Ğµ UI Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ â€” Ğ² shadcn/ui ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

### YAGNI â€” You Aren't Gonna Need It

- ĞĞµÑ‚ Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸
- ĞĞµÑ‚ GraphQL â€” REST Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾
- ĞĞµÑ‚ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² â€” Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚
- ĞĞµÑ‚ PWA/offline
- ĞĞµÑ‚ AI-DM â€” ÑÑ‚Ğ¾ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚, Ğ½Ğµ Ğ·Ğ°Ğ¼ĞµĞ½Ğ° ĞœĞ°ÑÑ‚ĞµÑ€Ñƒ

### Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹

**Composition over Inheritance:**
- React: composable hooks (`useDiceRoller`, `useBattleTracker`) Ğ²Ğ¼ĞµÑÑ‚Ğ¾ HOC
- Laravel: traits Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ñ… Ğ¸ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ğ¹ ĞºĞ»Ğ°ÑÑĞ¾Ğ²

**Fail Fast:**
- Form Requests â€” Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ğ²Ñ…Ğ¾Ğ´Ğµ
- TypeScript strict mode â€” Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ¿Ñ€Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ğ¸
- `npm run build` Ğ¿ĞµÑ€ĞµĞ´ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¼ Ğ¿ÑƒÑˆĞµĞ¼

**Convention over Configuration:**
- Slug Ğ¸Ğ· Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ â€” Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸
- Seeders idempotent (`updateOrCreate`)
- API response format ĞµĞ´Ğ¸Ğ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¹
- `snake_case` Ğ² API, `camelCase` Ğ² TypeScript

**Separation of Concerns (Frontend):**
- `lib/` â€” ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ Ğ¸ API ĞºĞ»Ğ¸ĞµĞ½Ñ‚ (Ğ±ĞµĞ· UI)
- `hooks/` â€” Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° React (ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ, side effects)
- `components/` â€” UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ (Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ)
- `contexts/` â€” Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ (auth, campaign, websocket)
- `types/` â€” TypeScript Ñ‚Ğ¸Ğ¿Ñ‹ (ĞºĞ¾Ğ½Ñ‚Ñ€Ğ°ĞºÑ‚Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)

## Project Structure

```
dnd-assistant/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api/                        # Laravel 12 API
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ Http/Controllers/Api/V1/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Auth/           # Login, Register, Verification
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Player/         # Player-facing endpoints (role: player)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Backoffice/     # DM backoffice CRUD (role: owner + dm)
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RuleSystemController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SettingController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CampaignController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SessionController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SceneController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EncounterController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BattleController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ NpcController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RandomTableController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MonsterController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SpellController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ItemController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SoundtrackController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ NoteController.php
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserController.php       # Owner only
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MediaController.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Display/        # Display client endpoints
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Public/         # Public/landing endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RuleSystem.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Setting.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Campaign.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Character.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CharacterClass.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Race.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Spell.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Item.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Monster.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Npc.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Encounter.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Session.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RandomTable.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Scene.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SceneConnection.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BattleSession.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BattleParticipant.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CampaignNote.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Soundtrack.php
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Rule.php
â”‚   â”‚   â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ContentService.php          # ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ´Ğ»Ñ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ (Setting pivot + overrides)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SceneTreeService.php        # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´ĞµÑ€ĞµĞ²Ğ¾Ğ¼ ÑÑ†ĞµĞ½ (CRUD, ÑĞ²ÑĞ·Ğ¸, Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DiceService.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CharacterCreatorService.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BattleTrackerService.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RandomTableService.php
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DisplaySyncService.php
â”‚   â”‚   â”‚   â”œâ”€â”€ Events/             # WebSocket broadcast events
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SceneChanged.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MusicChanged.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BattleUpdated.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CharacterUpdated.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DiceRolled.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChoicePresented.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DisplayText.php
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DisplayBlackout.php
â”‚   â”‚   â”‚   â””â”€â”€ Traits/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â”œâ”€â”€ dnd.php             # Game rules config (ability scores, skills, etc.)
â”‚   â”‚   â”‚   â”œâ”€â”€ upload.php
â”‚   â”‚   â”‚   â””â”€â”€ content.php
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â”‚   â””â”€â”€ seeders/
â”‚   â”‚   â”‚       â”œâ”€â”€ RolesAndPermissionsSeeder.php
â”‚   â”‚   â”‚       â”œâ”€â”€ RuleSystemsSeeder.php    # D&D 5e: Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹, Ğ±Ğ¾Ñ‘Ğ²ĞºĞ°
â”‚   â”‚   â”‚       â”œâ”€â”€ SettingsSeeder.php       # Eberron (Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³)
â”‚   â”‚   â”‚       â”œâ”€â”€ SpellsSeeder.php         # Ğ—Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼
â”‚   â”‚   â”‚       â”œâ”€â”€ MonstersSeeder.php       # ĞœĞ¾Ğ½ÑÑ‚Ñ€Ñ‹ + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼
â”‚   â”‚   â”‚       â”œâ”€â”€ ItemsSeeder.php          # ĞŸÑ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹ + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼
â”‚   â”‚   â”‚       â”œâ”€â”€ RacesSeeder.php          # Ğ Ğ°ÑÑ‹ + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼
â”‚   â”‚   â”‚       â”œâ”€â”€ ClassesSeeder.php        # ĞšĞ»Ğ°ÑÑÑ‹ + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼
â”‚   â”‚   â”‚       â””â”€â”€ RulesSeeder.php          # Core rules reference
â”‚   â”‚   â”œâ”€â”€ docker/
â”‚   â”‚   â””â”€â”€ routes/api.php
â”‚   â”‚
â”‚   â””â”€â”€ web/                        # Next.js 16 Frontend
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ app/[locale]/
â”‚       â”‚   â”‚   â”œâ”€â”€ (auth)/         # Login, register
â”‚       â”‚   â”‚   â”œâ”€â”€ (landing)/      # Landing page (guest/anonymous â€” Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ)
â”‚       â”‚   â”‚   â”œâ”€â”€ (player)/       # Player client pages (mobile-first, role: player)
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ campaigns/  # Ğ’Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ characters/ # Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° + ĞºĞ»Ğ°Ğ´Ğ±Ğ¸Ñ‰Ğµ
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ create/     # ĞœĞ°ÑÑ‚ĞµÑ€ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° (wizard)
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ sheet/[id]/ # Ğ›Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° (Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞºÑ€Ğ°Ğ½)
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ spellbook/  # ĞšĞ½Ğ¸Ğ³Ğ° Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğ¹
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ inventory/  # Ğ˜Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ Ğ¸ ÑĞ½Ğ°Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ dice/       # Ğ Ğ¾Ğ»Ğ»ĞµÑ€ ĞºÑƒĞ±Ğ¸ĞºĞ¾Ğ² (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
â”‚       â”‚   â”‚   â”œâ”€â”€ (dashboard)/    # Backoffice DM (desktop-first, role: owner + dm)
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rule-systems/    # Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» (D&D 5e, Warhammer, etc.)
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ settings/        # Ğ¡ĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ¸ (Ğ¼Ğ¸Ñ€Ñ‹: Eberron, Forgotten Realms)
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ campaigns/       # CRUD ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹ (Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ)
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ campaign/[id]/   # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸ĞµĞ¹
â”‚       â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ acts/        # ĞĞºÑ‚Ñ‹ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ (ÑÑĞ¶ĞµÑ‚Ğ½Ñ‹Ğµ Ğ°Ñ€ĞºĞ¸)
â”‚       â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ act/[id]/    # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¼ Ğ°ĞºÑ‚Ğ¾Ğ¼
â”‚       â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sessions/    # Ğ¡ĞµÑÑĞ¸Ğ¸ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ°ĞºÑ‚Ğ°
â”‚       â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ session/[id]/scene-editor/ # Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ ÑÑ†ĞµĞ½
â”‚       â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ encounters/  # Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ¸ Ğ¸ ÑÑ‚Ğ¾Ğ»ĞºĞ½Ğ¾Ğ²ĞµĞ½Ğ¸Ñ
â”‚       â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ battle/      # Ğ¢Ñ€ĞµĞºĞµÑ€ Ğ±Ğ¸Ñ‚Ğ²Ñ‹
â”‚       â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ music/       # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¼ÑƒĞ·Ñ‹ĞºĞ¾Ğ¹
â”‚       â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ random-tables/ # Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ÑÑ‚ĞµĞ¹
â”‚       â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ npcs/        # ĞĞµĞ¸Ğ³Ñ€Ğ¾Ğ²Ñ‹Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ¸
â”‚       â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notes/       # Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚       â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ players/     # Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ¸ Ğ¸Ñ… Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ¸
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ monsters/        # Ğ‘ĞµÑÑ‚Ğ¸Ğ°Ñ€Ğ¸Ğ¹ (Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ±Ğ°Ğ·Ğ°)
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ spells/          # Ğ¡Ğ¿Ñ€Ğ°Ğ²Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğ¹
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ items/           # Ğ¡Ğ¿Ñ€Ğ°Ğ²Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ²
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users/           # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸ (owner only)
â”‚       â”‚   â”‚   â”‚   â”‚   â””â”€â”€ display-control/ # ĞŸÑƒĞ»ÑŒÑ‚ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¢Ğ’/Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¾Ğ¼
â”‚       â”‚   â”‚   â””â”€â”€ (display)/      # Display client (ğŸ“º Ğ¢Ğ’/Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€, fullscreen)
â”‚       â”‚   â”‚       â”œâ”€â”€ screen/     # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ view (ÑÑ†ĞµĞ½Ñ‹, Ğ¼ÑƒĞ·Ñ‹ĞºĞ°, Ğ²Ñ‹Ğ±Ğ¾Ñ€)
â”‚       â”‚   â”‚       â””â”€â”€ setup/      # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ´Ğ¸ÑĞ¿Ğ»ĞµÑ (Ğ²Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸)
â”‚       â”‚   â”œâ”€â”€ components/
â”‚       â”‚   â”‚   â”œâ”€â”€ ui/             # shadcn/ui components
â”‚       â”‚   â”‚   â”œâ”€â”€ landing/        # Landing page components (hero, features, CTA)
â”‚       â”‚   â”‚   â”œâ”€â”€ player/         # Player-specific components
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CharacterSheet.tsx       # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ»Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CharacterCreator/        # ĞœĞ°ÑÑ‚ĞµÑ€ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ (wizard)
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StepRace.tsx         # Ğ¨Ğ°Ğ³: Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ñ€Ğ°ÑÑ‹ Ñ Ğ¸Ğ»Ğ»ÑÑÑ‚Ñ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StepClass.tsx        # Ğ¨Ğ°Ğ³: Ğ²Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ»Ğ°ÑÑĞ°
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StepAbilities.tsx    # Ğ¨Ğ°Ğ³: Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ (point buy/roll)
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StepSkills.tsx       # Ğ¨Ğ°Ğ³: Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸ Ğ¸ Ğ²Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ñ
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StepEquipment.tsx    # Ğ¨Ğ°Ğ³: ÑĞ½Ğ°Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StepPersonality.tsx  # Ğ¨Ğ°Ğ³: Ğ¸Ğ¼Ñ, Ğ¿Ñ€ĞµĞ´Ñ‹ÑÑ‚Ğ¾Ñ€Ğ¸Ñ, Ğ¿Ğ¾Ñ€Ñ‚Ñ€ĞµÑ‚
â”‚       â”‚   â”‚   â”‚   â”‚   â””â”€â”€ StepSummary.tsx      # Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞ²Ğ¾Ğ´ĞºĞ°
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ AbilityScores.tsx        # Ğ‘Ğ»Ğ¾Ğº 6 Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ HpBar.tsx                # HP Ğ±Ğ°Ñ€ Ñ +/- ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ SpellCard.tsx            # ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ (popup)
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ SpellSlots.tsx           # Ğ¯Ñ‡ĞµĞ¹ĞºĞ¸ Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğ¹
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ InventoryGrid.tsx        # Ğ¡ĞµÑ‚ĞºĞ° Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ SkillsList.tsx           # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ½Ğ°Ğ²Ñ‹ĞºĞ¾Ğ² Ñ Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼Ğ¸
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CampaignPicker.tsx       # Ğ’Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CharacterPicker.tsx      # Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° + ĞºĞ»Ğ°Ğ´Ğ±Ğ¸Ñ‰Ğµ
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ DiceRoller.tsx           # Ğ Ğ¾Ğ»Ğ»ĞµÑ€ ĞºÑƒĞ±Ğ¸ĞºĞ¾Ğ²
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ DeathScreen.tsx          # Ğ­ĞºÑ€Ğ°Ğ½ ÑĞ¼ĞµÑ€Ñ‚Ğ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° (RIP)
â”‚       â”‚   â”‚   â”œâ”€â”€ dashboard/      # Backoffice / DM components
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ SceneEditor/             # Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ Ğ´ĞµÑ€ĞµĞ²Ğ° ÑÑ†ĞµĞ½
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SceneEditor.tsx      # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ (@xyflow/react)
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SceneNode.tsx        # Ğ£Ğ·ĞµĞ» ÑÑ†ĞµĞ½Ñ‹ (ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ñ Ñ‚Ğ¸Ğ¿Ğ¾Ğ¼, Ğ¸ĞºĞ¾Ğ½ĞºĞ¾Ğ¹)
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SceneEdge.tsx        # Ğ¡Ğ²ÑĞ·ÑŒ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑÑ†ĞµĞ½Ğ°Ğ¼Ğ¸
â”‚       â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ScenePanel.tsx       # ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ¹ ÑÑ†ĞµĞ½Ñ‹
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ BattleTracker.tsx        # Ğ¢Ñ€ĞµĞºĞµÑ€ Ğ±Ğ¸Ñ‚Ğ²Ñ‹ (Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ğ°, HP, Ñ…Ğ¾Ğ´Ñ‹)
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ InitiativeOrder.tsx      # ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ñ‹
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ RandomTableRoller.tsx    # Ğ‘Ñ€Ğ¾ÑĞ¾Ğº Ğ¿Ğ¾ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ÑÑ‚ĞµĞ¹
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ EncounterBuilder.tsx     # ĞŸĞ¾ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ²ÑÑ‚Ñ€ĞµÑ‡
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CampaignTimeline.tsx     # Ğ¢Ğ°Ğ¹Ğ¼Ğ»Ğ°Ğ¹Ğ½ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ DisplayRemote.tsx        # ĞŸÑƒĞ»ÑŒÑ‚ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¢Ğ’
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ UserManagement.tsx       # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸ (owner)
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ data-table.tsx           # DataTable (Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ¸Ğ· XStream)
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ data-table-column-header.tsx
â”‚       â”‚   â”‚   â””â”€â”€ display/        # Display client components (ğŸ“º)
â”‚       â”‚   â”‚       â”œâ”€â”€ SceneRenderer.tsx        # Ğ ĞµĞ½Ğ´ĞµÑ€ ÑÑ†ĞµĞ½Ñ‹ (Ñ„Ğ¾Ğ½, ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹)
â”‚       â”‚   â”‚       â”œâ”€â”€ MusicPlayer.tsx          # ĞŸĞ»ĞµĞµÑ€ Ğ¼ÑƒĞ·Ñ‹ĞºĞ¸ (Ñ„Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğ¹)
â”‚       â”‚   â”‚       â”œâ”€â”€ ChoiceScreen.tsx         # Ğ­ĞºÑ€Ğ°Ğ½ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° (Pillars of Eternity)
â”‚       â”‚   â”‚       â””â”€â”€ BattleDisplay.tsx        # ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ±Ğ¸Ñ‚Ğ²Ñ‹ Ğ½Ğ° Ğ¢Ğ’
â”‚       â”‚   â”œâ”€â”€ contexts/
â”‚       â”‚   â”‚   â”œâ”€â”€ AuthContext.tsx
â”‚       â”‚   â”‚   â”œâ”€â”€ CampaignContext.tsx
â”‚       â”‚   â”‚   â””â”€â”€ WebSocketContext.tsx
â”‚       â”‚   â”œâ”€â”€ hooks/
â”‚       â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ useDiceRoller.ts
â”‚       â”‚   â”‚   â””â”€â”€ useBattleTracker.ts
â”‚       â”‚   â”œâ”€â”€ lib/
â”‚       â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ dice.ts         # Dice rolling logic
â”‚       â”‚   â”‚   â”œâ”€â”€ dnd-rules.ts    # D&D rules helpers
â”‚       â”‚   â”‚   â””â”€â”€ i18n.ts         # i18n config (ru only, expandable)
â”‚       â”‚   â””â”€â”€ types/
â”‚       â”‚       â”œâ”€â”€ rule-system.ts  # RuleSystem, Abilities, Skills, Formulas, Conditions
â”‚       â”‚       â”œâ”€â”€ setting.ts      # Setting, SettingPivot, Overrides
â”‚       â”‚       â”œâ”€â”€ character.ts    # Character, Abilities, Skills, DeathInfo, CharacterStats
â”‚       â”‚       â”œâ”€â”€ spell.ts        # Spell, SpellSlots, Components
â”‚       â”‚       â”œâ”€â”€ item.ts         # Item, EquippedItem, Currency
â”‚       â”‚       â”œâ”€â”€ campaign.ts     # Campaign, CampaignSettings, Session
â”‚       â”‚       â”œâ”€â”€ scene.ts        # Scene, SceneConnection, SceneDisplay, SceneChoice
â”‚       â”‚       â”œâ”€â”€ battle.ts       # BattleSession, Participant, Condition
â”‚       â”‚       â””â”€â”€ monster.ts      # Monster, MonsterAction
â”‚       â””â”€â”€ messages/               # i18n (ru.json â€” ĞµĞ´Ğ¸Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ ÑĞ·Ñ‹Ğº)
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ package.json
â”œâ”€â”€ CLAUDE.md                       # This file
â””â”€â”€ PROJECT_BOOTSTRAP_GUIDE.md
```

## Commands

### Development

**IMPORTANT:** PHP 8.4 runs inside Docker container `dnd_api`. Do NOT use local PHP. Laravel server starts automatically with docker-compose.

```bash
# Start everything (PostgreSQL, Redis, Mailpit, pgAdmin + Laravel API + Queue worker)
npm run docker:up              # API at :8000, fully automatic setup

# Install frontend dependencies (first time or after package changes)
cd apps/web && npm install

# Frontend (from root)
npm run dev                    # Start Next.js dev server on :3000

# Or work directly in apps/web
cd apps/web && npm run dev
```

**Automatic Local Dev Setup** (`docker:up` does everything automatically):
- Database creation (PostgreSQL creates DB from env vars)
- Migrations (idempotent - safe to run multiple times)
- Base seeders: roles, permissions, owner, ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» D&D 5e, ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³ Eberron, Ğ¸Ğ³Ñ€Ğ¾Ğ²Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ, Ğ¼Ğ¾Ğ½ÑÑ‚Ñ€Ñ‹, Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹, Ñ€Ğ°ÑÑ‹, ĞºĞ»Ğ°ÑÑÑ‹, Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°) Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ğµ Ğº Eberron
- DevSeeder: sample campaigns, characters, encounters (only in `APP_ENV=local`)
- Passport keys and OAuth client
- Storage symlink

**Idempotent Design:** All seeders use `updateOrCreate`/`firstOrCreate`, so `docker:up` can be run multiple times without issues.

**Note:** This is NOT an npm workspaces monorepo. Each app manages its own dependencies:
- `apps/api` â€” PHP/Composer dependencies
- `apps/web` â€” npm dependencies (package-lock.json is here)

### Laravel Commands (via Docker)

```bash
docker exec dnd_api php artisan <command>
docker exec dnd_api php artisan migrate
docker exec dnd_api php artisan db:seed
docker exec dnd_api php artisan tinker
docker exec -it dnd_api bash
```

### Testing

```bash
# Laravel tests (via Docker)
docker exec dnd_api php artisan test
docker exec dnd_api php artisan test --filter=TestName

# Frontend lint (from root)
npm run lint

# Frontend build (IMPORTANT: run before pushing!)
npm run build
```

**IMPORTANT:** Always run `npm run build` before pushing changes. `npm run dev` does NOT check types.

### Docker

```bash
npm run docker:up              # Start containers
npm run docker:down            # Stop containers (data preserved)
npm run docker:reset           # DESTRUCTIVE: removes all volumes, fresh start
```

### Docker Containers

| Container | Purpose | Port |
|-----------|---------|------|
| dnd_api | Laravel API (PHP 8.4) | 8000 |
| dnd_queue | Queue worker (media, notifications) | - |
| dnd_postgres | PostgreSQL 17 | 5432 |
| dnd_redis | Redis 7 (cache, queue, WebSocket) | 6379 |
| dnd_mailpit | Email testing | 8025 (UI), 1025 (SMTP) |
| dnd_pgadmin | Database admin | 5050 |

## Architecture

### Client Architecture (Ğ¾Ğ´Ğ½Ğ° ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ° + Ğ²ĞµĞ±)

Ğ’ÑĞµ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ â€” ÑÑ‚Ğ¾ Ğ¾Ğ´Ğ¸Ğ½ Next.js app Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ route groups, Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ¾Ğ´ ÑĞ²Ğ¾Ñ‘ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ¾ Ğ¸ Ñ€Ğ¾Ğ»ÑŒ:

```
(landing)    â†’ /              â€” ğŸŒ Ğ›ĞµĞ½Ğ´Ğ¸Ğ½Ğ³ (guest/anonymous â€” ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ)
(auth)       â†’ /login, /register  â€” ğŸ” ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
(player)     â†’ /player/*     â€” ğŸ“± Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½/Ğ¿Ğ»Ğ°Ğ½ÑˆĞµÑ‚ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° (role: player, mobile-first)
(dashboard)  â†’ /dashboard/*  â€” ğŸ’» Backoffice DM (role: owner + dm, desktop-first)
(display)    â†’ /display/*    â€” ğŸ“º Ğ¢Ğ’/Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€ (fullscreen, ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ¸Ğ· dashboard)
```

ĞšĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· **WebSocket** (Laravel Broadcasting + Redis) Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸:
- DM Ğ¼ĞµĞ½ÑĞµÑ‚ ÑÑ†ĞµĞ½Ñƒ â†’ Ğ½Ğ° Ğ¢Ğ’ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ Ñ„Ğ¾Ğ½ Ğ¸ Ğ¼ÑƒĞ·Ñ‹ĞºĞ°
- DM Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ Ğ±Ğ¸Ñ‚Ğ²Ñƒ â†’ Ñƒ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°Ñ… Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ğ°
- Ğ˜Ğ³Ñ€Ğ¾Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑƒÑ€Ğ¾Ğ½ â†’ DM Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğµ HP
- DM Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ÑĞºÑ€Ğ°Ğ½ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° â†’ Ğ½Ğ° Ğ¢Ğ’ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ÑÑ‚ÑÑ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹

**Display Client** Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ñ‹Ğ¹ â€” Ğ¾Ğ½ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ĞºĞ°Ğº Â«ÑƒĞ¼Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞ»ĞµĞ²Ğ¸Ğ·Ğ¾Ñ€Â»:
- ĞÑ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ½Ğ° Ğ¢Ğ’/Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğµ Ñ‡ĞµÑ€ĞµĞ· Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€ (fullscreen / F11)
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ DM Client (Ğ¿ÑƒĞ»ÑŒÑ‚ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ)
- ĞŸĞ¾Ğ»Ğ½Ğ¾ÑĞºÑ€Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼, Ğ±ĞµĞ· Ğ°Ğ´Ñ€ĞµÑĞ½Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ¾ĞºĞ¸, Ğ±ĞµĞ· UI ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
- ĞŸĞ»Ğ°Ğ²Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑÑ†ĞµĞ½Ğ°Ğ¼Ğ¸ (fade, crossfade)
- Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ğ°Ñ Ğ¼ÑƒĞ·Ñ‹ĞºĞ° Ñ Ğ¿Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¼ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸ĞµĞ¼
- Ğ­ĞºÑ€Ğ°Ğ½Ñ‹ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ² ÑÑ‚Ğ¸Ğ»Ğµ CRPG (Pillars of Eternity, Baldur's Gate)

### Authentication & User Flow

Laravel Passport handles OAuth2 with personal access tokens.

**Roles (Spatie laravel-permission):**

| Role | Access | ĞĞ°Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚ÑÑ | Description |
|------|--------|------------|-------------|
| `owner` | Ğ’ÑÑ‘ | Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğ¹ (ÑĞ¸Ğ´ĞµÑ€) | Ğ’Ğ»Ğ°Ğ´ĞµĞ»ĞµÑ† Ğ¸Ğ½ÑÑ‚Ğ°Ğ½ÑĞ°. ĞĞ½ Ğ¶Ğµ DM. Ğ•Ğ´Ğ¸Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ ĞºÑ‚Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ñ€Ğ¾Ğ»ÑŒ `dm` Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼ |
| `dm` | DM client + backoffice + display | Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ owner | ĞœĞ°ÑÑ‚ĞµÑ€ Ğ¿Ğ¾Ğ´Ğ·ĞµĞ¼ĞµĞ»Ğ¸Ğ¹. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¸ Ğ²ĞµĞ´Ñ‘Ñ‚ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸, ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ¾Ğ¼ Ñ‡ĞµÑ€ĞµĞ· backoffice |
| `player` | Player client Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ | ĞŸÑ€Ğ¸ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ + Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ | Ğ˜Ğ³Ñ€Ğ¾Ğº. Ğ’Ğ¸Ğ´Ğ¸Ñ‚ Ğ¢ĞĞ›Ğ¬ĞšĞ ÑĞ²Ğ¾Ğ¹ player client. ĞĞµ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾ Ğ¸Ğ· DM/backoffice |
| `guest` | Landing page Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ | ĞĞµĞ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ | ĞĞ½Ğ¾Ğ½Ğ¸Ğ¼. Ğ’Ğ¸Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºÑ€Ğ°ÑĞ¸Ğ²ÑƒÑ Ğ»ĞµĞ½Ğ´Ğ¸Ğ½Ğ³-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ |

**Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°:**
```
owner (Ğ²ÑÑ‘)
  â””â”€ dm (DM client + backoffice + display control)
       â””â”€ player (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ player client)
            â””â”€ guest/anonymous (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ landing page)
```

**ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°:**
- Owner = ÑÑƒĞ¿ĞµÑ€Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ. ĞĞ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ DM. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ ÑĞ¸Ğ´ĞµÑ€Ğ¾Ğ¼ Ğ¸Ğ· env vars. ĞĞµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½
- DM = Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚ÑÑ Ğ¢ĞĞ›Ğ¬ĞšĞ owner-Ğ¾Ğ¼. Owner Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ´Ğ°Ñ‚ÑŒ Ñ€Ğ¾Ğ»ÑŒ DM Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ğ´Ñ€ÑƒĞ³ Ñ‚Ğ¾Ğ¶Ğµ Ñ…Ğ¾Ñ‡ĞµÑ‚ Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑŒ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ)
- Player = Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¢ĞĞ›Ğ¬ĞšĞ player client. ĞĞ¸ĞºĞ°ĞºĞ¾Ğ³Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº backoffice, ĞºĞ°Ğ¼Ğ¿ĞµĞ¹Ğ½-Ğ¼ĞµĞ½ĞµĞ´Ğ¶Ğ¼ĞµĞ½Ñ‚Ñƒ, DM-Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ğ¼. ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ
- Guest = Ğ½Ğµ Ğ·Ğ°Ğ»Ğ¾Ğ³Ğ¸Ğ½ĞµĞ½, Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ»ĞµĞ½Ğ´Ğ¸Ğ½Ğ³ Ñ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸ĞµĞ¼ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ğ¸ ĞºĞ½Ğ¾Ğ¿ĞºĞ¾Ğ¹ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸

**Backoffice (DM + Owner):**
Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸ÑĞ¼Ğ¸, ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ¾Ğ¼, Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸ Ğ¸Ğ´Ñ‘Ñ‚ Ñ‡ĞµÑ€ĞµĞ· backoffice â€” ĞºĞ°Ğº Ğ² XStream. Ğ­Ñ‚Ğ¾ Ñ€Ğ°Ğ·Ğ´ĞµĞ» `/dashboard/*` Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğ¹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ€Ğ¾Ğ»ÑĞ¼ `owner` Ğ¸ `dm`:
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸ÑĞ¼Ğ¸ (CRUD, Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸, Ğ¿Ñ€Ğ¸Ğ³Ğ»Ğ°ÑˆĞµĞ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²)
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸ (Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ, Ñ€Ğ¾Ğ»Ğ¸ â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ owner)
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼Ğ¸ (Ğ¼Ğ¸Ñ€Ñ‹/Ğ²ÑĞµĞ»ĞµĞ½Ğ½Ñ‹Ğµ, Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°)
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ¾Ğ¼ (Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ, Ğ¼Ğ¾Ğ½ÑÑ‚Ñ€Ñ‹, Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹ â€” Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼, overrides)
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ†ĞµĞ½Ğ°Ğ¼Ğ¸, Ğ¼ÑƒĞ·Ñ‹ĞºĞ¾Ğ¹, Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°Ğ¼Ğ¸ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ÑÑ‚ĞµĞ¹
- Ğ¢Ñ€ĞµĞºĞµÑ€ Ğ±Ğ¸Ñ‚Ğ²Ñ‹, Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ â€” Ğ²ÑÑ‘ Ğ·Ğ´ĞµÑÑŒ

**Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ:**
```
1. Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞº Ğ·Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ½Ğ° ÑĞ°Ğ¹Ñ‚ â†’ Ğ’Ğ¸Ğ´Ğ¸Ñ‚ ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹ Ğ»ĞµĞ½Ğ´Ğ¸Ğ½Ğ³ (guest)
2. ĞšĞ»Ğ¸ĞºĞ°ĞµÑ‚ "Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ" â†’ Ğ’Ğ²Ğ¾Ğ´Ğ¸Ñ‚ Ğ¸Ğ¼Ñ, email, Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ
3. ĞĞ° Ğ¿Ğ¾Ñ‡Ñ‚Ñƒ Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ğ¸ÑÑŒĞ¼Ğ¾ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ â†’ ĞšĞ»Ğ¸ĞºĞ°ĞµÑ‚ ÑÑÑ‹Ğ»ĞºÑƒ
4. Email Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´Ñ‘Ğ½, Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚ is_active=false, Ñ€Ğ¾Ğ»ÑŒ player
5. Owner/DM Ğ² backoffice Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ â†’ ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ ĞµĞ³Ğ¾
6. Ğ˜Ğ³Ñ€Ğ¾Ğº Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ğ¾Ğ¹Ñ‚Ğ¸ â†’ Player client
```

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ DM:**
```
Owner Ğ·Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ² backoffice â†’ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸
  â†’ Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
  â†’ "ĞĞ°Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ÑŒ ĞœĞ°ÑÑ‚ĞµÑ€Ğ¾Ğ¼" (Ğ¼ĞµĞ½ÑĞµÑ‚ Ñ€Ğ¾Ğ»ÑŒ player â†’ dm)
  â†’ Ğ­Ñ‚Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ DM client Ğ¸ backoffice
```

Owner/DM Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ´ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ»ÑĞ±Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ² Ğ»ÑĞ±Ğ¾Ğ¹ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚ (Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ, Ğ²Ñ…Ğ¾Ğ´ Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½).

**Campaign-level access:** ĞŸĞ¾Ğ¼Ğ¸Ğ¼Ğ¾ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€Ğ¾Ğ»ĞµĞ¹, Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ½Ğ° ÑƒÑ€Ğ¾Ğ²Ğ½Ğµ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸:
- DM â€” ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸, Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ĞµÑ‘ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼ Ğ² backoffice
- Player â€” Ğ¿Ñ€Ğ¸Ğ³Ğ»Ğ°ÑˆÑ‘Ğ½ DM Ğ² ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ, Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ¸ + Ğ¾Ğ±Ñ‰Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
- ĞĞ´Ğ¸Ğ½ DM Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²ĞµÑÑ‚Ğ¸ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹
- ĞĞ´Ğ¸Ğ½ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ² Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸ÑÑ… (Ñƒ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… DM)

### Player Client â€” ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ UX Flow

#### Ğ’Ñ…Ğ¾Ğ´ Ğ¸ Ğ²Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
```
ğŸ“± ĞÑ‚ĞºÑ€Ñ‹Ğ» Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ (Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½/Ğ¿Ğ»Ğ°Ğ½ÑˆĞµÑ‚)
â”‚
â”œâ”€ ĞĞµ Ğ·Ğ°Ğ»Ğ¾Ğ³Ğ¸Ğ½ĞµĞ½ â†’ Ğ­ĞºÑ€Ğ°Ğ½ Ğ²Ñ…Ğ¾Ğ´Ğ° (login/register)
â”‚   â””â”€ Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ â†’ ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ email â†’ Ğ–Ğ´Ñ‘Ğ¼ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸ Ğ¾Ñ‚ DM
â”‚
â”œâ”€ Ğ—Ğ°Ğ»Ğ¾Ğ³Ğ¸Ğ½ĞµĞ½, Ğ½ĞµÑ‚ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹ â†’ "Ğ’Ğ°Ñ Ğ¿Ğ¾ĞºĞ° Ğ½Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ»Ğ¸ Ğ½Ğ¸ Ğ² Ğ¾Ğ´Ğ½Ñƒ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ"
â”‚
â”œâ”€ Ğ—Ğ°Ğ»Ğ¾Ğ³Ğ¸Ğ½ĞµĞ½, Ğ¾Ğ´Ğ½Ğ° ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ â†’ Ğ¡Ñ€Ğ°Ğ·Ñƒ Ğ² ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ
â”‚
â””â”€ Ğ—Ğ°Ğ»Ğ¾Ğ³Ğ¸Ğ½ĞµĞ½, Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹ â†’ Ğ’Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
    â”œâ”€ ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ "Ğ¢Ğ°Ğ¹Ğ½Ñ‹ Ğ¨Ğ°Ñ€Ğ½Ğ°" (Eberron Â· DM: Ğ’Ğ°ÑÑ) â€” 3 Ğ¶Ğ¸Ğ²Ñ‹Ñ… Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
    â”œâ”€ ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ "Ğ—Ğ°Ñ‚ĞµÑ€ÑĞ½Ğ½Ñ‹Ğµ ÑˆĞ°Ñ…Ñ‚Ñ‹" (Eberron Â· DM: ĞŸĞµÑ‚Ñ) â€” 1 Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶
    â””â”€ [ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ñ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼, ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ¾Ğ¼, DM, Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ ÑĞµÑÑĞ¸Ñ]
```

#### Ğ’Ğ½ÑƒÑ‚Ñ€Ğ¸ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ â€” Ğ²Ñ‹Ğ±Ğ¾Ñ€/ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
```
ğŸ“± Ğ’Ğ¾ÑˆÑ‘Ğ» Ğ² ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ
â”‚
â”œâ”€ ĞĞµÑ‚ Ğ¶Ğ¸Ğ²Ñ‹Ñ… Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ â†’ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
â”‚
â”œâ”€ ĞĞ´Ğ¸Ğ½ Ğ¶Ğ¸Ğ²Ğ¾Ğ¹ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ â†’ Ğ¡Ñ€Ğ°Ğ·Ñƒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ»Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
â”‚
â””â”€ ĞĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¶Ğ¸Ğ²Ñ‹Ñ… Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ â†’ Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
    â”œâ”€ Ğ¢Ğ¾Ñ€Ğ¸Ğ½ Ğ”ÑƒĞ±Ğ¾Ñ‰Ğ¸Ñ‚ (Ğ”Ğ²Ğ°Ñ€Ñ„ Ğ’Ğ¾Ğ¸Ğ½, ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ 5) ğŸŸ¢
    â”œâ”€ Ğ­Ğ»ÑŒĞ¼Ğ¸Ğ½ÑÑ‚ĞµÑ€ (Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞº Ğ’Ğ¾Ğ»ÑˆĞµĞ±Ğ½Ğ¸Ğº, ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ 3) ğŸŸ¢
    â”œâ”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€ ĞšĞ»Ğ°Ğ´Ğ±Ğ¸Ñ‰Ğµ â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”œâ”€ Ğ“Ğ¸Ğ¼Ğ»Ğ¸ (Ğ”Ğ²Ğ°Ñ€Ñ„ Ğ’Ğ°Ñ€Ğ²Ğ°Ñ€, ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ 2) ğŸ’€ Ğ£Ğ±Ğ¸Ñ‚ Ğ³Ğ¾Ğ±Ğ»Ğ¸Ğ½Ğ°Ğ¼Ğ¸ (ÑĞµÑÑĞ¸Ñ #4)
    â””â”€ [+ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°]
```

**ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°:** Ğ¿Ñ€Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ·Ğ½Ğ°ĞµÑ‚ Ğ¸Ğ· Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ¸ ĞµÑ‘ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°:
- ĞšĞ°ĞºĞ¸Ğµ Ñ€Ğ°ÑÑ‹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ (Ğ¸Ğ· Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ¾Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ° + DM Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)
- ĞšĞ°ĞºĞ¸Ğµ ĞºĞ»Ğ°ÑÑÑ‹ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ñ‹ (Ğ¸Ğ· Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ¾Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°)
- Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ (Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ½Ğµ 1, ĞµÑĞ»Ğ¸ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ ÑƒĞ¶Ğµ Ğ¸Ğ´Ñ‘Ñ‚)
- Ğ”Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ñ‹Ğµ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ¸ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑÑÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ (Ñ€Ğ°ÑÑ‹, ĞºĞ»Ğ°ÑÑÑ‹, Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ)
- ĞœĞµÑ‚Ğ¾Ğ´ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº (Ğ¸Ğ· RuleSystem: Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ° Ğ¾Ñ‡ĞºĞ¾Ğ² / ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ / Ğ±Ñ€Ğ¾ÑĞ¾Ğº)
- Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ğ¾Ğµ Ğ·Ğ¾Ğ»Ğ¾Ñ‚Ğ¾ (ĞµÑĞ»Ğ¸ Ğ½ĞµÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¾Ğµ)

#### Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° â€” ĞŸĞ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ğ¼Ğ°ÑÑ‚ĞµÑ€

ĞšÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹, Ñ Ğ¸Ğ»Ğ»ÑÑÑ‚Ñ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸, Ğ½Ğ° Ğ²ĞµÑÑŒ ÑĞºÑ€Ğ°Ğ½ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑˆĞ°Ğ³ â€” Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½ Ñ Ğ¿Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°Ğ¼Ğ¸.

```
ğŸ“± Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° (wizard-style, ÑˆĞ°Ğ³Ğ¸ Ğ½Ğ° Ğ²ĞµÑÑŒ ÑĞºÑ€Ğ°Ğ½)
â”‚
â”œâ”€ Ğ¨Ğ°Ğ³ 1: Ğ ĞĞ¡Ğ ğŸ§
â”‚   ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ñ€Ğ°Ñ Ñ Ğ¸Ğ»Ğ»ÑÑÑ‚Ñ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸ (Ğ¿Ğ¾Ñ€Ñ‚Ñ€ĞµÑ‚ + ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ)
â”‚   - Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞº: "Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸ Ğ°Ğ¼Ğ±Ğ¸Ñ†Ğ¸Ğ¾Ğ·Ğ½Ñ‹Ğµ..."
â”‚   - Ğ­Ğ»ÑŒÑ„: "Ğ“Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ·Ğ½Ñ‹Ğµ Ğ¸ Ğ´Ğ¾Ğ»Ğ³Ğ¾Ğ¶Ğ¸Ğ²ÑƒÑ‰Ğ¸Ğµ..."
â”‚   - Ğ”Ğ²Ğ°Ñ€Ñ„: "ĞšÑ€ĞµĞ¿ĞºĞ¸Ğµ Ğ¸ ÑƒĞ¿Ñ€ÑĞ¼Ñ‹Ğµ..."
â”‚   [Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ»] â†’ ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ±Ğ¾Ğ½ÑƒÑÑ‹: +2 Ğ¢Ğ•Ğ›, +1 ĞœĞ”Ğ , Ğ¢Ñ‘Ğ¼Ğ½Ğ¾Ğµ Ğ·Ñ€ĞµĞ½Ğ¸Ğµ 18Ğ¼
â”‚
â”œâ”€ Ğ¨Ğ°Ğ³ 2: ĞšĞ›ĞĞ¡Ğ¡ âš”ï¸
â”‚   ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ ĞºĞ»Ğ°ÑÑĞ¾Ğ² Ñ Ğ¸Ğ»Ğ»ÑÑÑ‚Ñ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸ Ğ¸ Ğ¸ĞºĞ¾Ğ½ĞºĞ°Ğ¼Ğ¸
â”‚   - Ğ’Ğ¾Ğ¸Ğ½: ĞºĞ¾ÑÑ‚ÑŒ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ d10, Ñ‚ÑĞ¶Ñ‘Ğ»Ñ‹Ğµ Ğ´Ğ¾ÑĞ¿ĞµÑ…Ğ¸
â”‚   - Ğ’Ğ¾Ğ»ÑˆĞµĞ±Ğ½Ğ¸Ğº: ĞºĞ¾ÑÑ‚ÑŒ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ d6, Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ
â”‚   - ĞŸĞ»ÑƒÑ‚: ĞºĞ¾ÑÑ‚ÑŒ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ d8, ÑĞºÑ€Ñ‹Ñ‚Ğ½Ğ°Ñ Ğ°Ñ‚Ğ°ĞºĞ°
â”‚   [Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ»] â†’ ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ñ„Ğ¸Ñ‡Ğ¸ 1 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ
â”‚
â”œâ”€ Ğ¨Ğ°Ğ³ 3: Ğ¥ĞĞ ĞĞšĞ¢Ğ•Ğ Ğ˜Ğ¡Ğ¢Ğ˜ĞšĞ˜ ğŸ²
â”‚   ĞœĞµÑ‚Ğ¾Ğ´ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸:
â”‚   - ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ° Ğ¾Ñ‡ĞºĞ¾Ğ² (27 Ğ¾Ñ‡ĞºĞ¾Ğ², Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ +/- ĞºĞ½Ğ¾Ğ¿ĞºĞ¸)
â”‚   - Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ (15,14,13,12,10,8 â€” drag & drop Ğ¿Ğ¾ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ°Ğ¼)
â”‚   - Ğ‘Ñ€Ğ¾ÑĞ¾Ğº ĞºÑƒĞ±Ğ¸ĞºĞ¾Ğ² (4d6kh3 â€” Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ±Ñ€Ğ¾ÑĞºĞ°, Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿ĞµÑ€ĞµĞ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ)
â”‚   ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ñ€Ğ°ÑĞ¾Ğ²Ñ‹Ñ… Ğ±Ğ¾Ğ½ÑƒÑĞ¾Ğ²
â”‚
â”œâ”€ Ğ¨Ğ°Ğ³ 4: ĞĞĞ’Ğ«ĞšĞ˜ Ğ˜ Ğ’Ğ›ĞĞ”Ğ•ĞĞ˜Ğ¯ ğŸ“‹
â”‚   Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¾Ğ² (ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ ĞºĞ»Ğ°ÑÑĞ° Ğ¸ Ğ¿Ñ€ĞµĞ´Ñ‹ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸)
â”‚   Ğ§ĞµĞºĞ±Ğ¾ĞºÑÑ‹ Ñ Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ°Ğ¼Ğ¸: "Ğ’Ğ½Ğ¸Ğ¼Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ (ĞœĞ”Ğ ) â€” Ğ·Ğ°Ğ¼ĞµÑ‡Ğ°Ñ‚ÑŒ ÑĞºÑ€Ñ‹Ñ‚Ğ¾Ğµ"
â”‚   Ğ¯Ğ·Ñ‹ĞºĞ¸, Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹
â”‚
â”œâ”€ Ğ¨Ğ°Ğ³ 5: Ğ¡ĞĞĞ Ğ¯Ğ–Ğ•ĞĞ˜Ğ• ğŸ’
â”‚   Ğ”Ğ²Ğ° Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ°:
â”‚   - Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ ĞºĞ»Ğ°ÑÑĞ° (Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾, Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ğ½Ğ¾Ğ²Ğ¸Ñ‡ĞºĞ°Ğ¼)
â”‚   - ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ° Ğ·Ğ° Ğ·Ğ¾Ğ»Ğ¾Ñ‚Ñ‹Ğµ (Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‹Ñ‚Ğ½Ñ‹Ñ…, ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸)
â”‚
â”œâ”€ Ğ¨Ğ°Ğ³ 6: Ğ›Ğ˜Ğ§ĞĞĞ¡Ğ¢Ğ¬ ğŸ“œ
â”‚   Ğ˜Ğ¼Ñ (Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ğ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ)
â”‚   ĞŸÑ€ĞµĞ´Ñ‹ÑÑ‚Ğ¾Ñ€Ğ¸Ñ (Ğ²Ñ‹Ğ±Ğ¾Ñ€ + Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ)
â”‚   Ğ§ĞµÑ€Ñ‚Ñ‹ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ°, Ğ¸Ğ´ĞµĞ°Ğ»Ñ‹, Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚Ğ¸, ÑĞ»Ğ°Ğ±Ğ¾ÑÑ‚Ğ¸
â”‚   [ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾] Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚Ñ€ĞµÑ‚
â”‚
â””â”€ Ğ“ĞĞ¢ĞĞ’Ğ! â†’ ĞšÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½-ÑĞ²Ğ¾Ğ´ĞºĞ° â†’ "ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ!"
```

**Ğ”Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ğ¼Ğ°ÑÑ‚ĞµÑ€Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ:**
- ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑˆĞ°Ğ³ â€” fullscreen ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ñ Ğ¸Ğ»Ğ»ÑÑÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ²Ğ²ĞµÑ€Ñ…Ñƒ
- ĞŸĞ»Ğ°Ğ²Ğ½Ñ‹Ğµ swipe-Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑˆĞ°Ğ³Ğ°Ğ¼Ğ¸ (ĞºĞ°Ğº onboarding Ğ² Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸ÑÑ…)
- ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€ Ğ¸Ğ»Ğ¸ Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸ Ğ²Ğ½Ğ¸Ğ·Ñƒ
- ĞšĞ½Ğ¾Ğ¿ĞºĞ° "ĞĞ°Ğ·Ğ°Ğ´" Ğ²ÑĞµĞ³Ğ´Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ°
- ĞĞ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ ÑˆĞ°Ğ³Ğµ â€” ĞºÑ€Ğ°Ñ‚ĞºĞ¸Ğµ Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ¸ Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¸Ñ‡ĞºĞ¾Ğ² (Ñ€Ğ°Ğ·Ğ²Ğ¾Ñ€Ğ°Ñ‡Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ Ğ¿Ğ¾ Ñ‚Ğ°Ğ¿Ñƒ)
- ĞĞ²Ñ‚Ğ¾-Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚: Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ» Ñ€Ğ°ÑÑƒ â†’ Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹ ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ñ‹; Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ» ĞºĞ»Ğ°ÑÑ â†’ HP Ğ¿Ğ¾ÑÑ‡Ğ¸Ñ‚Ğ°Ğ½Ñ‹

#### Ğ›Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° â€” ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞºÑ€Ğ°Ğ½

```
ğŸ“± Ğ›Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° (Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞºÑ€Ğ°Ğ½, mobile-first)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ĞŸĞ¾Ñ€Ñ‚Ñ€ĞµÑ‚]  Ğ¢Ğ¾Ñ€Ğ¸Ğ½ Ğ”ÑƒĞ±Ğ¾Ñ‰Ğ¸Ñ‚       â”‚
â”‚  Ğ”Ğ²Ğ°Ñ€Ñ„ Â· Ğ’Ğ¾Ğ¸Ğ½ 5 Â· ĞĞ: 6500     â”‚
â”‚                                 â”‚
â”‚  â¤ï¸ 45/52 ĞĞ—    ğŸ›¡ï¸ ĞšĞ” 18       â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  [+ ĞĞ—] [- ĞĞ—]     â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Ğ¡Ğ˜Ğ› â”‚ Ğ›ĞĞ’ â”‚ Ğ¢Ğ•Ğ› â”‚           â”‚
â”‚  â”‚ 16  â”‚ 12  â”‚ 14  â”‚           â”‚
â”‚  â”‚ +3  â”‚ +1  â”‚ +2  â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ Ğ˜ĞĞ¢ â”‚ ĞœĞ”Ğ  â”‚ Ğ¥ĞĞ  â”‚           â”‚
â”‚  â”‚  8  â”‚ 13  â”‚ 10  â”‚           â”‚
â”‚  â”‚ -1  â”‚ +1  â”‚ +0  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                 â”‚
â”‚  âš”ï¸ ĞÑ‚Ğ°ĞºĞ°  ğŸ“– Ğ—Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ       â”‚
â”‚  ğŸ’ Ğ˜Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ  ğŸ“‹ ĞĞ°Ğ²Ñ‹ĞºĞ¸       â”‚
â”‚  ğŸ² ĞšÑƒĞ±Ğ¸ĞºĞ¸  ğŸ“œ ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸     â”‚
â”‚                                 â”‚
â”‚  [Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ: tabs Ğ¸Ğ»Ğ¸ bottom bar]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ¢Ğ°Ğ±Ñ‹ / ÑĞµĞºÑ†Ğ¸Ğ¸ Ğ»Ğ¸ÑÑ‚Ğ° Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°:**

1. **ĞĞ±Ğ·Ğ¾Ñ€** (Ğ³Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½) â€” Ğ¿Ğ¾Ñ€Ñ‚Ñ€ĞµÑ‚, Ğ¸Ğ¼Ñ, Ñ€Ğ°ÑĞ°/ĞºĞ»Ğ°ÑÑ/ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ, HP-Ğ±Ğ°Ñ€ Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¼Ğ¸ +/-, ĞšĞ”, ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ, 6 Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº Ñ Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼Ğ¸, Ğ²Ğ´Ğ¾Ñ…Ğ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ
2. **ĞÑ‚Ğ°ĞºĞ° Ğ¸ Ğ±Ğ¾Ğ¹** â€” Ğ¾Ñ€ÑƒĞ¶Ğ¸Ğµ Ñ Ğ±Ğ¾Ğ½ÑƒÑĞ°Ğ¼Ğ¸ Ğ°Ñ‚Ğ°ĞºĞ¸ Ğ¸ ÑƒÑ€Ğ¾Ğ½Ğ° (Ğ°Ğ²Ñ‚Ğ¾-Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚), Ğ±Ğ¾Ğ½ÑƒÑ Ğ¼Ğ°ÑÑ‚ĞµÑ€ÑÑ‚Ğ²Ğ°, Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ğ°, ÑĞ¿Ğ°ÑĞ±Ñ€Ğ¾ÑĞºĞ¸ Ğ¾Ñ‚ ÑĞ¼ĞµÑ€Ñ‚Ğ¸
3. **Ğ—Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ** (ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ) â€” ÑÑ‡ĞµĞ¹ĞºĞ¸ Ğ¿Ğ¾ ÑƒÑ€Ğ¾Ğ²Ğ½ÑĞ¼ (âœ…/â¬œ), ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ñ…, Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº, Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ Ñ‚Ğ°Ğ¿Ñƒ
4. **Ğ˜Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ** â€” Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹ Ñ Ğ²ĞµÑĞ¾Ğ¼ (Ğ² ĞºĞ³!), ÑĞºĞ¸Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° (Ñ‡Ñ‚Ğ¾ Ğ½Ğ°Ğ´ĞµÑ‚Ğ¾), Ğ²Ğ°Ğ»ÑÑ‚Ğ° (Ğ·Ğ¼/ÑĞ¼/Ğ¼Ğ¼/ÑĞ¼/Ğ¿Ğ¼), Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ Ğ²ĞµÑ / Ğ³Ñ€ÑƒĞ·Ğ¾Ğ¿Ğ¾Ğ´ÑŠÑ‘Ğ¼Ğ½Ğ¾ÑÑ‚ÑŒ
5. **ĞĞ°Ğ²Ñ‹ĞºĞ¸** â€” Ğ²ÑĞµ 18 Ğ½Ğ°Ğ²Ñ‹ĞºĞ¾Ğ² Ñ Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼Ğ¸, Ğ²Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ğµ (â—) Ğ¸ ÑĞºÑĞ¿ĞµÑ€Ñ‚Ğ¸Ğ·Ğ° (â—†), ÑĞ¿Ğ°ÑĞ±Ñ€Ğ¾ÑĞºĞ¸
6. **ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸** â€” Ñ€Ğ°ÑĞ¾Ğ²Ñ‹Ğµ Ñ‡ĞµÑ€Ñ‚Ñ‹, ĞºĞ»Ğ°ÑÑĞ¾Ğ²Ñ‹Ğµ Ñ„Ğ¸Ñ‡Ğ¸, Ğ¿Ñ€ĞµĞ´Ñ‹ÑÑ‚Ğ¾Ñ€Ğ¸Ñ, Ñ€ĞµÑÑƒÑ€ÑÑ‹ ĞºĞ»Ğ°ÑÑĞ° (ĞšĞ¸, Ğ¯Ñ€Ğ¾ÑÑ‚ÑŒ, etc.) Ñ Ğ¾Ñ‚Ğ¼ĞµÑ‚ĞºĞ°Ğ¼Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
7. **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ** â€” Ğ¿Ñ€ĞµĞ´Ñ‹ÑÑ‚Ğ¾Ñ€Ğ¸Ñ, Ñ‡ĞµÑ€Ñ‚Ñ‹, Ğ¸Ğ´ĞµĞ°Ğ»Ñ‹, Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚Ğ¸, ÑĞ»Ğ°Ğ±Ğ¾ÑÑ‚Ğ¸, Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸

**ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ UX Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ğ»Ğ¸ÑÑ‚Ğ°:**
- HP Ğ±Ğ°Ñ€ â€” ÑĞ°Ğ¼Ñ‹Ğ¹ ĞºÑ€ÑƒĞ¿Ğ½Ñ‹Ğ¹ Ğ¸ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ½Ñ‹Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚, ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ +/- Ñ€ÑĞ´Ğ¾Ğ¼ (ĞœĞ°ÑÑ‚ĞµÑ€ ÑĞºĞ°Ğ·Ğ°Ğ» "Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑˆÑŒ 8 ÑƒÑ€Ğ¾Ğ½Ğ°" â†’ Ñ‚Ğ°Ğ¿-Ñ‚Ğ°Ğ¿ Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾)
- ĞœĞ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹ ĞºÑ€ÑƒĞ¿Ğ½ĞµĞµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº (Ğ¸Ğ³Ñ€Ğ¾ĞºÑƒ Ñ‡Ğ°Ñ‰Ğµ Ğ½ÑƒĞ¶ĞµĞ½ +3, Ñ‡ĞµĞ¼ 16)
- Ğ—Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ: Ñ‚Ğ°Ğ¿ Ğ¿Ğ¾ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ â†’ Ğ²ÑĞ¿Ğ»Ñ‹Ğ²Ğ°ÑÑ‰ĞµĞµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ (Ğ½Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ½Ğ° Ğ´Ñ€ÑƒĞ³ÑƒÑ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ)
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ²ÑĞµĞ³Ğ¾: Ğ±Ğ¾Ğ½ÑƒÑ Ğ°Ñ‚Ğ°ĞºĞ¸ = Ğ±Ğ¾Ğ½ÑƒÑ Ğ¼Ğ°ÑÑ‚ĞµÑ€ÑÑ‚Ğ²Ğ° + Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸
- Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹ Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ¿Ğ¾ Ñ‚Ğ°Ğ¿Ñƒ: "Ğ‘Ğ¾Ğ½ÑƒÑ Ğ°Ñ‚Ğ°ĞºĞ¸: +7 = +3 (Ğ±Ğ¾Ğ½ÑƒÑ Ğ¼Ğ°ÑÑ‚ĞµÑ€ÑÑ‚Ğ²Ğ°) + 4 (Ğ¡Ğ˜Ğ›)"

#### ĞšĞ»Ğ°Ğ´Ğ±Ğ¸Ñ‰Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ (Character Graveyard) ğŸ’€

ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¿Ğ¾Ğ³Ğ¸Ğ±ÑˆĞ¸Ğ¹ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ½Ğ°Ğ²ÑĞµĞ³Ğ´Ğ° ÑĞ¾ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¾Ğ¹:

```
ğŸ“± ĞšĞ»Ğ°Ğ´Ğ±Ğ¸Ñ‰Ğµ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’€ Ğ“Ğ¸Ğ¼Ğ»Ğ¸ ĞšĞ°Ğ¼ĞµĞ½Ğ½Ğ¾Ğ»Ğ¾Ğ±Ñ‹Ğ¹          â”‚
â”‚  Ğ”Ğ²Ğ°Ñ€Ñ„ Â· Ğ’Ğ°Ñ€Ğ²Ğ°Ñ€ Â· Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 2    â”‚
â”‚                                 â”‚
â”‚  ĞŸÑ€Ğ¾Ğ¶Ğ¸Ğ»: 4 ÑĞµÑÑĞ¸Ğ¸               â”‚
â”‚  Ğ£Ğ±Ğ¸Ñ‚: Ğ“Ğ¾Ğ±Ğ»Ğ¸Ğ½-Ğ²Ğ¾Ğ¶Ğ°Ğº            â”‚
â”‚  Ğ¡Ğ¼ĞµÑ€Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑƒĞ´Ğ°Ñ€: 12 ÑƒÑ€Ğ¾Ğ½Ğ°     â”‚
â”‚  ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ ÑĞ»Ğ¾Ğ²Ğ°: â€”             â”‚
â”‚  Ğ¡ĞµÑÑĞ¸Ñ #4 Â· 15.02.2026        â”‚
â”‚                                 â”‚
â”‚  ğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°:                 â”‚
â”‚  ĞœĞ¾Ğ½ÑÑ‚Ñ€Ğ¾Ğ² ÑƒĞ±Ğ¸Ñ‚Ğ¾: 7              â”‚
â”‚  Ğ£Ñ€Ğ¾Ğ½Ğ° Ğ½Ğ°Ğ½ĞµÑĞµĞ½Ğ¾: 156            â”‚
â”‚  ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ…: 3                 â”‚
â”‚  Ğ•ÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… 1: 2 ğŸ˜±           â”‚
â”‚  Ğ—ĞµĞ»Ğ¸Ğ¹ Ğ²Ñ‹Ğ¿Ğ¸Ñ‚Ğ¾: 4                â”‚
â”‚  Ğ›Ğ¾Ğ²ÑƒÑˆĞµĞº Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾: 1        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ ÑĞ¼ĞµÑ€Ñ‚Ğ¸ (Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Character):**
```php
// Character model â€” Ğ¿Ğ¾Ğ»Ñ ÑĞ¼ĞµÑ€Ñ‚Ğ¸
'is_alive' => true,                      // false Ğ¿Ğ¾ÑĞ»Ğµ Ğ³Ğ¸Ğ±ĞµĞ»Ğ¸
'death_info' => null,                    // JSONB, Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ³Ğ¸Ğ±ĞµĞ»Ğ¸
// {
//   "killed_by": "Ğ“Ğ¾Ğ±Ğ»Ğ¸Ğ½-Ğ²Ğ¾Ğ¶Ğ°Ğº",
//   "killing_blow": "12 ÑƒÑ€Ğ¾Ğ½Ğ° Ñ€ÑƒĞ±ÑÑ‰ĞµĞ³Ğ¾",
//   "cause": "combat",                   // combat/trap/fall/spell/other
//   "session_number": 4,
//   "death_date": "2026-02-15",
//   "last_words": "Ğ—Ğ° ĞœĞ¾Ñ€Ğ¸Ñ!",           // Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, DM Ğ¸Ğ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ²Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚
//   "revived": false                     // ĞµÑĞ»Ğ¸ Ğ²Ğ¾ÑĞºÑ€ĞµÑĞ¸Ğ»Ğ¸
// }
'stats' => '{}',                         // JSONB â€” Ğ½Ğ°ĞºĞ¾Ğ¿Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
// {
//   "sessions_played": 4,
//   "monsters_killed": 7,
//   "damage_dealt": 156,
//   "damage_taken": 203,
//   "critical_hits": 3,
//   "natural_ones": 2,
//   "potions_used": 4,
//   "gold_earned": 450,
//   "gold_spent": 120
// }
```

**DM Ğ¿Ğ¾Ğ¼ĞµÑ‡Ğ°ĞµÑ‚ ÑĞ¼ĞµÑ€Ñ‚ÑŒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°** Ğ² ÑĞ²Ğ¾Ñ‘Ğ¼ Ñ‚Ñ€ĞµĞºĞµÑ€Ğµ: Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° â†’ "ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ Ğ¿Ğ¾Ğ³Ğ¸Ğ±" â†’ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñƒ Ğ¸ ĞºÑ‚Ğ¾ Ğ½Ğ°Ğ½Ñ‘Ñ ÑƒĞ´Ğ°Ñ€. Ğ£ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµÑ‰Ğ°ĞµÑ‚ÑÑ Ğ² "ĞšĞ»Ğ°Ğ´Ğ±Ğ¸Ñ‰Ğµ" Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ÑÑ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾.

### Campaign Settings â€” Ñ‡Ñ‚Ğ¾ DM Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚

```php
// Campaign model â€” settings JSONB
'settings' => [
    // Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ñ€Ğ°ÑÑ‹ (null = Ğ²ÑĞµ Ğ¸Ğ· Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ñ‘Ğ½Ğ½Ñ‹Ñ… ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ¾Ğ²)
    'allowed_races' => null,             // Ğ¸Ğ»Ğ¸ ['human', 'elf', 'dwarf']
    'allowed_classes' => null,           // Ğ¸Ğ»Ğ¸ ['fighter', 'rogue', 'wizard']

    // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
    'starting_level' => 1,
    'ability_method' => 'point_buy',    // 'point_buy' | 'standard_array' | 'roll'
    'starting_gold' => null,            // null = ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¾Ğµ Ğ´Ğ»Ñ ĞºĞ»Ğ°ÑÑĞ°

    // ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°
    'hp_method' => 'average',           // 'average' | 'roll'
    'encumbrance' => false,
    'multiclassing' => true,
    'feats' => true,
    'critical_rules' => 'standard',     // 'standard' | 'max_dice' | 'brutal_critical'

    // ĞĞµĞ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ
    'description' => 'ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ğ¼...',
    'tone' => 'Ğ“ĞµÑ€Ğ¾Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ñ„ÑĞ½Ñ‚ĞµĞ·Ğ¸',
]
// ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ (belongsTo Setting)
// Ğ¡ĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³ Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» (belongsTo RuleSystem)
// Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ°Ğ¼Ğ¸ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ° (setting_spells, setting_races, etc.)
```

### Real-time Communication (WebSocket)

WebSocket Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾Ğ¹ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ²ÑĞµĞ¼Ğ¸ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸. ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ Ğ²ĞµĞ± â€” Ğ²ÑĞµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ñ‹ Ğº Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ ÑĞµÑ€Ğ²ĞµÑ€Ñƒ Ñ‡ĞµÑ€ĞµĞ· Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚.

**Ğ¢Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸:**
- DM Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ Â«Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑÑ†ĞµĞ½ÑƒÂ» â†’ Ğ½Ğ° Ğ¢Ğ’ Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾ Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ Ñ„Ğ¾Ğ½ Ğ¸ Ğ¼ÑƒĞ·Ñ‹ĞºĞ°
- DM Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ±Ğ¸Ñ‚Ğ²Ñƒ â†’ Ñƒ Ğ²ÑĞµÑ… Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°Ñ… Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ñ‹
- Ğ˜Ğ³Ñ€Ğ¾Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑƒÑ€Ğ¾Ğ½ â†’ DM Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğµ HP Ğ² Ñ‚Ñ€ĞµĞºĞµÑ€Ğµ
- DM Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ÑĞºÑ€Ğ°Ğ½ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° â†’ Ğ½Ğ° Ğ¢Ğ’ Ğ¿Ğ¾ÑĞ²Ğ»ÑÑÑ‚ÑÑ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ² ÑÑ‚Ğ¸Ğ»Ğµ Pillars of Eternity

```
DM (dashboard)  â”€â”€broadcastsâ”€â”€â†’  Server (Redis)  â”€â”€â†’  ğŸ“º Ğ¢Ğ’ (Display)
                                                  â”€â”€â†’  ğŸ“±ğŸ“±ğŸ“± Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñ‹ (Player)
```

**WebSocket Channels:**
- `campaign.{id}` â€” Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ ĞºĞ°Ğ½Ğ°Ğ» ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ (presence channel â€” ĞºÑ‚Ğ¾ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½ Ğ·Ğ° ÑÑ‚Ğ¾Ğ»Ğ¾Ğ¼)
- `campaign.{id}.battle` â€” Ñ‚Ñ€ĞµĞºĞµÑ€ Ğ±Ğ¸Ñ‚Ğ²Ñ‹ (Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ğ°, HP, Ñ…Ğ¾Ğ´Ñ‹)
- `campaign.{id}.display` â€” ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¢Ğ’/Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ DM â†’ Display)
- `private-character.{id}` â€” Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¹ ĞºĞ°Ğ½Ğ°Ğ» (DM â†” ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº, Ğ´Ğ»Ñ ÑĞµĞºÑ€ĞµÑ‚Ğ½Ñ‹Ñ… Ğ±Ñ€Ğ¾ÑĞºĞ¾Ğ²/Ğ·Ğ°Ğ¿Ğ¸ÑĞ¾Ğº)

**Key Events:**
- `SceneChanged` â€” DM ÑĞ¼ĞµĞ½Ğ¸Ğ» ÑÑ†ĞµĞ½Ñƒ Ğ½Ğ° Ğ¢Ğ’ (Ñ„Ğ¾Ğ½, Ğ¼ÑƒĞ·Ñ‹ĞºĞ°, Ğ¾ÑĞ²ĞµÑ‰ĞµĞ½Ğ¸Ğµ)
- `MusicChanged` â€” DM ÑĞ¼ĞµĞ½Ğ¸Ğ» Ğ¼ÑƒĞ·Ñ‹ĞºÑƒ
- `BattleUpdated` â€” Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ñ€ĞµĞºĞµÑ€Ğ° Ğ±Ğ¸Ñ‚Ğ²Ñ‹ (Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ğ°, HP, ÑÑ‚Ğ°Ñ‚ÑƒÑÑ‹, Ñ‡ĞµĞ¹ Ñ…Ğ¾Ğ´)
- `DiceRolled` â€” Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ±Ñ€Ğ¾ÑĞºĞ° ĞºÑƒĞ±Ğ¸ĞºĞ° (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ â€” Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ĞºÑƒĞ±Ğ¸ĞºĞ¸ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ½ĞµĞµ)
- `ChoicePresented` â€” DM Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ğ» ÑĞºÑ€Ğ°Ğ½ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ½Ğ° Ğ¢Ğ’ (ÑÑ‚Ğ¸Ğ»ÑŒ Pillars of Eternity)
- `ChoiceSelected` â€” Ğ²Ñ‹Ğ±Ğ¾Ñ€ ÑĞ´ĞµĞ»Ğ°Ğ½
- `CharacterUpdated` â€” HP/ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ÑÑŒ (ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ DM â†” Player)
- `DisplayText` â€” DM Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ‚ĞµĞºÑÑ‚/Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ğ¢Ğ’ (Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ñ‚Ğ¾Ğ³Ğ¾ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ·Ğ°Ñ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚)

### API Structure

All API routes are versioned under `/api/v1/`:

```
/auth/*                          â€” Login, register, logout, me
/player/*                        â€” Player endpoints (role: player)
â”‚   â”œâ”€ campaigns                 â€” ĞœĞ¾Ğ¸ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‚Ğµ, ĞºÑƒĞ´Ğ° Ğ¿Ñ€Ğ¸Ğ³Ğ»Ğ°ÑˆÑ‘Ğ½)
â”‚   â”œâ”€ characters                â€” ĞœĞ¾Ğ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ¸ Ğ² ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚   â”œâ”€ character/{id}            â€” Ğ›Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° (CRUD)
â”‚   â”œâ”€ spells                    â€” ĞŸĞ¾Ğ¸ÑĞº Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğ¹ (read-only)
â”‚   â””â”€ items                     â€” ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ² (read-only)
/backoffice/*                    â€” DM/Owner endpoints (role: owner + dm, middleware: backoffice.access)
â”‚   â”œâ”€ rule-systems              â€” Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» (CRUD: Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹, Ğ±Ğ¾Ñ‘Ğ²ĞºĞ°)
â”‚   â”œâ”€ settings                  â€” Ğ¡ĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ¸ / Ğ¼Ğ¸Ñ€Ñ‹ (CRUD, Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»)
â”‚   â”œâ”€ settings/{id}/spells      â€” ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğ¹ Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ (+ overrides)
â”‚   â”œâ”€ settings/{id}/monsters    â€” ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ¾Ğ² Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ (+ overrides)
â”‚   â”œâ”€ campaigns                 â€” CRUD ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹ (Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ)
â”‚   â”œâ”€ campaigns/{id}/acts       â€” ĞĞºÑ‚Ñ‹ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ (CRUD, Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº)
â”‚   â”œâ”€ campaigns/{id}/acts/{aid}/sessions â€” Ğ¡ĞµÑÑĞ¸Ğ¸ Ğ°ĞºÑ‚Ğ° (CRUD, Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº)
â”‚   â”œâ”€ campaigns/{id}/acts/{aid}/sessions/{sid}/scenes â€” Ğ”ĞµÑ€ĞµĞ²Ğ¾ ÑÑ†ĞµĞ½ ÑĞµÑÑĞ¸Ğ¸ (CRUD, Ğ´ĞµÑ€ĞµĞ²Ğ¾, ÑĞ²ÑĞ·Ğ¸)
â”‚   â”œâ”€ campaigns/{id}/encounters â€” Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ¸ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚   â”œâ”€ campaigns/{id}/scenes     â€” Ğ¡Ñ†ĞµĞ½Ñ‹ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚   â”œâ”€ campaigns/{id}/notes      â€” Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚   â”œâ”€ campaigns/{id}/npcs       â€” NPC ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚   â”œâ”€ campaigns/{id}/random-tables â€” Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ÑÑ‚ĞµĞ¹
â”‚   â”œâ”€ campaigns/{id}/players    â€” Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ (Ğ¿Ñ€Ğ¸Ğ³Ğ»Ğ°ÑˆĞµĞ½Ğ¸Ğµ/ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ)
â”‚   â”œâ”€ battles                   â€” Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ±Ğ¸Ñ‚Ğ²Ğ¾Ğ¹
â”‚   â”œâ”€ monsters                  â€” Ğ‘ĞµÑÑ‚Ğ¸Ğ°Ñ€Ğ¸Ğ¹ (Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ±Ğ°Ğ·Ğ°, Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼)
â”‚   â”œâ”€ spells                    â€” Ğ—Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ (Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ±Ğ°Ğ·Ğ°, Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼)
â”‚   â”œâ”€ items                     â€” ĞŸÑ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹ (Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ±Ğ°Ğ·Ğ°, Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼)
â”‚   â”œâ”€ soundtracks               â€” Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¼ÑƒĞ·Ñ‹ĞºĞ¾Ğ¹
â”‚   â”œâ”€ users                     â€” Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸ (owner only)
â”‚   â””â”€ media/upload              â€” Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
/display/*                       â€” Display client endpoints
â”‚   â”œâ”€ current-scene             â€” Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ ÑÑ†ĞµĞ½Ğ° (polling fallback)
â”‚   â””â”€ join/{campaign}           â€” ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
/public/*                        â€” ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ (landing page data, ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾)
```

**Middleware:**
- `auth:api` â€” Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Passport
- `backoffice.access` â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ñ€Ğ¾Ğ»ÑŒ owner Ğ¸Ğ»Ğ¸ dm (Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ¸Ğ· XStream)
- `campaign.member` â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ñ‡Ñ‚Ğ¾ player/dm Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸

### Queue System

| Queue | Purpose |
|-------|---------|
| `default` | Notifications, emails |
| `media` | Media conversions (scene images, portraits) |

## PostgreSQL JSONB â€” ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

PostgreSQL 17 Ğ¸Ğ¼ĞµĞµÑ‚ Ğ¼Ğ¾Ñ‰Ğ½ÑƒÑ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºÑƒ JSONB. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ĞµÑ‘ Ğ°Ğ³Ñ€ĞµÑÑĞ¸Ğ²Ğ½Ğ¾ Ğ´Ğ»Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… Ğ²Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ñ… ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€ D&D, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ¿Ğ»Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ´ĞµÑÑÑ‚ĞºĞ¸ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†.

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿: ĞºĞ¾Ğ³Ğ´Ğ° JSONB, ĞºĞ¾Ğ³Ğ´Ğ° Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°

| Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ JSONB | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½ÑƒÑ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ |
|-----------------|---------------------------|
| Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ°Ñ‚ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ğ½Ğµ ÑˆĞ°Ñ€ÑÑ‚ÑÑ | Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ÑĞ¼Ğ¸ |
| ĞĞµÑ‚ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ² JOIN Ğ¿Ğ¾ ÑÑ‚Ğ¸Ğ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼ | ĞÑƒĞ¶Ğ½Ñ‹ JOIN, Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸, Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ CRUD |
| Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ³Ğ¸Ğ±ĞºĞ°Ñ / Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ°Ñ‚ÑŒÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ·Ğ°Ğ¿Ğ¸ÑÑĞ¼Ğ¸ | Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ÑÑ‚Ñ€Ğ¾Ğ³Ğ°Ñ Ğ¸ Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ğ°Ñ |
| Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‡Ğ¸Ñ‚Ğ°ÑÑ‚ÑÑ Ñ†ĞµĞ»Ğ¸ĞºĞ¾Ğ¼ Ğ²Ğ¼ĞµÑÑ‚Ğµ Ñ Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ĞµĞ¼ | Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ÑÑ‚ÑÑ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾, Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ÑƒÑÑ‚ÑÑ |
| Homebrew / Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ | Ğ¡Ğ¿Ñ€Ğ°Ğ²Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ñ€Ğ°ÑÑ‹, ĞºĞ»Ğ°ÑÑÑ‹, Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ) + ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ¸ |

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ JSONB Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»ÑÑ…

**Character â€” stats, saves, skills ĞºĞ°Ğº JSONB:**
```sql
CREATE TABLE characters (
    id BIGSERIAL PRIMARY KEY,
    name JSONB NOT NULL,                    -- {"ru": "Ğ¢Ğ¾Ñ€Ğ¸Ğ½ Ğ”ÑƒĞ±Ğ¾Ñ‰Ğ¸Ñ‚"}
    backstory JSONB,                        -- {"ru": "Ğ‘Ñ‹Ğ²ÑˆĞ¸Ğ¹ ĞºÑƒĞ·Ğ½ĞµÑ† Ğ¸Ğ·..."}

    -- Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ ĞºĞ°Ğº JSONB â€” ÑƒĞ´Ğ¾Ğ±Ğ½Ğ¾ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ/Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ†ĞµĞ»Ğ¸ĞºĞ¾Ğ¼
    abilities JSONB NOT NULL DEFAULT '{
        "strength": 10, "dexterity": 10, "constitution": 10,
        "intelligence": 10, "wisdom": 10, "charisma": 10
    }',

    -- Ğ’Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ñ Ğ½Ğ°Ğ²Ñ‹ĞºĞ°Ğ¼Ğ¸ (proficiency + expertise)
    skill_proficiencies JSONB DEFAULT '[]',     -- ["athletics", "perception"]
    skill_expertise JSONB DEFAULT '[]',         -- ["stealth"]

    -- Ğ¡Ğ¿Ğ°ÑĞ±Ñ€Ğ¾ÑĞºĞ¸
    saving_throw_proficiencies JSONB DEFAULT '[]',  -- ["strength", "constitution"]

    -- Ğ¡Ğ¿Ğ°ÑĞ±Ñ€Ğ¾ÑĞºĞ¸ Ğ¾Ñ‚ ÑĞ¼ĞµÑ€Ñ‚Ğ¸
    death_saves JSONB DEFAULT '{"successes": 0, "failures": 0}',

    -- Ğ’Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ñ (Ğ¾Ñ€ÑƒĞ¶Ğ¸Ğµ, Ğ´Ğ¾ÑĞ¿ĞµÑ…Ğ¸, Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹, ÑĞ·Ñ‹ĞºĞ¸)
    proficiencies JSONB DEFAULT '{
        "armor": [], "weapons": [], "tools": [], "languages": []
    }',

    -- ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ñ‡ĞµÑ€Ñ‚Ñ‹ (Ñ€Ğ°ÑĞ¾Ğ²Ñ‹Ğµ + ĞºĞ»Ğ°ÑÑĞ¾Ğ²Ñ‹Ğµ + Ñ„Ğ¸Ñ‚Ñ‹)
    features JSONB DEFAULT '[]',
    -- [{"source": "race", "name": "Ğ¢Ñ‘Ğ¼Ğ½Ğ¾Ğµ Ğ·Ñ€ĞµĞ½Ğ¸Ğµ", "description": "Ğ’Ğ¸Ğ´Ğ¸Ñ‚Ğµ Ğ² Ñ‚ĞµĞ¼Ğ½Ğ¾Ñ‚Ğµ Ğ½Ğ° 18 Ğ¼"}]

    -- Ğ ĞµÑÑƒÑ€ÑÑ‹ ĞºĞ»Ğ°ÑÑĞ° (Ki, Rage, Sorcery Points, etc.)
    class_resources JSONB DEFAULT '[]',
    -- [{"name": "ĞšĞ¸", "current": 3, "max": 5, "recharge": "short_rest"}]

    -- Ğ’Ğ°Ğ»ÑÑ‚Ğ°
    currency JSONB DEFAULT '{"cp": 0, "sp": 0, "ep": 0, "gp": 0, "pp": 0}',

    level INTEGER NOT NULL DEFAULT 1,
    experience_points INTEGER DEFAULT 0,
    current_hp INTEGER NOT NULL,
    max_hp INTEGER NOT NULL,
    temp_hp INTEGER DEFAULT 0,
    armor_class INTEGER NOT NULL DEFAULT 10,
    speed JSONB DEFAULT '{"walk": 9}',          -- Ğ’ Ğ¼ĞµÑ‚Ñ€Ğ°Ñ…! (walk, fly, swim, climb, burrow)
    inspiration BOOLEAN DEFAULT FALSE,
    hit_dice_remaining JSONB DEFAULT '{}',       -- {"d10": 3, "d8": 2} Ğ´Ğ»Ñ Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸ĞºĞ»Ğ°ÑÑĞ°

    -- Ğ–Ğ¸Ğ² Ğ¸Ğ»Ğ¸ Ğ¼Ñ‘Ñ€Ñ‚Ğ²
    is_alive BOOLEAN DEFAULT TRUE,

    -- Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ÑĞ¼ĞµÑ€Ñ‚Ğ¸ (Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ³Ğ¸Ğ±ĞµĞ»Ğ¸)
    death_info JSONB,
    -- {
    --   "killed_by": "Ğ“Ğ¾Ğ±Ğ»Ğ¸Ğ½-Ğ²Ğ¾Ğ¶Ğ°Ğº",
    --   "killing_blow": "12 ÑƒÑ€Ğ¾Ğ½Ğ° Ñ€ÑƒĞ±ÑÑ‰ĞµĞ³Ğ¾",
    --   "cause": "combat",               -- combat/trap/fall/spell/other
    --   "session_number": 4,
    --   "death_date": "2026-02-15",
    --   "last_words": "Ğ—Ğ° ĞœĞ¾Ñ€Ğ¸Ñ!",
    --   "revived": false
    -- }

    -- ĞĞ°ĞºĞ¾Ğ¿Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° (Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ¿Ğ¾ Ñ…Ğ¾Ğ´Ñƒ Ğ¸Ğ³Ñ€Ñ‹)
    stats JSONB DEFAULT '{}',
    -- {
    --   "sessions_played": 4,
    --   "monsters_killed": 7,
    --   "damage_dealt": 156,
    --   "damage_taken": 203,
    --   "critical_hits": 3,
    --   "natural_ones": 2,
    --   "potions_used": 4,
    --   "gold_earned": 450,
    --   "gold_spent": 120
    -- }

    race_id BIGINT REFERENCES races(id),
    campaign_id BIGINT REFERENCES campaigns(id),
    user_id BIGINT REFERENCES users(id),
    created_at TIMESTAMP, updated_at TIMESTAMP
);

-- GIN Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾ JSONB
CREATE INDEX idx_characters_abilities ON characters USING GIN (abilities);
CREATE INDEX idx_characters_skill_prof ON characters USING GIN (skill_proficiencies);
```

**CharacterClass â€” features per level ĞºĞ°Ğº JSONB:**
```sql
CREATE TABLE character_classes (
    id BIGSERIAL PRIMARY KEY,
    name JSONB NOT NULL,                    -- {"ru": "Ğ’Ğ¾Ğ¸Ğ½"}
    description JSONB,
    slug VARCHAR(50) UNIQUE NOT NULL,       -- "fighter"
    hit_die VARCHAR(5) NOT NULL,            -- "d10"
    primary_abilities JSONB NOT NULL,       -- ["strength", "constitution"]
    saving_throws JSONB NOT NULL,           -- ["strength", "constitution"]

    -- Ğ’Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ñ
    armor_proficiencies JSONB DEFAULT '[]', -- ["Ğ»Ñ‘Ğ³ĞºĞ¸Ğµ", "ÑÑ€ĞµĞ´Ğ½Ğ¸Ğµ", "Ñ‚ÑĞ¶Ñ‘Ğ»Ñ‹Ğµ", "Ñ‰Ğ¸Ñ‚Ñ‹"]
    weapon_proficiencies JSONB DEFAULT '[]',-- ["Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğµ", "Ğ²Ğ¾Ğ¸Ğ½ÑĞºĞ¾Ğµ"]
    tool_proficiencies JSONB DEFAULT '[]',

    -- Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ğ¾Ğµ ÑĞ½Ğ°Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ (Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹)
    starting_equipment JSONB DEFAULT '[]',
    -- [
    --   {"choice": 1, "options": [
    --     [{"item": "chain-mail"}, {"item": "shield"}],
    --     [{"item": "leather-armor"}, {"item": "longbow"}, {"item": "arrows", "qty": 20}]
    --   ]}
    -- ]

    -- Ğ¤Ğ¸Ñ‡Ğ¸ Ğ¿Ğ¾ ÑƒÑ€Ğ¾Ğ²Ğ½ÑĞ¼ â€” ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ! ĞÑ‡ĞµĞ½ÑŒ Ğ³Ğ¸Ğ±ĞºĞ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
    level_features JSONB NOT NULL DEFAULT '{}',
    -- {
    --   "1": [
    --     {"name": "Ğ‘Ğ¾ĞµĞ²Ğ¾Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ", "description": "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑ‚Ğ¸Ğ»ÑŒ Ğ±Ğ¾Ñ...", "type": "choice",
    --      "options": ["Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ°", "Ğ”ÑƒÑĞ»ÑŒ", "Ğ‘Ğ¾Ğ¹ Ğ´Ğ²ÑƒĞ¼Ñ Ğ¾Ñ€ÑƒĞ¶Ğ¸ÑĞ¼Ğ¸", "Ğ¡Ñ‚Ñ€ĞµĞ»ÑŒĞ±Ğ°"]},
    --     {"name": "Ğ’Ñ‚Ğ¾Ñ€Ğ¾Ğµ Ğ´Ñ‹Ñ…Ğ°Ğ½Ğ¸Ğµ", "description": "Ğ‘Ğ¾Ğ½ÑƒÑĞ½Ñ‹Ğ¼ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸ĞµĞ¼ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ 1d10 + ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ ĞĞ—",
    --      "type": "feature", "recharge": "short_rest"}
    --   ],
    --   "2": [
    --     {"name": "Ğ’ÑĞ¿Ğ»ĞµÑĞº Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹", "description": "ĞĞ´Ğ½Ğ¾ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ",
    --      "type": "feature", "recharge": "short_rest", "uses": 1}
    --   ],
    --   "5": [
    --     {"name": "Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ°Ñ‚Ğ°ĞºĞ°", "description": "Ğ”Ğ²Ğµ Ğ°Ñ‚Ğ°ĞºĞ¸ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ¾Ğ´Ğ½Ğ¾Ğ¹",
    --      "type": "feature"}
    --   ]
    -- }

    -- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ (HP, proficiency bonus, slots, etc.)
    progression JSONB NOT NULL DEFAULT '{}',
    -- {
    --   "1":  {"proficiency_bonus": 2},
    --   "5":  {"proficiency_bonus": 3, "extra_attack": 1},
    --   "9":  {"proficiency_bonus": 4, "indomitable": 1}
    -- }

    -- Ğ”Ğ»Ñ Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ñ‚ĞµĞ»ĞµĞ¹: ÑĞ»Ğ¾Ñ‚Ñ‹ Ğ¿Ğ¾ ÑƒÑ€Ğ¾Ğ²Ğ½ÑĞ¼
    spell_slots JSONB,
    -- {
    --   "1": {"cantrips": 3, "1st": 2},
    --   "2": {"cantrips": 3, "1st": 3},
    --   "3": {"cantrips": 3, "1st": 4, "2nd": 2}
    -- }

    -- ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼ â€” Ñ‡ĞµÑ€ĞµĞ· pivot Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ setting_* (ÑĞ¼. Content Architecture)
    created_at TIMESTAMP, updated_at TIMESTAMP
);
```

**Monster â€” Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ, Ğ»ĞµĞ³ĞµĞ½Ğ´Ğ°Ñ€Ğ½Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ ĞºĞ°Ğº JSONB:**
```sql
CREATE TABLE monsters (
    id BIGSERIAL PRIMARY KEY,
    name JSONB NOT NULL,                    -- {"ru": "ĞšÑ€Ğ°ÑĞ½Ñ‹Ğ¹ Ğ´Ñ€Ğ°ĞºĞ¾Ğ½ (Ğ²Ğ·Ñ€Ğ¾ÑĞ»Ñ‹Ğ¹)"}
    description JSONB,
    slug VARCHAR(100) UNIQUE NOT NULL,

    -- Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹
    size VARCHAR(20) NOT NULL,              -- tiny/small/medium/large/huge/gargantuan
    type VARCHAR(50) NOT NULL,              -- beast/undead/fiend/dragon/etc.
    alignment VARCHAR(50),
    armor_class INTEGER NOT NULL,
    armor_type VARCHAR(100),                -- "Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑĞ¿ĞµÑ…"
    hit_points INTEGER NOT NULL,
    hit_dice VARCHAR(20),                   -- "18d12+72"
    challenge_rating DECIMAL(5,2),          -- 0.25, 0.5, 1, 2, ... 30
    experience_points INTEGER,

    -- Ğ’ÑÑ‘ Ğ² Ğ¼ĞµÑ‚Ñ€Ğ°Ñ…!
    speed JSONB DEFAULT '{"walk": 9}',
    -- {"walk": 12, "fly": 24, "swim": 12, "burrow": 9}

    -- Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸
    abilities JSONB NOT NULL,
    -- {"strength": 27, "dexterity": 10, "constitution": 25,
    --  "intelligence": 16, "wisdom": 13, "charisma": 21}

    -- Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ â€” Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ JSONB
    saving_throws JSONB DEFAULT '{}',       -- {"dexterity": 6, "constitution": 13, "wisdom": 7, "charisma": 11}
    skills JSONB DEFAULT '{}',              -- {"perception": 13, "stealth": 6}
    senses JSONB DEFAULT '{}',              -- {"darkvision": "36 Ğ¼", "passive_perception": 23}
    languages JSONB DEFAULT '[]',           -- ["ĞĞ±Ñ‰Ğ¸Ğ¹", "Ğ”Ñ€Ğ°ĞºĞ¾Ğ½Ğ¸Ğ¹"]

    -- Ğ ĞµĞ·Ğ¸ÑÑ‚Ñ‹ Ğ¸ Ğ¸Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚Ñ‹
    damage_resistances JSONB DEFAULT '[]',
    damage_immunities JSONB DEFAULT '[]',   -- ["Ğ¾Ğ³Ğ¾Ğ½ÑŒ"]
    condition_immunities JSONB DEFAULT '[]',-- ["frightened", "charmed"]
    damage_vulnerabilities JSONB DEFAULT '[]',

    -- ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ (traits)
    traits JSONB DEFAULT '[]',
    -- [{"name": "Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°Ñ€Ğ½Ğ¾Ğµ ÑĞ¾Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ğ²Ğ»ĞµĞ½Ğ¸Ğµ (3/Ğ´ĞµĞ½ÑŒ)", "description": "Ğ•ÑĞ»Ğ¸ Ğ´Ñ€Ğ°ĞºĞ¾Ğ½ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ ÑĞ¿Ğ°ÑĞ±Ñ€Ğ¾ÑĞ¾Ğº..."}]

    -- Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ â€” ÑĞ°Ğ¼Ğ°Ñ Ğ²Ğ°Ğ¶Ğ½Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ, ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ³Ğ¸Ğ±ĞºĞ°Ñ
    actions JSONB DEFAULT '[]',
    -- [
    --   {"name": "ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ñ‚Ğ°ĞºĞ°", "description": "Ğ”Ñ€Ğ°ĞºĞ¾Ğ½ ÑĞ¾Ğ²ĞµÑ€ÑˆĞ°ĞµÑ‚ Ñ‚Ñ€Ğ¸ Ğ°Ñ‚Ğ°ĞºĞ¸: Ğ¾Ğ´Ğ½Ñƒ ÑƒĞºÑƒÑĞ¾Ğ¼ Ğ¸ Ğ´Ğ²Ğµ ĞºĞ¾Ğ³Ñ‚ÑĞ¼Ğ¸"},
    --   {"name": "Ğ£ĞºÑƒÑ", "type": "melee", "attack_bonus": 14,
    --    "reach": "3 Ğ¼", "damage": "2d10+8 ĞºĞ¾Ğ»ÑÑ‰Ğ¸Ğ¹ + 2d6 Ğ¾Ğ³Ğ¾Ğ½ÑŒ",
    --    "description": "Ğ ÑƒĞºĞ¾Ğ¿Ğ°ÑˆĞ½Ğ°Ñ Ğ°Ñ‚Ğ°ĞºĞ° Ğ¾Ñ€ÑƒĞ¶Ğ¸ĞµĞ¼: +14, Ğ´Ğ¾ÑÑĞ³Ğ°ĞµĞ¼Ğ¾ÑÑ‚ÑŒ 3 Ğ¼, Ğ¾Ğ´Ğ½Ğ° Ñ†ĞµĞ»ÑŒ"},
    --   {"name": "ĞĞ³Ğ½ĞµĞ½Ğ½Ğ¾Ğµ Ğ´Ñ‹Ñ…Ğ°Ğ½Ğ¸Ğµ", "type": "special", "recharge": "5-6",
    --    "save": {"ability": "dexterity", "dc": 21},
    --    "damage": "18d6 Ğ¾Ğ³Ğ¾Ğ½ÑŒ", "half_on_save": true,
    --    "area": "ĞºĞ¾Ğ½ÑƒÑ 18 Ğ¼",
    --    "description": "Ğ”Ñ€Ğ°ĞºĞ¾Ğ½ Ğ²Ñ‹Ğ´Ñ‹Ñ…Ğ°ĞµÑ‚ Ğ¾Ğ³Ğ¾Ğ½ÑŒ 18-Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²Ñ‹Ğ¼ ĞºĞ¾Ğ½ÑƒÑĞ¾Ğ¼..."}
    -- ]

    -- Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°Ñ€Ğ½Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ
    legendary_actions JSONB,
    -- {"per_round": 3, "actions": [
    --   {"name": "ĞĞ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ", "cost": 1, "description": "Ğ”Ñ€Ğ°ĞºĞ¾Ğ½ ÑĞ¾Ğ²ĞµÑ€ÑˆĞ°ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºÑƒ Ğ’Ğ½Ğ¸Ğ¼Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸"},
    --   {"name": "ĞÑ‚Ğ°ĞºĞ° Ñ…Ğ²Ğ¾ÑÑ‚Ğ¾Ğ¼", "cost": 1, "description": "Ğ”Ñ€Ğ°ĞºĞ¾Ğ½ ÑĞ¾Ğ²ĞµÑ€ÑˆĞ°ĞµÑ‚ Ğ°Ñ‚Ğ°ĞºÑƒ Ñ…Ğ²Ğ¾ÑÑ‚Ğ¾Ğ¼"},
    --   {"name": "ĞÑ‚Ğ°ĞºĞ° ĞºÑ€Ñ‹Ğ»ÑŒÑĞ¼Ğ¸", "cost": 2, "description": "Ğ”Ñ€Ğ°ĞºĞ¾Ğ½ Ğ±ÑŒÑ‘Ñ‚ ĞºÑ€Ñ‹Ğ»ÑŒÑĞ¼Ğ¸..."}
    -- ]}

    -- Ğ›Ğ¾Ğ³Ğ¾Ğ²Ğ¾ Ğ¸ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
    lair_actions JSONB,
    regional_effects JSONB,

    -- ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼ â€” Ñ‡ĞµÑ€ĞµĞ· pivot Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ setting_* (ÑĞ¼. Content Architecture)
    created_at TIMESTAMP, updated_at TIMESTAMP
);

-- GIN Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
CREATE INDEX idx_monsters_abilities ON monsters USING GIN (abilities);
CREATE INDEX idx_monsters_actions ON monsters USING GIN (actions);
```

**Spell â€” ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ğ¸ scaling ĞºĞ°Ğº JSONB:**
```sql
CREATE TABLE spells (
    id BIGSERIAL PRIMARY KEY,
    name JSONB NOT NULL,                    -- {"ru": "ĞĞ³Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ ÑˆĞ°Ñ€"}
    description JSONB NOT NULL,             -- {"ru": "Ğ¯Ñ€ĞºĞ¸Ğ¹ Ğ»ÑƒÑ‡ Ğ²Ñ‹Ğ»ĞµÑ‚Ğ°ĞµÑ‚..."}
    slug VARCHAR(100) UNIQUE NOT NULL,

    level SMALLINT NOT NULL,                -- 0 = Ğ·Ğ°Ğ³Ğ¾Ğ²Ğ¾Ñ€, 1-9
    school VARCHAR(20) NOT NULL,            -- evocation, necromancy, etc.
    casting_time VARCHAR(100) NOT NULL,     -- "1 Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ", "1 Ğ±Ğ¾Ğ½ÑƒÑĞ½Ğ¾Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ", "1 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ğ°"
    range VARCHAR(100) NOT NULL,            -- "45 Ğ¼", "ĞĞ° ÑĞµĞ±Ñ", "ĞšĞ°ÑĞ°Ğ½Ğ¸Ğµ", "ĞĞ° ÑĞµĞ±Ñ (ĞºĞ¾Ğ½ÑƒÑ 9 Ğ¼)"
    duration VARCHAR(100) NOT NULL,         -- "ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ°Ñ", "ĞšĞ¾Ğ½Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ñ†Ğ¸Ñ, Ğ´Ğ¾ 1 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñ‹", "8 Ñ‡Ğ°ÑĞ¾Ğ²"
    concentration BOOLEAN DEFAULT FALSE,
    ritual BOOLEAN DEFAULT FALSE,

    -- ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ĞºĞ°Ğº JSONB â€” Ğ³Ğ¸Ğ±ĞºĞ¾
    components JSONB NOT NULL,
    -- {"verbal": true, "somatic": true, "material": true,
    --  "material_description": "ĞºÑ€Ğ¾ÑˆĞµÑ‡Ğ½Ñ‹Ğ¹ ÑˆĞ°Ñ€Ğ¸Ğº Ğ¸Ğ· Ğ³ÑƒĞ°Ğ½Ğ¾ Ğ»ĞµÑ‚ÑƒÑ‡ĞµĞ¹ Ğ¼Ñ‹ÑˆĞ¸ Ğ¸ ÑĞµÑ€Ñ‹",
    --  "material_cost": null, "material_consumed": false}

    -- ĞšĞ°ĞºĞ¸Ğµ ĞºĞ»Ğ°ÑÑÑ‹ Ğ¸Ğ¼ĞµÑÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿
    classes JSONB DEFAULT '[]',             -- ["wizard", "sorcerer"]

    -- ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ğ²Ñ‹ÑĞ¾ĞºĞ¸Ñ… ÑƒÑ€Ğ¾Ğ²Ğ½ÑÑ…
    higher_levels JSONB,
    -- {"description": "Ğ•ÑĞ»Ğ¸ Ğ²Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚Ğµ ÑÑ‡ĞµĞ¹ĞºÑƒ 4 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ Ğ¸Ğ»Ğ¸ Ğ²Ñ‹ÑˆĞµ, ÑƒÑ€Ğ¾Ğ½ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ½Ğ° 1d6 Ğ·Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ²Ñ‹ÑˆĞµ 3",
    --  "scaling": {"per_level": "1d6", "base_level": 3}}

    -- Ğ”Ğ»Ñ Ğ·Ğ°Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ğ² â€” Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
    cantrip_scaling JSONB,
    -- {"5": "2d10", "11": "3d10", "17": "4d10"}

    -- Ğ­Ñ„Ñ„ĞµĞºÑ‚Ñ‹ (Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸)
    effects JSONB,
    -- {"damage": {"dice": "8d6", "type": "fire"},
    --  "save": {"ability": "dexterity", "on_success": "half"},
    --  "area": {"shape": "sphere", "radius": "6 Ğ¼"}}

    -- ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼ â€” Ñ‡ĞµÑ€ĞµĞ· pivot Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ setting_* (ÑĞ¼. Content Architecture)
    created_at TIMESTAMP, updated_at TIMESTAMP
);

-- GIN Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾ ĞºĞ»Ğ°ÑÑĞ°Ğ¼ Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°Ğ¼
CREATE INDEX idx_spells_classes ON spells USING GIN (classes);
CREATE INDEX idx_spells_components ON spells USING GIN (components);
```

**RandomTable â€” Ğ³Ğ¸Ğ±ĞºĞ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹:**
```sql
CREATE TABLE random_tables (
    id BIGSERIAL PRIMARY KEY,
    name JSONB NOT NULL,                    -- {"ru": "Ğ¡Ğ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ñ‹Ğµ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ¸ Ğ² Ğ»ĞµÑÑƒ"}
    description JSONB,
    campaign_id BIGINT REFERENCES campaigns(id) ON DELETE CASCADE,  -- null = Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ°Ñ
    dice_formula VARCHAR(20) NOT NULL,      -- "1d20", "2d6", "1d100"
    category VARCHAR(50),                   -- encounter/weather/loot/npc_trait/event/custom

    -- Ğ’ÑĞµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ¿Ñ€ÑĞ¼Ğ¾ Ğ² JSONB â€” Ğ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ° Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°!
    entries JSONB NOT NULL DEFAULT '[]',
    -- [
    --   {"min": 1, "max": 5, "result": "ĞĞ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚. Ğ¢Ğ¸ÑˆĞ¸Ğ½Ğ° Ğ»ĞµÑĞ° Ğ½Ğ°Ñ€ÑƒÑˆĞ°ĞµÑ‚ÑÑ Ğ»Ğ¸ÑˆÑŒ Ğ¿ĞµĞ½Ğ¸ĞµĞ¼ Ğ¿Ñ‚Ğ¸Ñ†."},
    --   {"min": 6, "max": 10, "result": "Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° Ğ¸Ğ· 2d4 Ğ³Ğ¾Ğ±Ğ»Ğ¸Ğ½Ğ¾Ğ² ÑƒÑÑ‚Ñ€Ğ¾Ğ¸Ğ»Ğ° Ğ·Ğ°ÑĞ°Ğ´Ñƒ Ğ½Ğ° Ñ‚Ñ€Ğ¾Ğ¿Ğµ."},
    --   {"min": 11, "max": 15, "result": "Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ Ğ¾Ñ‚ÑˆĞµĞ»ÑŒĞ½Ğ¸Ğº Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ³Ğ°Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ° ĞºĞ¾ÑÑ‚ÑÑ…. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞŸÑ€Ğ¾Ğ½Ğ¸Ñ†Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ (Ğ¡Ğ» 15)."},
    --   {"min": 16, "max": 18, "result": "Ğ Ğ°Ğ½ĞµĞ½Ñ‹Ğ¹ ĞµĞ´Ğ¸Ğ½Ğ¾Ñ€Ğ¾Ğ³ Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ Ğ¾ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ¸.", "subtable": "unicorn_reactions"},
    --   {"min": 19, "max": 20, "result": "ĞŸĞ¾Ñ€Ñ‚Ğ°Ğ» Ğ² Ğ¡Ñ‚Ñ€Ğ°Ğ½Ñƒ Ğ¤ĞµĞ¹ Ğ¼ĞµÑ€Ñ†Ğ°ĞµÑ‚ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ´ĞµÑ€ĞµĞ²ÑŒÑĞ¼Ğ¸.", "tags": ["magic", "fey"]}
    -- ]

    created_at TIMESTAMP, updated_at TIMESTAMP
);
```

**Scene â€” Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ:**
```sql
CREATE TABLE scenes (
    id BIGSERIAL PRIMARY KEY,
    name JSONB NOT NULL,
    description JSONB,
    campaign_id BIGINT REFERENCES campaigns(id) ON DELETE CASCADE,

    -- Ğ’ÑĞµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ÑÑ†ĞµĞ½Ñ‹ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ JSONB
    settings JSONB DEFAULT '{}',
    -- {
    --   "lighting": "dim",              -- bright/dim/dark
    --   "weather": "rain",              -- clear/rain/snow/fog/storm
    --   "time_of_day": "evening",       -- dawn/morning/afternoon/evening/night
    --   "ambience": "forest",           -- Ğ¢ĞµĞ³ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€Ğ° Ğ¼ÑƒĞ·Ñ‹ĞºĞ¸
    --   "effects": ["fireflies", "mist"],
    --   "overlay_color": "rgba(0,0,50,0.3)",   -- Ğ¦Ğ²ĞµÑ‚Ğ¾Ğ²Ğ¾Ğ¹ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€
    --   "transition": "fade"            -- fade/slide/instant
    -- }

    sort_order INTEGER DEFAULT 0,
    soundtrack_id BIGINT REFERENCES soundtracks(id),
    created_at TIMESTAMP, updated_at TIMESTAMP
);
```

### PostgreSQL JSONB â€” Ğ¿Ğ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹

```php
// ĞŸĞ¾Ğ¸ÑĞº Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğ¹ Ğ´Ğ»Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ»Ğ°ÑÑĞ°
Spell::whereJsonContains('classes', 'wizard')->get();

// ĞœĞ¾Ğ½ÑÑ‚Ñ€Ñ‹ Ñ Ğ¾Ğ³Ğ½ĞµĞ½Ğ½Ñ‹Ğ¼ Ğ¸Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚Ğ¾Ğ¼
Monster::whereJsonContains('damage_immunities', 'Ğ¾Ğ³Ğ¾Ğ½ÑŒ')->get();

// ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ¸ Ñ Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ¹ Ğ¡Ğ¸Ğ»Ğ¾Ğ¹
Character::whereRaw("(abilities->>'strength')::int >= ?", [16])->get();

// ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ²Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğ¼ JSONB
Monster::whereRaw("EXISTS (
    SELECT 1 FROM jsonb_array_elements(actions) AS action
    WHERE action->>'name' ILIKE ?
)", ['%Ğ´Ñ‹Ñ…Ğ°Ğ½Ğ¸Ğµ%'])->get();

// ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ JSONB Ğ¿Ğ¾Ğ»Ñ
$character->update([
    'currency' => array_merge($character->currency, ['gp' => $character->currency['gp'] + 50])
]);

// Ğ˜Ğ»Ğ¸ Ñ‡ĞµÑ€ĞµĞ· PostgreSQL jsonb_set
DB::table('characters')->where('id', $id)
    ->update(['currency' => DB::raw("jsonb_set(currency, '{gp}', to_jsonb((currency->>'gp')::int + 50))")]);
```

### ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ â€” Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ´Ğ»Ñ JSONB

```php
// Ğ’ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸ÑÑ… Ğ²ÑĞµĞ³Ğ´Ğ° ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ default Ğ´Ğ»Ñ JSONB
$table->jsonb('abilities')->default('{}');
$table->jsonb('features')->default('[]');
$table->jsonb('settings')->default('{}');

// GIN Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ñ… JSONB Ğ¿Ğ¾Ğ»ĞµĞ¹
$table->index(DB::raw('(abilities) jsonb_path_ops'), 'idx_abilities', 'gin');

// Ğ˜Ğ»Ğ¸ Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ¼ statement
Schema::table('spells', function (Blueprint $table) {
    DB::statement('CREATE INDEX idx_spells_classes ON spells USING GIN (classes)');
});
```

### Ğ§Ñ‚Ğ¾ ĞĞ• Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ² JSONB

Ğ”Ğ°Ğ¶Ğµ Ñ Ğ¼Ğ¾Ñ‰Ğ½Ñ‹Ğ¼ JSONB, Ğ½ĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ»ÑƒÑ‡ÑˆĞµ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
- **Settings** â€” Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° (ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ¸ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸ÑĞ¼Ğ¸)
- **Spells, Items, Monsters, Races, Classes** â€” Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ (Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ±Ğ°Ğ·Ğ°, Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼ Ñ‡ĞµÑ€ĞµĞ· pivot)
- **Characters** â€” Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° (CRUD, Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº user, Ğº campaign)
- **Campaigns, Encounters, BattleSessions** â€” Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ (ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ ÑĞ²ÑĞ·Ğ¸, ÑÑ‚Ğ°Ñ‚ÑƒÑÑ‹)
- **Many-to-many ÑĞ²ÑĞ·Ğ¸** (characterâ†”spell, characterâ†”item, encounterâ†”monster, settingâ†”spell/item/monster/race/class) â€” pivot Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ñ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ (overrides)

ĞĞ¾ **Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸** ÑÑ‚Ğ¸Ñ… Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† JSONB Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ñ‰ĞµĞ´Ñ€Ğ¾ Ğ´Ğ»Ñ Ğ²Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ñ… ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€.

## Content Architecture â€” ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° â†’ Ğ¡ĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³ â†’ ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ â†’ ĞĞºÑ‚Ñ‹ â†’ Ğ¡ĞµÑÑĞ¸Ğ¸ â†’ Ğ¡Ñ†ĞµĞ½Ñ‹

### Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ² Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ ĞŸĞ ĞĞ’Ğ˜Ğ› (RuleSystem)                                â”‚
â”‚  "D&D 5e" Â· "Warhammer 40k" Â· "Ğ¡Ğ²Ğ¾Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°"                  â”‚
â”‚  ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚: Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸, ĞºÑƒĞ±Ğ¸ĞºĞ¸, Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹, Ğ±Ğ¾Ñ‘Ğ²ĞºĞ°,  â”‚
â”‚  Ğ¼Ğ°Ğ³Ğ¸Ñ/Ğ¿ÑĞ¸, ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ, Ñ‚Ğ¸Ğ¿Ñ‹ ÑƒÑ€Ğ¾Ğ½Ğ° â€” Ğ’Ğ¡Ğ Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ğ¾Ğµ DM'Ğ¾Ğ¼      â”‚
â”‚  ĞĞµ Ğ²ÑĞµ Ğ¸Ğ³Ñ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ d20 Ğ¸ D&D-Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹!                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ Ğ¡Ğ•Ğ¢Ğ¢Ğ˜ĞĞ“ (Setting) â†’ Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»             â”‚
â”‚  "Eberron" Â· "Forgotten Realms" Â· "Warhammer Imperium"        â”‚
â”‚  ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚: Ñ€Ğ°ÑÑ‹, ĞºĞ»Ğ°ÑÑÑ‹, Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ, Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹, Ğ¼Ğ¾Ğ½ÑÑ‚Ñ€Ñ‹       â”‚
â”‚  ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼Ğ¸ (Ñ overrides)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ® ĞšĞĞœĞŸĞĞĞ˜Ğ¯ (Campaign) â†’ Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ                 â”‚
â”‚  "Ğ¢Ğ°Ğ¹Ğ½Ñ‹ Ğ¨Ğ°Ñ€Ğ½Ğ°" Â· "ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¼Ğ°ÑĞº ĞšÑ…Ğ¾Ñ€Ğ½Ğ°"                      â”‚
â”‚  ĞĞ°ÑĞ»ĞµĞ´ÑƒĞµÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¸ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ¾Ñ‚ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“– ĞĞšĞ¢ (Act) â†’ Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡ĞµĞ½Ğ½Ğ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸            â”‚
â”‚  "ĞĞºÑ‚ 1: ĞŸÑ€Ğ¸Ğ±Ñ‹Ñ‚Ğ¸Ğµ" Â· "ĞĞºÑ‚ 2: Ğ—Ğ°Ğ³Ğ¾Ğ²Ğ¾Ñ€" Â· "ĞĞºÑ‚ 3: Ğ¤Ğ¸Ğ½Ğ°Ğ»"        â”‚
â”‚  Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞµÑÑĞ¸Ğ¸ Ğ² ÑÑĞ¶ĞµÑ‚Ğ½Ñ‹Ğµ Ğ°Ñ€ĞºĞ¸ Ñ intro Ğ¸ epilogue          â”‚
â”‚  ĞšĞ°Ğº Ğ³Ğ»Ğ°Ğ²Ñ‹ ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ¸Ğ»Ğ¸ Ğ°ĞºÑ‚Ñ‹ Ğ¿ÑŒĞµÑÑ‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… Ğ¡Ğ•Ğ¡Ğ¡Ğ˜Ğ¯ (Session) â†’ Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ Ğ°ĞºÑ‚Ñƒ                        â”‚
â”‚  #1 "ĞŸÑ€Ğ¸Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ² Ğ¨Ğ°Ñ€Ğ½" Â· #2 "ĞŸĞ¾Ğ´Ğ·ĞµĞ¼ĞµĞ»ÑŒÑ"                       â”‚
â”‚  ĞĞ´Ğ½Ğ° Ğ¸Ğ³Ñ€Ğ¾Ğ²Ğ°Ñ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ° (3-5 Ñ‡Ğ°ÑĞ¾Ğ² Ğ·Ğ° ÑÑ‚Ğ¾Ğ»Ğ¾Ğ¼)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¬ Ğ¡Ğ¦Ğ•ĞĞ« (Scene) â†’ Ğ´ĞµÑ€ĞµĞ²Ğ¾ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ÑĞµÑÑĞ¸Ğ¸                       â”‚
â”‚  Intro â†’ Ğ¢Ğ°Ğ²ĞµÑ€Ğ½Ğ° â†’ [Ğ’Ñ‹Ğ±Ğ¾Ñ€] â†’ ĞŸĞ¾Ğ´Ğ·ĞµĞ¼ĞµĞ»ÑŒĞµ / Ğ›ĞµÑ â†’ Boss â†’ Outro  â”‚
â”‚  Drag & drop Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ Ñ Ğ²ĞµÑ‚Ğ²Ğ»ĞµĞ½Ğ¸ÑĞ¼Ğ¸                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ—Ğ°Ñ‡ĞµĞ¼ Ğ½ÑƒĞ¶Ğ½Ñ‹ ĞĞºÑ‚Ñ‹:**
- Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€ÑƒÑÑ‚ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ ĞºĞ°Ğº ĞºĞ½Ğ¸Ğ³Ñƒ Ñ Ğ³Ğ»Ğ°Ğ²Ğ°Ğ¼Ğ¸
- Ğ£ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ°ĞºÑ‚Ğ° ĞµÑÑ‚ÑŒ intro (Ğ·Ğ°Ğ²ÑĞ·ĞºĞ°) Ğ¸ epilogue (Ñ€Ğ°Ğ·Ğ²ÑĞ·ĞºĞ°)
- Ğ›ĞµĞ³Ñ‡Ğµ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ¾Ğ»Ğ³Ğ¸Ğµ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ½Ğ° 50+ ÑĞµÑÑĞ¸Ğ¹
- DM Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¾Ğ±Ñ‰ÑƒÑ ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½Ñƒ: "ĞœÑ‹ ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ² ĞĞºÑ‚Ğµ 2 Ğ¸Ğ· 5"
- Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸ Ñ‡ÑƒĞ²ÑÑ‚Ğ²ÑƒÑÑ‚ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ: "ĞœÑ‹ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ğ»Ğ¸ ĞĞºÑ‚ 1!"

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹

```
Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»: D&D 5e
â”œâ”€ Ğ¡ĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³: Eberron (Ğ½Ğ°Ñˆ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹!)
â”‚   â”œâ”€ ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ: "Ğ¢Ğ°Ğ¹Ğ½Ñ‹ Ğ¨Ğ°Ñ€Ğ½Ğ°"
â”‚   â”‚   â”œâ”€ ĞĞºÑ‚ 1: "ĞŸÑ€Ğ¸Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ² Ğ¨Ğ°Ñ€Ğ½" (intro + 4 ÑĞµÑÑĞ¸Ğ¸ + epilogue)
â”‚   â”‚   â”‚   â”œâ”€ Ğ¡ĞµÑÑĞ¸Ñ #1: "ĞŸĞ¾ĞµĞ·Ğ´ Ğ¼Ğ¾Ğ»Ğ½Ğ¸Ğ¹"
â”‚   â”‚   â”‚   â”‚   â””â”€ Intro â†’ ĞŸĞ¾ĞµĞ·Ğ´ â†’ Ğ’Ğ¾ĞºĞ·Ğ°Ğ» â†’ Ğ¢Ğ°Ğ²ĞµÑ€Ğ½Ğ° "Ğ¡Ğ»Ğ¾Ğ¼Ğ°Ğ½Ğ½Ğ°Ñ Ğ½Ğ°ĞºĞ¾Ğ²Ğ°Ğ»ÑŒĞ½Ñ"
â”‚   â”‚   â”‚   â”œâ”€ Ğ¡ĞµÑÑĞ¸Ñ #2: "ĞĞ¸Ğ¶Ğ½Ğ¸Ğ¹ Ğ³Ğ¾Ñ€Ğ¾Ğ´"
â”‚   â”‚   â”‚   â”‚   â””â”€ [Ğ’Ñ‹Ğ±Ğ¾Ñ€] â†’ ĞĞ¸Ğ¶Ğ½Ğ¸Ğ¹ Ğ³Ğ¾Ñ€Ğ¾Ğ´ / Ğ’ĞµÑ€Ñ…Ğ½Ğ¸Ğ¹ Ğ³Ğ¾Ñ€Ğ¾Ğ´ â†’ ...ÑÑ†ĞµĞ½Ñ‹...
â”‚   â”‚   â”‚   â”œâ”€ Ğ¡ĞµÑÑĞ¸Ñ #3: "ĞŸĞµÑ€Ğ²Ğ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ"
â”‚   â”‚   â”‚   â””â”€ Ğ¡ĞµÑÑĞ¸Ñ #4: "Ğ¢Ğ°Ğ¹Ğ½Ñ‹Ğ¹ Ğ·Ğ°ĞºĞ°Ğ·Ñ‡Ğ¸Ğº" (epilogue Ğ°ĞºÑ‚Ğ°)
â”‚   â”‚   â”œâ”€ ĞĞºÑ‚ 2: "Ğ—Ğ°Ğ³Ğ¾Ğ²Ğ¾Ñ€ Ğ˜Ğ·ÑƒĞ¼Ñ€ÑƒĞ´Ğ½Ğ¾Ğ³Ğ¾ ĞšĞ¾Ğ³Ñ‚Ñ" (intro + N ÑĞµÑÑĞ¸Ğ¹ + epilogue)
â”‚   â”‚   â”‚   â””â”€ ...
â”‚   â”‚   â””â”€ ĞĞºÑ‚ 3: "Ğ’Ğ¾Ğ¹Ğ½Ğ° Ğ”Ñ€Ğ°ĞºĞ¾Ğ½ÑŒĞ¸Ñ… ĞœĞµÑ‚Ğ¾Ğº" (Ñ„Ğ¸Ğ½Ğ°Ğ» ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸)
â”‚   â””â”€ Ğ Ğ°ÑÑ‹: Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞº, Ğ­Ğ»ÑŒÑ„, Ğ”Ğ²Ğ°Ñ€Ñ„, ĞŸĞ¾Ğ»ÑƒÑ€Ğ¾ÑĞ»Ğ¸Ğº, ĞŸĞµÑ€ĞµĞ²Ñ‘Ñ€Ñ‚Ñ‹Ñˆ, ĞšĞ°Ğ»Ğ°ÑˆÑ‚Ğ°Ñ€, ĞšĞ¾Ğ²Ğ°Ğ½Ñ‹Ğ¹
â”‚
â”œâ”€ Ğ¡ĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³: Forgotten Realms
â”‚   â”œâ”€ Ğ Ğ°ÑÑ‹: Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞº, Ğ­Ğ»ÑŒÑ„, Ğ”Ğ²Ğ°Ñ€Ñ„... (Ğ±ĞµĞ· ĞšĞ¾Ğ²Ğ°Ğ½Ğ¾Ğ³Ğ¾ Ğ¸ ĞŸĞµÑ€ĞµĞ²Ñ‘Ñ€Ñ‚Ñ‹ÑˆĞ°)
â”‚   â””â”€ Ğ¢ĞµĞ»ĞµĞºĞ¸Ğ½ĞµĞ· â€” ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ
â”‚
Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»: Warhammer 40k (ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ğ°Ñ)
â”œâ”€ Ğ¡ĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³: Imperium of Man
â”‚   â”œâ”€ ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ: "ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¼Ğ°ÑĞº"
â”‚   â”‚   â”œâ”€ ĞĞºÑ‚ 1: "ĞŸÑ€Ğ¸Ğ·Ñ‹Ğ² Ğ½Ğ° ÑĞ»ÑƒĞ¶Ğ±Ñƒ"
â”‚   â”‚   â”œâ”€ ĞĞºÑ‚ 2: "Ğ•Ñ€ĞµÑ‚Ğ¸ĞºĞ¸ ÑÑ€ĞµĞ´Ğ¸ Ğ½Ğ°Ñ"
â”‚   â”‚   â””â”€ ĞĞºÑ‚ 3: "ĞÑ‡Ğ¸Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ğ³Ğ½Ñ‘Ğ¼"
```

### RuleSystem â€” ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»

ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ **Ñ„ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½ÑƒÑ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸ĞºÑƒ**. Ğ’ÑÑ‘ Ğ² JSONB â€” Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ğ¾Ğµ DM'Ğ¾Ğ¼.

```sql
CREATE TABLE rule_systems (
    id BIGSERIAL PRIMARY KEY,
    name JSONB NOT NULL,                    -- {"ru": "D&D 5-Ñ Ñ€ĞµĞ´Ğ°ĞºÑ†Ğ¸Ñ"}
    description JSONB,
    slug VARCHAR(100) UNIQUE NOT NULL,      -- "dnd-5e"
    is_system BOOLEAN DEFAULT FALSE,        -- true = Ğ¿Ñ€ĞµĞ´ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ğ°Ñ

    -- Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ (Ñƒ D&D â€” 6, Ñƒ Warhammer â€” Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ)
    abilities JSONB NOT NULL,
    -- [
    --   {"key": "strength", "name": "Ğ¡Ğ¸Ğ»Ğ°", "short": "Ğ¡Ğ˜Ğ›"},
    --   {"key": "dexterity", "name": "Ğ›Ğ¾Ğ²ĞºĞ¾ÑÑ‚ÑŒ", "short": "Ğ›ĞĞ’"},
    --   ...
    -- ]

    -- ĞĞ°Ğ²Ñ‹ĞºĞ¸ â†’ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ°Ğ¼
    skills JSONB DEFAULT '[]',

    -- ĞšÑƒĞ±Ğ¸ĞºĞ¸, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ
    dice JSONB DEFAULT '["d4","d6","d8","d10","d12","d20","d100"]',

    -- Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹ (DM Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¼ĞµĞ½ÑÑ‚ÑŒ!)
    formulas JSONB DEFAULT '{}',
    -- {
    --   "ability_modifier": "floor((score - 10) / 2)",
    --   "proficiency_bonus": "floor((level - 1) / 4) + 2",
    --   "attack_roll": "d20 + ability_mod + proficiency",
    --   "initiative": "d20 + dexterity_mod",
    --   "hp_on_level_up": "hit_die / 2 + 1 + constitution_mod"
    -- }

    -- Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ (conditions)
    conditions JSONB DEFAULT '[]',
    -- [{"key": "blinded", "name": "ĞÑĞ»ĞµĞ¿Ğ»Ñ‘Ğ½", "description": "..."}]

    -- Ğ¢Ğ¸Ğ¿Ñ‹ ÑƒÑ€Ğ¾Ğ½Ğ°
    damage_types JSONB DEFAULT '[]',
    -- [{"key": "fire", "name": "ĞĞ³Ğ¾Ğ½ÑŒ"}, {"key": "slashing", "name": "Ğ ÑƒĞ±ÑÑ‰Ğ¸Ğ¹"}]

    -- Ğ¨ĞºĞ¾Ğ»Ñ‹ Ğ¼Ğ°Ğ³Ğ¸Ğ¸ / Ğ¿ÑĞ¸-Ğ´Ğ¸ÑÑ†Ğ¸Ğ¿Ğ»Ğ¸Ğ½Ñ‹ / Ğ¸Ñ‚Ğ´
    magic_schools JSONB DEFAULT '[]',

    -- Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ (Ğ´Ğ»Ñ D&D â€” 1-20, Ğ´Ğ»Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¸Ğ½Ğ°Ñ‡Ğµ)
    level_range JSONB DEFAULT '{"min": 1, "max": 20}',

    -- Ğ‘Ğ¾ĞµĞ²Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°
    combat_rules JSONB DEFAULT '{}',
    -- {
    --   "initiative_type": "individual",  -- "individual" | "group" | "side"
    --   "death_saves": true,
    --   "death_save_successes": 3,
    --   "death_save_failures": 3,
    --   "critical_hit_multiplier": "double_dice",  -- Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ ĞºÑ€Ğ¸Ñ‚-ÑƒĞ´Ğ°Ñ€Ğ¾Ğ²
    --   "rest_types": ["short", "long"]
    -- }

    -- Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
    character_creation JSONB DEFAULT '{}',
    -- {
    --   "methods": ["point_buy", "standard_array", "roll"],
    --   "point_buy_budget": 27,
    --   "standard_array": [15, 14, 13, 12, 10, 8],
    --   "roll_formula": "4d6kh3"
    -- }

    -- Ğ’Ğ°Ğ»ÑÑ‚Ğ°
    currency JSONB DEFAULT '{}',
    -- {
    --   "units": [
    --     {"key": "cp", "name": "ĞœĞµĞ´Ğ½Ñ‹Ğµ", "rate": 1},
    --     {"key": "sp", "name": "Ğ¡ĞµÑ€ĞµĞ±Ñ€ÑĞ½Ñ‹Ğµ", "rate": 10},
    --     {"key": "gp", "name": "Ğ—Ğ¾Ğ»Ğ¾Ñ‚Ñ‹Ğµ", "rate": 100}
    --   ]
    -- }

    -- Ğ•Ğ´Ğ¸Ğ½Ğ¸Ñ†Ñ‹ Ğ¸Ğ·Ğ¼ĞµÑ€ĞµĞ½Ğ¸Ñ
    units JSONB DEFAULT '{}',
    -- {"distance": "Ğ¼", "weight": "ĞºĞ³", "volume": "Ğ»"}

    created_at TIMESTAMP, updated_at TIMESTAMP
);
```

### Setting â€” ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³ (Ğ¼Ğ¸Ñ€)

ĞŸÑ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ». ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚.

```sql
CREATE TABLE settings (
    id BIGSERIAL PRIMARY KEY,
    rule_system_id BIGINT NOT NULL REFERENCES rule_systems(id),
    name JSONB NOT NULL,                    -- {"ru": "Ğ­Ğ±ĞµÑ€Ñ€Ğ¾Ğ½"}
    description JSONB,
    slug VARCHAR(100) UNIQUE NOT NULL,      -- "eberron"
    is_system BOOLEAN DEFAULT FALSE,
    icon VARCHAR(50),
    color VARCHAR(7),                       -- "#8B0000"
    sort_order INTEGER DEFAULT 0,
    created_at TIMESTAMP, updated_at TIMESTAMP
);

-- Pivot: ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³ â†” ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ (Ñ overrides)
CREATE TABLE setting_spells (
    id BIGSERIAL PRIMARY KEY,
    setting_id BIGINT NOT NULL REFERENCES settings(id) ON DELETE CASCADE,
    spell_id BIGINT NOT NULL REFERENCES spells(id) ON DELETE CASCADE,
    overrides JSONB,    -- null = Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ», Ğ¸Ğ½Ğ°Ñ‡Ğµ Ğ¿ĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ
    UNIQUE(setting_id, spell_id)
);
-- ĞĞ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾: setting_items, setting_monsters, setting_races, setting_classes
```

### Campaign â†’ Act â†’ Session â†’ Scene (Ğ´ĞµÑ€ĞµĞ²Ğ¾)

```sql
CREATE TABLE campaigns (
    id BIGSERIAL PRIMARY KEY,
    setting_id BIGINT NOT NULL REFERENCES settings(id),
    user_id BIGINT NOT NULL REFERENCES users(id),    -- DM
    name JSONB NOT NULL,
    description JSONB,
    slug VARCHAR(100) NOT NULL,
    status VARCHAR(20) DEFAULT 'active',  -- active/paused/completed
    settings JSONB DEFAULT '{}',          -- Ğ´Ğ¾Ğ¿. Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ (allowed_races, etc.)
    created_at TIMESTAMP, updated_at TIMESTAMP
);
-- ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ Ğ½Ğ°ÑĞ»ĞµĞ´ÑƒĞµÑ‚ rule_system Ñ‡ĞµÑ€ĞµĞ· setting.rule_system_id

CREATE TABLE acts (
    id BIGSERIAL PRIMARY KEY,
    campaign_id BIGINT NOT NULL REFERENCES campaigns(id) ON DELETE CASCADE,
    number INTEGER NOT NULL,              -- Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞ¾Ğ²Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€: 1, 2, 3
    name JSONB NOT NULL,                  -- {"ru": "ĞĞºÑ‚ 1: ĞŸÑ€Ğ¸Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ² Ğ¨Ğ°Ñ€Ğ½"}
    description JSONB,                    -- {"ru": "ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ°ĞºÑ‚Ğ° Ğ´Ğ»Ñ DM"}
    intro JSONB,                          -- {"ru": "Ğ’ÑÑ‚ÑƒĞ¿Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ Ğ°ĞºÑ‚Ğ°"}
    epilogue JSONB,                       -- {"ru": "Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ°ÑÑ‰Ğ¸Ğ¹ Ñ‚ĞµĞºÑÑ‚ Ğ°ĞºÑ‚Ğ°"}
    status VARCHAR(20) DEFAULT 'planned', -- planned/active/completed
    sort_order INTEGER DEFAULT 0,
    created_at TIMESTAMP, updated_at TIMESTAMP
);
-- ĞĞºÑ‚ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞµÑÑĞ¸Ğ¸ Ğ² ÑÑĞ¶ĞµÑ‚Ğ½ÑƒÑ Ğ°Ñ€ĞºÑƒ

CREATE TABLE sessions (
    id BIGSERIAL PRIMARY KEY,
    act_id BIGINT NOT NULL REFERENCES acts(id) ON DELETE CASCADE,
    number INTEGER NOT NULL,              -- Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞ¾Ğ²Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ°ĞºÑ‚Ğ°: #1, #2, #3
    name JSONB NOT NULL,                  -- {"ru": "ĞŸĞ¾ĞµĞ·Ğ´ Ğ¼Ğ¾Ğ»Ğ½Ğ¸Ğ¹"}
    summary JSONB,                        -- {"ru": "ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ ÑĞµÑÑĞ¸Ğ¸"}
    status VARCHAR(20) DEFAULT 'planned', -- planned/active/completed
    played_at DATE,                       -- ĞºĞ¾Ğ³Ğ´Ğ° Ğ¸Ğ³Ñ€Ğ°Ğ»Ğ¸
    sort_order INTEGER DEFAULT 0,
    created_at TIMESTAMP, updated_at TIMESTAMP
);
-- session.campaign_id Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· act.campaign_id

CREATE TABLE scenes (
    id BIGSERIAL PRIMARY KEY,
    session_id BIGINT NOT NULL REFERENCES sessions(id) ON DELETE CASCADE,
    name JSONB NOT NULL,                  -- {"ru": "Ğ¢Ğ°Ğ²ĞµÑ€Ğ½Ğ° Â«Ğ¡Ğ»Ğ¾Ğ¼Ğ°Ğ½Ğ½Ğ°Ñ Ğ½Ğ°ĞºĞ¾Ğ²Ğ°Ğ»ÑŒĞ½ÑÂ»"}
    description JSONB,                    -- {"ru": "ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ DM"}

    -- Ğ¢Ğ¸Ğ¿ ÑÑ†ĞµĞ½Ñ‹
    type VARCHAR(30) DEFAULT 'narrative', -- intro/narrative/combat/social/choice/exploration/boss/outro/custom

    -- Ğ”ĞµÑ€ĞµĞ²Ğ¾: ÑĞ²ÑĞ·Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑÑ†ĞµĞ½Ğ°Ğ¼Ğ¸
    parent_id BIGINT REFERENCES scenes(id) ON DELETE SET NULL,  -- Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ ÑÑ†ĞµĞ½Ğ°
    sort_order INTEGER DEFAULT 0,         -- Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº ÑÑ€ĞµĞ´Ğ¸ siblings

    -- Ğ”Ğ»Ñ ÑÑ†ĞµĞ½-Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğ² (type='choice'): Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ¸ ĞºÑƒĞ´Ğ° Ğ²ĞµĞ´ÑƒÑ‚
    choices JSONB,
    -- [
    --   {"label": "ĞŸĞ¾Ğ¹Ñ‚Ğ¸ Ğ² Ğ½Ğ¸Ğ¶Ğ½Ğ¸Ğ¹ Ğ³Ğ¾Ñ€Ğ¾Ğ´", "target_scene_id": 15},
    --   {"label": "ĞŸĞ¾Ğ¹Ñ‚Ğ¸ Ğ² Ğ²ĞµÑ€Ñ…Ğ½Ğ¸Ğ¹ Ğ³Ğ¾Ñ€Ğ¾Ğ´", "target_scene_id": 16},
    --   {"label": "ĞÑÑ‚Ğ°Ñ‚ÑŒÑÑ Ğ² Ñ‚Ğ°Ğ²ĞµÑ€Ğ½Ğµ", "target_scene_id": 17}
    -- ]

    -- Display Client Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
    display JSONB DEFAULT '{}',
    -- {
    --   "lighting": "dim",
    --   "weather": "rain",
    --   "time_of_day": "evening",
    --   "transition": "fade",
    --   "overlay_color": "rgba(0,0,50,0.3)"
    -- }

    -- ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ¸
    soundtrack_id BIGINT REFERENCES soundtracks(id),
    encounter_id BIGINT REFERENCES encounters(id),  -- ĞµÑĞ»Ğ¸ combat ÑÑ†ĞµĞ½Ğ°

    created_at TIMESTAMP, updated_at TIMESTAMP
);
-- Media: background (image), ambient_video (optional)

-- Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞ²ÑĞ·Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑÑ†ĞµĞ½Ğ°Ğ¼Ğ¸ (Ğ´Ğ»Ñ Ğ½ĞµĞ»Ğ¸Ğ½ĞµĞ¹Ğ½Ñ‹Ñ… Ğ³Ñ€Ğ°Ñ„Ğ¾Ğ²)
CREATE TABLE scene_connections (
    id BIGSERIAL PRIMARY KEY,
    from_scene_id BIGINT NOT NULL REFERENCES scenes(id) ON DELETE CASCADE,
    to_scene_id BIGINT NOT NULL REFERENCES scenes(id) ON DELETE CASCADE,
    label JSONB,                          -- {"ru": "Ğ•ÑĞ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ Ğ½Ğ°ÑˆĞ»Ğ¸ ĞºĞ»ÑÑ‡"}
    condition JSONB,                      -- Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾: ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°
    sort_order INTEGER DEFAULT 0,
    UNIQUE(from_scene_id, to_scene_id)
);
```

### Ğ”ĞµÑ€ĞµĞ²Ğ¾ ÑÑ†ĞµĞ½ â€” Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€

```
ğŸ“‹ Backoffice â†’ ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ â†’ ĞĞºÑ‚ 1 â†’ Ğ¡ĞµÑÑĞ¸Ñ #1 â†’ Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ ÑÑ†ĞµĞ½

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“… Ğ¡ĞµÑÑĞ¸Ñ #1: "ĞŸĞ¾ĞµĞ·Ğ´ Ğ¼Ğ¾Ğ»Ğ½Ğ¸Ğ¹"             [+ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑÑ†ĞµĞ½Ñƒ]â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  INTRO  â”‚â”€â”€â”€â†’â”‚ ĞŸĞ¾ĞµĞ·Ğ´ Ğ¼Ğ¾Ğ»Ğ½Ğ¸Ğ¹    â”‚â”€â”€â”€â†’â”‚ Ğ’Ğ¾ĞºĞ·Ğ°Ğ» Ğ¨Ğ°Ñ€Ğ½Ğ°  â”‚    â”‚
â”‚  â”‚ ğŸ¬      â”‚    â”‚ ğŸš‚ narrative    â”‚    â”‚ ğŸ™ï¸ narrative  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                â”‚             â”‚
â”‚                                         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚                                         â”‚  Ğ’Ğ«Ğ‘ĞĞ   â‘‚   â”‚     â”‚
â”‚                                         â”‚ choice      â”‚     â”‚
â”‚                                         â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜     â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â” â”‚
â”‚                              â”‚ ĞĞ¸Ğ¶Ğ½Ğ¸Ğ¹    â”‚      â”‚ Ğ’ĞµÑ€Ñ…Ğ½Ğ¸Ğ¹ â”‚ â”‚
â”‚                              â”‚ Ğ³Ğ¾Ñ€Ğ¾Ğ´     â”‚      â”‚ Ğ³Ğ¾Ñ€Ğ¾Ğ´   â”‚ â”‚
â”‚                              â”‚ âš”ï¸ combat  â”‚      â”‚ ğŸ—£ socialâ”‚ â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                       â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”        â”‚
â”‚                                       â”‚  OUTRO    â”‚        â”‚
â”‚                                       â”‚  ğŸ¬       â”‚        â”‚
â”‚                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                              â”‚
â”‚  [Drag & drop Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµÑ‚Ğ°ÑĞºĞ¸Ğ²Ğ°Ğ½Ğ¸Ñ ÑÑ†ĞµĞ½]                      â”‚
â”‚  [ĞšĞ»Ğ¸Ğº Ğ½Ğ° ÑĞ²ÑĞ·ÑŒ â€” Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°]            â”‚
â”‚  [ĞšĞ»Ğ¸Ğº Ğ½Ğ° ÑÑ†ĞµĞ½Ñƒ â€” Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ, Display, Ğ¼ÑƒĞ·Ñ‹ĞºÑƒ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ñ„Ñ€Ğ¾Ğ½Ñ‚Ğµ:**
- React + `@xyflow/react` (Ğ±Ñ‹Ğ²ÑˆĞ¸Ğ¹ React Flow) Ğ´Ğ»Ñ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ³Ñ€Ğ°Ñ„Ğ°
- Drag & drop ÑƒĞ·Ğ»Ğ¾Ğ² (ÑÑ†ĞµĞ½) Ğ¸ Ñ€Ñ‘Ğ±ĞµÑ€ (ÑĞ²ÑĞ·ĞµĞ¹)
- ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑƒĞ·ĞµĞ» â€” ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ñ Ğ¸ĞºĞ¾Ğ½ĞºĞ¾Ğ¹ Ñ‚Ğ¸Ğ¿Ğ°, Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼, Ğ¼Ğ¸Ğ½Ğ¸Ğ°Ñ‚ÑÑ€Ğ¾Ğ¹ Ñ„Ğ¾Ğ½Ğ°
- Ğ”Ğ²Ğ¾Ğ¹Ğ½Ğ¾Ğ¹ ĞºĞ»Ğ¸Ğº â†’ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ ÑÑ†ĞµĞ½Ñ‹ (Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ, Display Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸, Ğ¼ÑƒĞ·Ñ‹ĞºĞ°)
- Ğ¢Ğ¸Ğ¿Ñ‹ ÑÑ†ĞµĞ½ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ÑÑ‚ÑÑ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ Ñ†Ğ²ĞµÑ‚Ğ°Ğ¼Ğ¸/Ğ¸ĞºĞ¾Ğ½ĞºĞ°Ğ¼Ğ¸

### ĞšĞ°Ğº DM Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ ÑÑ‚Ğ¸Ğ¼

```
ğŸ“‹ Backoffice
â”‚
â”œâ”€ ğŸ² Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»
â”‚   â”œâ”€ D&D 5e ğŸ”’ (ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ğ°Ñ)
â”‚   â”œâ”€ ĞœĞ¾Ğ¹ Warhammer 40k (ÑĞ¾Ğ·Ğ´Ğ°Ğ» DM)
â”‚   â””â”€ [+ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»]
â”‚
â”œâ”€ ğŸŒ Ğ¡ĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ¸
â”‚   â”œâ”€ Eberron (D&D 5e) â€” Ğ½Ğ°Ñˆ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹!
â”‚   â”œâ”€ Forgotten Realms (D&D 5e)
â”‚   â”œâ”€ Imperium (Warhammer 40k)
â”‚   â””â”€ [+ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³] â†’ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»
â”‚
â”œâ”€ ğŸ“– ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ (Ñ€Ğ°ÑÑ‹ / ĞºĞ»Ğ°ÑÑÑ‹ / Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ / Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹ / Ğ¼Ğ¾Ğ½ÑÑ‚Ñ€Ñ‹)
â”‚   â”œâ”€ Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ±Ğ°Ğ·Ğ° â€” CRUD, Ğ¿Ğ¾Ğ¸ÑĞº, Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹
â”‚   â”œâ”€ ĞŸÑ€Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸: Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼
â”‚   â””â”€ Ğ”Ğ»Ñ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°: [ĞŸĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ñ] (override)
â”‚
â”œâ”€ ğŸ® ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚   â”œâ”€ "Ğ¢Ğ°Ğ¹Ğ½Ñ‹ Ğ¨Ğ°Ñ€Ğ½Ğ°" (ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³: Eberron)
â”‚   â”‚   â”œâ”€ Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸ (Ğ¿Ñ€Ğ¸Ğ³Ğ»Ğ°ÑˆÑ‘Ğ½Ğ½Ñ‹Ğµ)
â”‚   â”‚   â”œâ”€ ĞĞºÑ‚Ñ‹
â”‚   â”‚   â”‚   â”œâ”€ ĞĞºÑ‚ 1: "ĞŸÑ€Ğ¸Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ² Ğ¨Ğ°Ñ€Ğ½" âœ… completed
â”‚   â”‚   â”‚   â”‚   â”œâ”€ Ğ¡ĞµÑÑĞ¸Ñ #1 "ĞŸĞ¾ĞµĞ·Ğ´ Ğ¼Ğ¾Ğ»Ğ½Ğ¸Ğ¹" â†’ [Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ ÑÑ†ĞµĞ½]
â”‚   â”‚   â”‚   â”‚   â”œâ”€ Ğ¡ĞµÑÑĞ¸Ñ #2 "ĞĞ¸Ğ¶Ğ½Ğ¸Ğ¹ Ğ³Ğ¾Ñ€Ğ¾Ğ´" â†’ [Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ ÑÑ†ĞµĞ½]
â”‚   â”‚   â”‚   â”‚   â””â”€ [+ ĞĞ¾Ğ²Ğ°Ñ ÑĞµÑÑĞ¸Ñ]
â”‚   â”‚   â”‚   â”œâ”€ ĞĞºÑ‚ 2: "Ğ—Ğ°Ğ³Ğ¾Ğ²Ğ¾Ñ€" ğŸ”„ active
â”‚   â”‚   â”‚   â”‚   â””â”€ ...
â”‚   â”‚   â”‚   â””â”€ [+ ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ°ĞºÑ‚]
â”‚   â”‚   â”œâ”€ NPC
â”‚   â”‚   â”œâ”€ Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ÑÑ‚ĞµĞ¹
â”‚   â”‚   â””â”€ Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ¸
â”‚   â””â”€ [+ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ] â†’ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³
```

### Seeders

```php
// 1. RuleSystemsSeeder
RuleSystem::updateOrCreate(
    ['slug' => 'dnd-5e'],
    [
        'name' => ['ru' => 'D&D 5-Ñ Ñ€ĞµĞ´Ğ°ĞºÑ†Ğ¸Ñ'],
        'is_system' => true,
        'abilities' => [...],  // 6 Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº D&D
        'skills' => [...],     // 18 Ğ½Ğ°Ğ²Ñ‹ĞºĞ¾Ğ²
        'formulas' => [...],   // Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹ D&D
        // ... Ğ²ÑĞµ Ğ¸Ğ³Ñ€Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ² JSONB
    ]
);

// 2. SettingsSeeder
Setting::updateOrCreate(
    ['slug' => 'eberron'],
    [
        'name' => ['ru' => 'Ğ­Ğ±ĞµÑ€Ñ€Ğ¾Ğ½'],
        'rule_system_id' => RuleSystem::where('slug', 'dnd-5e')->first()->id,
        'is_system' => true,
        'color' => '#8B0000',
    ]
);

// 3. SpellsSeeder â€” ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ
$spell = Spell::updateOrCreate(['slug' => 'fireball'], [...]);
$eberron = Setting::where('slug', 'eberron')->first();
$spell->settings()->syncWithoutDetaching([$eberron->id]);
```

## Domain Models

### System Models

**RuleSystem** â€” Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»
- Translatable: `name`, `description`
- JSONB: `abilities`, `skills`, `dice`, `formulas`, `conditions`, `damage_types`, `magic_schools`, `level_range`, `combat_rules`, `character_creation`, `currency`, `units`
- Fields: `slug`, `is_system`
- Relations: hasMany Settings
- Ğ’ÑÑ‘ Ğ² JSONB â€” DM Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹, Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, ĞºÑƒĞ±Ğ¸ĞºĞ¸, Ğ±Ğ¾Ñ‘Ğ²ĞºÑƒ

**Setting** â€” Ğ¡ĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³ / Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğ¹ Ğ¼Ğ¸Ñ€
- Translatable: `name`, `description`
- Fields: `slug`, `is_system`, `icon`, `color`, `sort_order`
- Relations: belongsTo RuleSystem; hasMany Campaigns; belongsToMany Spells, Items, Monsters, Races, CharacterClasses (Ñ‡ĞµÑ€ĞµĞ· pivot Ñ overrides)

### Core Models

**Campaign** â€” ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ
- Translatable: `name`, `description`
- JSONB: `settings` (allowed_races, allowed_classes, starting_level, ability_method, hp_method, tone, etc.)
- Fields: `slug`, `status` (active/paused/completed)
- Relations: belongsTo Setting, User (DM); hasMany Acts, Characters, Encounters, Notes, RandomTables; belongsToMany Users (players)
- ĞĞ°ÑĞ»ĞµĞ´ÑƒĞµÑ‚ RuleSystem Ñ‡ĞµÑ€ĞµĞ· `setting.rule_system_id`

**Act** â€” ĞĞºÑ‚ (ÑÑĞ¶ĞµÑ‚Ğ½Ğ°Ñ Ğ°Ñ€ĞºĞ°)
- Translatable: `name`, `description`, `intro`, `epilogue`
- Fields: `campaign_id`, `number` (Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞ¾Ğ²Ñ‹Ğ¹), `status` (planned/active/completed), `sort_order`
- Relations: belongsTo Campaign; hasMany Sessions
- Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞµÑÑĞ¸Ğ¸ Ğ² Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡ĞµĞ½Ğ½ÑƒÑ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ Ğ²ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸ĞµĞ¼ Ğ¸ ÑĞ¿Ğ¸Ğ»Ğ¾Ğ³Ğ¾Ğ¼

**Session** â€” Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ°Ñ ÑĞµÑÑĞ¸Ñ
- Translatable: `name`, `summary`
- Fields: `act_id`, `number` (Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞ¾Ğ²Ñ‹Ğ¹ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ°ĞºÑ‚Ğ°), `status` (planned/active/completed), `played_at`, `sort_order`
- Relations: belongsTo Act; hasMany Scenes
- campaign Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ñ‡ĞµÑ€ĞµĞ· `act.campaign`

**Scene** â€” Ğ¡Ñ†ĞµĞ½Ğ° (ÑƒĞ·ĞµĞ» Ğ² Ğ´ĞµÑ€ĞµĞ²Ğµ)
- Translatable: `name`, `description`
- JSONB: `choices` (Ğ´Ğ»Ñ type=choice â€” Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ¸ target_scene_id), `display` (lighting, weather, transition, overlay)
- Fields: `session_id`, `parent_id` (Ğ´ĞµÑ€ĞµĞ²Ğ¾), `type` (intro/narrative/combat/social/choice/exploration/boss/outro/custom), `sort_order`
- Relations: belongsTo Session, parent Scene, Soundtrack, Encounter; hasMany child Scenes, SceneConnections
- Media: `background` (image), `ambient_video`

**SceneConnection** â€” Ğ¡Ğ²ÑĞ·ÑŒ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑÑ†ĞµĞ½Ğ°Ğ¼Ğ¸ (Ğ´Ğ»Ñ Ğ½ĞµĞ»Ğ¸Ğ½ĞµĞ¹Ğ½Ñ‹Ñ… Ğ³Ñ€Ğ°Ñ„Ğ¾Ğ²)
- Translatable: `label`
- JSONB: `condition` (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°)
- Fields: `from_scene_id`, `to_scene_id`, `sort_order`

**Character** â€” ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
- Translatable: `name`, `backstory`
- JSONB: `abilities`, `skill_proficiencies`, `skill_expertise`, `saving_throw_proficiencies`, `death_saves`, `proficiencies`, `features`, `class_resources`, `currency`, `speed`, `hit_dice_remaining`, `death_info`, `stats`
- Fields: `level`, `experience_points`, `current_hp`, `max_hp`, `temp_hp`, `armor_class`, `inspiration`, `is_alive`
- Relations: belongsTo User, Campaign; belongsToMany CharacterClass, Race, Spells, Items
- Media: `portrait`

**CharacterClass** â€” ĞšĞ»Ğ°ÑÑÑ‹
- Translatable: `name`, `description`
- JSONB: `primary_abilities`, `saving_throws`, `armor_proficiencies`, `weapon_proficiencies`, `tool_proficiencies`, `starting_equipment`, `level_features`, `progression`, `spell_slots`
- Fields: `slug`, `hit_die`
- Relations: belongsToMany Settings (pivot Ñ overrides)

**Race** â€” Ğ Ğ°ÑÑ‹
- Translatable: `name`, `description`
- JSONB: `ability_bonuses`, `speed`, `traits`, `languages`, `proficiencies`
- Fields: `slug`, `size`
- Relations: belongsToMany Settings (pivot Ñ overrides)

**Spell** â€” Ğ—Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ / Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚Ğ¸
- Translatable: `name`, `description`
- JSONB: `components`, `classes`, `higher_levels`, `cantrip_scaling`, `effects`
- Fields: `slug`, `level`, `school`, `casting_time`, `range`, `duration`, `concentration`, `ritual`
- Relations: belongsToMany Settings (pivot Ñ overrides)

**Item** â€” ĞŸÑ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹
- Translatable: `name`, `description`
- JSONB: `properties`, `requirements`
- Fields: `slug`, `type`, `rarity`, `weight`, `cost`, `requires_attunement`
- Relations: belongsToMany Settings (pivot Ñ overrides)

**Monster** â€” ĞœĞ¾Ğ½ÑÑ‚Ñ€Ñ‹
- Translatable: `name`, `description`
- JSONB: `abilities`, `speed`, `saving_throws`, `skills`, `senses`, `languages`, `damage_resistances`, `damage_immunities`, `damage_vulnerabilities`, `condition_immunities`, `traits`, `actions`, `legendary_actions`, `lair_actions`, `regional_effects`
- Fields: `slug`, `size`, `type`, `alignment`, `armor_class`, `armor_type`, `hit_points`, `hit_dice`, `challenge_rating`, `experience_points`
- Relations: belongsToMany Settings (pivot Ñ overrides)

### DM Models

**Encounter** â€” Ğ’ÑÑ‚Ñ€ĞµÑ‡Ğ° / ÑÑ‚Ğ¾Ğ»ĞºĞ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ
- Translatable: `name`, `description`, `notes`
- Fields: `campaign_id`, `type`, `difficulty`, `status`, `sort_order`
- Relations: belongsTo Campaign, Scene (optional); belongsToMany Monsters

**BattleSession** â€” ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ°Ñ Ğ±Ğ¸Ñ‚Ğ²Ğ°
- Fields: `encounter_id`, `round`, `status`, `current_turn`
- Relations: belongsTo Encounter, Campaign; hasMany BattleParticipants

**BattleParticipant** â€” Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸Ğº Ğ±Ğ¸Ñ‚Ğ²Ñ‹
- JSONB: `conditions`
- Fields: `battle_session_id`, `name`, `type`, `entity_id`, `initiative`, `current_hp`, `max_hp`, `armor_class`, `is_visible`, `sort_order`

**Npc** â€” ĞĞµĞ¸Ğ³Ñ€Ğ¾Ğ²Ñ‹Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ¸
- Translatable: `name`, `description`, `personality`, `appearance`, `motivation`
- Fields: `campaign_id`, `location`, `is_alive`, `is_known`
- Media: `portrait`

**CampaignNote** â€” Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ Ğ¼Ğ°ÑÑ‚ĞµÑ€Ğ°
- Translatable: `title`, `content`
- Fields: `campaign_id`, `category`, `is_shared`, `session_number`, `sort_order`

**RandomTable** â€” Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ÑÑ‚ĞµĞ¹
- Translatable: `name`, `description`
- JSONB: `entries`
- Fields: `campaign_id` (nullable), `dice_formula`, `category`

### Display Models

**Soundtrack** â€” ĞœÑƒĞ·Ñ‹ĞºĞ°
- Fields: `name`, `category`, `url`, `duration`, `loop`
- Media: `audio_file`

**Rule** â€” Ğ¡Ğ¿Ñ€Ğ°Ğ²Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»
- Translatable: `title`, `content`
- Fields: `rule_system_id`, `category`, `slug`, `sort_order`
- Relations: belongsTo RuleSystem

## Seeders

### Base Seeders (run on every deploy)

All seeders are **idempotent** â€” use `updateOrCreate`/`firstOrCreate`.
All text content seeded in **Russian only**. Enum keys stored in English for code compatibility.

1. **RolesAndPermissionsSeeder** â€” roles: owner, dm, player + permissions
2. **OwnerSeeder** â€” ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ owner Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚ Ğ¸Ğ· env vars
3. **RuleSystemsSeeder** â€” ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» "D&D 5e" (`is_system=true`) â€” Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸, Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹, ĞºÑƒĞ±Ğ¸ĞºĞ¸, ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ, Ñ‚Ğ¸Ğ¿Ñ‹ ÑƒÑ€Ğ¾Ğ½Ğ°, ÑˆĞºĞ¾Ğ»Ñ‹ Ğ¼Ğ°Ğ³Ğ¸Ğ¸, Ğ±Ğ¾ĞµĞ²Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°, Ğ²Ğ°Ğ»ÑÑ‚Ğ°, Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°
4. **SettingsSeeder** â€” ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³ "Eberron" (D&D 5e, `is_system=true`). DM ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑĞ²Ğ¾Ğ¸ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ¸ ÑĞ°Ğ¼
5. **RacesSeeder** â€” Ñ€Ğ°ÑÑ‹ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ Eberron (Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ ĞšĞ¾Ğ²Ğ°Ğ½Ñ‹Ğ¹, ĞŸĞµÑ€ĞµĞ²Ñ‘Ñ€Ñ‚Ñ‹Ñˆ, ĞšĞ°Ğ»Ğ°ÑˆÑ‚Ğ°Ñ€)
6. **ClassesSeeder** â€” ĞºĞ»Ğ°ÑÑÑ‹ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº Eberron
7. **SpellsSeeder** â€” Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼, Ğ´Ğ¸ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ğ¸ Ğ² Ğ¼ĞµÑ‚Ñ€Ğ°Ñ… + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº Eberron
8. **ItemsSeeder** â€” Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼, Ğ²ĞµÑ Ğ² ĞºĞ³ + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº Eberron
9. **MonstersSeeder** â€” Ğ¼Ğ¾Ğ½ÑÑ‚Ñ€Ñ‹ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼, Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº Eberron
10. **RulesSeeder** â€” Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ (Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ D&D 5e)

### DevSeeder (local only)

- Sample ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ Ğ² ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğµ Eberron Ñ Ğ´Ğ²ÑƒĞ¼Ñ Ğ°ĞºÑ‚Ğ°Ğ¼Ğ¸
- ĞĞºÑ‚ 1 Ñ Ğ´Ğ²ÑƒĞ¼Ñ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸, ĞĞºÑ‚ 2 Ñ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ÑĞµÑÑĞ¸ĞµĞ¹
- Ğ”ĞµÑ€ĞµĞ²Ğ¾ ÑÑ†ĞµĞ½ Ğ² Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹ ÑĞµÑÑĞ¸Ğ¸ (intro â†’ narrative â†’ choice â†’ combat â†’ outro)
- 4-5 Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ñ… Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ĞºĞ»Ğ°ÑÑĞ¾Ğ²
- Sample encounters Ğ¸ random tables
- Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑÑ†ĞµĞ½Ñ‹ Ñ placeholder Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ÑĞ¼Ğ¸

## Key Services

### DiceService
```php
// ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¾Ğ¹ Ğ±Ñ€Ğ¾ÑĞ¾Ğº â€” Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ĞºÑƒĞ±Ğ¸ĞºĞ¸ Ğ²ÑĞµĞ³Ğ´Ğ° Ğ² Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğµ!
// Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ ĞºĞ¾Ğ³Ğ´Ğ°: Ğ½ÑƒĞ¶ĞµĞ½ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ±Ñ€Ğ¾ÑĞ¾Ğº Ğ¿Ğ¾ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ, ÑĞµĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ğ±Ñ€Ğ¾ÑĞ¾Ğº DM,
// Ğ¸Ğ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ·Ğ°Ğ±Ñ‹Ğ» ĞºÑƒĞ±Ğ¸ĞºĞ¸ (Ğ±Ñ‹Ğ²Ğ°ĞµÑ‚)
$result = DiceService::roll('2d6+3');    // {rolls: [4, 2], modifier: 3, total: 9}
$result = DiceService::roll('1d20');     // {rolls: [17], modifier: 0, total: 17}
$result = DiceService::roll('4d6kh3');   // 4d6, keep highest 3 (Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ÑÑ‚Ğ°Ñ‚Ğ¾Ğ²)

// DM Ñ‚Ğ°ĞºĞ¶Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ğ²ĞµÑÑ‚Ğ¸ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ±Ñ€Ğ¾ÑĞºĞ° Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ
// Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ‚Ñ€ĞµĞºĞµÑ€Ğ° Ğ±Ğ¸Ñ‚Ğ²Ñ‹
```

### CharacterCreatorService
```php
// ĞŸĞ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ğ¾Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° (ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ RuleSystem + Setting ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸!)
// Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸, Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹ â€” Ğ¸Ğ· campaign.setting.ruleSystem
// Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ñ€Ğ°ÑÑ‹/ĞºĞ»Ğ°ÑÑÑ‹ â€” Ğ¸Ğ· campaign.setting (pivot Ñ overrides)
//
// Ğ¨Ğ°Ğ³ 1: Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ñ€Ğ°ÑÑ‹ â†’ Ğ±Ğ¾Ğ½ÑƒÑÑ‹ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº, ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ, Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸
//         (ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ€Ğ°Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ÑƒĞµÑ‚ÑÑ Ğ¿Ğ¾ setting + campaign.settings.allowed_races)
// Ğ¨Ğ°Ğ³ 2: Ğ’Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ»Ğ°ÑÑĞ° â†’ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸, ĞĞ—, ÑĞ½Ğ°Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ
// Ğ¨Ğ°Ğ³ 3: Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº
//         (Ğ¼ĞµÑ‚Ğ¾Ğ´ Ğ¸Ğ· campaign.settings.ability_method, Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ğ¸Ğ· ruleSystem.character_creation)
// Ğ¨Ğ°Ğ³ 4: Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¾Ğ², ÑĞ·Ñ‹ĞºĞ¾Ğ², Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚ĞµĞ¹
// Ğ¨Ğ°Ğ³ 5: Ğ¡Ğ½Ğ°Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ (ÑÑ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ ĞºĞ»Ğ°ÑÑĞ° Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ° Ğ·Ğ° Ğ·Ğ¾Ğ»Ğ¾Ñ‚Ñ‹Ğµ)
// Ğ¨Ğ°Ğ³ 6: ĞŸÑ€ĞµĞ´Ñ‹ÑÑ‚Ğ¾Ñ€Ğ¸Ñ, Ğ¸Ğ¼Ñ, Ğ²Ğ½ĞµÑˆĞ½Ğ¾ÑÑ‚ÑŒ, Ğ¿Ğ¾Ñ€Ñ‚Ñ€ĞµÑ‚
//
// Ğ’ÑÑ‘ Ğ°Ğ²Ñ‚Ğ¾-Ñ€Ğ°ÑÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°Ğ¼ Ğ¸Ğ· RuleSystem
```

### BattleTrackerService
```php
// Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ±Ğ¸Ñ‚Ğ²Ğ¾Ğ¹
$battle = BattleTrackerService::start($encounter);
BattleTrackerService::rollInitiative($battle);          // Ğ‘Ñ€Ğ¾ÑĞºĞ¸ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ñ‹
BattleTrackerService::nextTurn($battle);                // Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ñ…Ğ¾Ğ´
BattleTrackerService::applyDamage($participant, 15);    // ĞĞ°Ğ½ĞµÑÑ‚Ğ¸ ÑƒÑ€Ğ¾Ğ½
BattleTrackerService::addCondition($participant, 'stunned');  // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ (ĞÑˆĞµĞ»Ğ¾Ğ¼Ğ»Ñ‘Ğ½)
BattleTrackerService::removeParticipant($participant);  // Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¸Ğ· Ğ±Ğ¾Ñ
```

### DisplaySyncService
```php
// Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¢Ğ’/Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ Ğ² ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğµ Ñ‡ĞµÑ€ĞµĞ· WebSocket
// DM Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ½Ğ° Ğ½Ğ¾ÑƒÑ‚Ğ±ÑƒĞºĞµ â†’ Ğ½Ğ° Ğ¢Ğ’ Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾ Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ°
DisplaySyncService::changeScene($campaign, $scene);     // Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑÑ†ĞµĞ½Ñƒ (Ñ„Ğ¾Ğ½ + Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´)
DisplaySyncService::playMusic($campaign, $soundtrack);  // Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼ÑƒĞ·Ñ‹ĞºÑƒ (crossfade)
DisplaySyncService::showChoice($campaign, $options);    // Ğ­ĞºÑ€Ğ°Ğ½ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° (Pillars of Eternity)
DisplaySyncService::showBattle($campaign, $battle);     // ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ñƒ Ğ¸ Ñ‡ĞµĞ¹ Ñ…Ğ¾Ğ´
DisplaySyncService::showText($campaign, $text);         // ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½
DisplaySyncService::blackout($campaign);                // Ğ—Ğ°Ñ‚ĞµĞ¼Ğ½Ğ¸Ñ‚ÑŒ ÑĞºÑ€Ğ°Ğ½ (Ğ¿Ğ°ÑƒĞ·Ğ°, Ğ´Ñ€Ğ°Ğ¼Ğ°)
```

## Frontend i18n

- Locales: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ `ru` Ğ½Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚. Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° i18n (next-intl) Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ³Ğ¾ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ
- Route structure: `[locale]/(group)/page` â€” locale Ğ¿Ğ¾ĞºĞ° Ğ²ÑĞµĞ³Ğ´Ğ° `ru`
- Translations in `apps/web/messages/ru.json`
- NEVER hardcode text â€” Ğ²ÑĞµĞ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `useTranslations()` hook, Ğ´Ğ°Ğ¶Ğµ ĞµÑĞ»Ğ¸ ÑĞ·Ñ‹Ğº Ğ¾Ğ´Ğ¸Ğ½
- `defaultLocale: 'ru'` â€” ĞµĞ´Ğ¸Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ ÑĞ·Ñ‹Ğº
- Translatable Ğ¿Ğ¾Ğ»Ñ Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»ÑÑ… (`HasTranslations`) â€” Ğ¿Ğ¾ĞºĞ° Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ `ru`, Ğ½Ğ¾ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° JSON ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ³Ğ¾

## Ğ›Ğ¾ĞºĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ D&D Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº

### Ğ’ĞĞ–ĞĞ: Ğ’ÑÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼

Ğ’ĞµÑÑŒ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ, Ğ²ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ, Ğ²ÑĞµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° â€” Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ. Ğ­Ñ‚Ğ¾ ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°. Ğ¦ĞµĞ»ÑŒ â€” ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ D&D Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğ¼ Ğ´Ğ»Ñ Ñ€ÑƒÑÑĞºĞ¾ÑĞ·Ñ‹Ñ‡Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ², Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ Ğ½Ğ¾Ğ²Ğ¸Ñ‡ĞºĞ¾Ğ².

### ĞœĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°

D&D Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ğ¸Ğ¼Ğ¿ĞµÑ€ÑĞºÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ (Ñ„ÑƒÑ‚Ñ‹, Ñ„ÑƒĞ½Ñ‚Ñ‹, Ğ¼Ğ¸Ğ»Ğ¸). ĞœÑ‹ **Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¸Ğ¼ Ğ½Ğ° Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºÑƒÑ**:

| ĞÑ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ» D&D | ĞĞ°ÑˆĞ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° | ĞšĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚ | ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ |
|-------------|-------------|-------------|---------|
| 1 foot (Ñ„ÑƒÑ‚) | 0.3 Ğ¼ (30 ÑĞ¼) | Ã—0.3 | Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ 30 ft â†’ 9 Ğ¼ |
| 5 feet (ĞºĞ»ĞµÑ‚ĞºĞ°) | 1.5 Ğ¼ | Ã—0.3 | ĞšĞ»ĞµÑ‚ĞºĞ° Ğ±Ğ¾Ñ = 1.5 Ğ¼ |
| 1 mile (Ğ¼Ğ¸Ğ»Ñ) | 1.5 ĞºĞ¼ | Ã—1.5 | Ğ”Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ 1 mile â†’ 1.5 ĞºĞ¼ |
| 1 pound (Ñ„ÑƒĞ½Ñ‚) | 0.5 ĞºĞ³ | Ã—0.45 | ĞœĞµÑ‡ 3 lb â†’ 1.5 ĞºĞ³ |
| 1 gallon (Ğ³Ğ°Ğ»Ğ»Ğ¾Ğ½) | 4 Ğ» | Ã—3.8 | Ğ¤Ğ»ÑĞ³Ğ° Ğ²Ğ¾Ğ´Ñ‹ 1 gallon â†’ 4 Ğ» |
| 1 ounce (ÑƒĞ½Ñ†Ğ¸Ñ) | 30 Ğ³ | Ã—28 | Ğ—ĞµĞ»ÑŒĞµ 4 oz â†’ 120 Ğ³ |
| 1 pint (Ğ¿Ğ¸Ğ½Ñ‚Ğ°) | 0.5 Ğ» | Ã—0.47 | ĞšÑ€ÑƒĞ¶ĞºĞ° ÑĞ»Ñ 1 pint â†’ 0.5 Ğ» |

**ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° ĞºĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ² RuleSystem.units JSONB:**
```php
// Ğ˜Ğ· RuleSystem model (slug: 'dnd-5e'), Ğ¿Ğ¾Ğ»Ğµ units:
'units' => [
    'system' => 'metric',
    'distance' => 'Ğ¼',
    'weight' => 'ĞºĞ³',
    'grid_cell' => 1.5,             // Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ĞºĞ»ĞµÑ‚ĞºĞµ (5 ft)
    'conversion' => [
        'ft_to_m' => 0.3,
        'mile_to_km' => 1.5,
        'lb_to_kg' => 0.45,
    ],
],
```

### Ğ ÑƒÑÑĞºĞ¸Ğµ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ñ‹ D&D

Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ÑƒÑÑ‚Ğ¾ÑĞ²ÑˆÑƒÑÑÑ Ñ€ÑƒÑÑĞºÑƒÑ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ D&D:

**Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ (Ability Scores):**
| English | Ğ ÑƒÑÑĞºĞ¸Ğ¹ | Ğ¡Ğ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ |
|---------|---------|------------|
| Strength | Ğ¡Ğ¸Ğ»Ğ° | Ğ¡Ğ˜Ğ› |
| Dexterity | Ğ›Ğ¾Ğ²ĞºĞ¾ÑÑ‚ÑŒ | Ğ›ĞĞ’ |
| Constitution | Ğ¢ĞµĞ»Ğ¾ÑĞ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ | Ğ¢Ğ•Ğ› |
| Intelligence | Ğ˜Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ | Ğ˜ĞĞ¢ |
| Wisdom | ĞœÑƒĞ´Ñ€Ğ¾ÑÑ‚ÑŒ | ĞœĞ”Ğ  |
| Charisma | Ğ¥Ğ°Ñ€Ğ¸Ğ·Ğ¼Ğ° | Ğ¥ĞĞ  |

**ĞĞ°Ğ²Ñ‹ĞºĞ¸ (Skills):**
| English | Ğ ÑƒÑÑĞºĞ¸Ğ¹ |
|---------|---------|
| Acrobatics | ĞĞºÑ€Ğ¾Ğ±Ğ°Ñ‚Ğ¸ĞºĞ° |
| Animal Handling | Ğ£Ñ…Ğ¾Ğ´ Ğ·Ğ° Ğ¶Ğ¸Ğ²Ğ¾Ñ‚Ğ½Ñ‹Ğ¼Ğ¸ |
| Arcana | ĞœĞ°Ğ³Ğ¸Ñ |
| Athletics | ĞÑ‚Ğ»ĞµÑ‚Ğ¸ĞºĞ° |
| Deception | ĞĞ±Ğ¼Ğ°Ğ½ |
| History | Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ |
| Insight | ĞŸÑ€Ğ¾Ğ½Ğ¸Ñ†Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ |
| Intimidation | Ğ—Ğ°Ğ¿ÑƒĞ³Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ |
| Investigation | Ğ Ğ°ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
| Medicine | ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ° |
| Nature | ĞŸÑ€Ğ¸Ñ€Ğ¾Ğ´Ğ° |
| Perception | Ğ’Ğ½Ğ¸Ğ¼Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ |
| Performance | Ğ’Ñ‹ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ |
| Persuasion | Ğ£Ğ±ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ |
| Religion | Ğ ĞµĞ»Ğ¸Ğ³Ğ¸Ñ |
| Sleight of Hand | Ğ›Ğ¾Ğ²ĞºĞ¾ÑÑ‚ÑŒ Ñ€ÑƒĞº |
| Stealth | Ğ¡ĞºÑ€Ñ‹Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ |
| Survival | Ğ’Ñ‹Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ |

**ĞšĞ»Ğ°ÑÑÑ‹:**
| English | Ğ ÑƒÑÑĞºĞ¸Ğ¹ |
|---------|---------|
| Barbarian | Ğ’Ğ°Ñ€Ğ²Ğ°Ñ€ |
| Bard | Ğ‘Ğ°Ñ€Ğ´ |
| Cleric | Ğ–Ñ€ĞµÑ† |
| Druid | Ğ”Ñ€ÑƒĞ¸Ğ´ |
| Fighter | Ğ’Ğ¾Ğ¸Ğ½ |
| Monk | ĞœĞ¾Ğ½Ğ°Ñ… |
| Paladin | ĞŸĞ°Ğ»Ğ°Ğ´Ğ¸Ğ½ |
| Ranger | Ğ¡Ğ»ĞµĞ´Ğ¾Ğ¿Ñ‹Ñ‚ |
| Rogue | ĞŸĞ»ÑƒÑ‚ |
| Sorcerer | Ğ§Ğ°Ñ€Ğ¾Ğ´ĞµĞ¹ |
| Warlock | ĞšĞ¾Ğ»Ğ´ÑƒĞ½ |
| Wizard | Ğ’Ğ¾Ğ»ÑˆĞµĞ±Ğ½Ğ¸Ğº |

**Ğ Ğ°ÑÑ‹:**
| English | Ğ ÑƒÑÑĞºĞ¸Ğ¹ |
|---------|---------|
| Human | Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞº |
| Elf | Ğ­Ğ»ÑŒÑ„ |
| Dwarf | Ğ”Ğ²Ğ°Ñ€Ñ„ |
| Halfling | ĞŸĞ¾Ğ»ÑƒÑ€Ğ¾ÑĞ»Ğ¸Ğº |
| Gnome | Ğ“Ğ½Ğ¾Ğ¼ |
| Half-Elf | ĞŸĞ¾Ğ»ÑƒÑĞ»ÑŒÑ„ |
| Half-Orc | ĞŸĞ¾Ğ»ÑƒĞ¾Ñ€Ğº |
| Tiefling | Ğ¢Ğ¸Ñ„Ğ»Ğ¸Ğ½Ğ³ |
| Dragonborn | Ğ”Ñ€Ğ°ĞºĞ¾Ğ½Ğ¾Ñ€Ğ¾Ğ¶Ğ´Ñ‘Ğ½Ğ½Ñ‹Ğ¹ |

**Ğ¨ĞºĞ¾Ğ»Ñ‹ Ğ¼Ğ°Ğ³Ğ¸Ğ¸:**
| English | Ğ ÑƒÑÑĞºĞ¸Ğ¹ |
|---------|---------|
| Abjuration | ĞĞ³Ñ€Ğ°Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ |
| Conjuration | Ğ’Ñ‹Ğ·Ğ¾Ğ² |
| Divination | ĞŸÑ€Ğ¾Ñ€Ğ¸Ñ†Ğ°Ğ½Ğ¸Ğµ |
| Enchantment | ĞÑ‡Ğ°Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
| Evocation | Ğ’Ğ¾Ğ¿Ğ»Ğ¾Ñ‰ĞµĞ½Ğ¸Ğµ |
| Illusion | Ğ˜Ğ»Ğ»ÑĞ·Ğ¸Ñ |
| Necromancy | ĞĞµĞºÑ€Ğ¾Ğ¼Ğ°Ğ½Ñ‚Ğ¸Ñ |
| Transmutation | ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |

**Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ (Conditions):**
| English | Ğ ÑƒÑÑĞºĞ¸Ğ¹ |
|---------|---------|
| Blinded | ĞÑĞ»ĞµĞ¿Ğ»Ñ‘Ğ½ |
| Charmed | ĞÑ‡Ğ°Ñ€Ğ¾Ğ²Ğ°Ğ½ |
| Deafened | ĞĞ³Ğ»ÑƒÑˆÑ‘Ğ½ |
| Frightened | Ğ˜ÑĞ¿ÑƒĞ³Ğ°Ğ½ |
| Grappled | Ğ¡Ñ…Ğ²Ğ°Ñ‡ĞµĞ½ |
| Incapacitated | ĞĞµĞ´ĞµĞµÑĞ¿Ğ¾ÑĞ¾Ğ±ĞµĞ½ |
| Invisible | ĞĞµĞ²Ğ¸Ğ´Ğ¸Ğ¼ |
| Paralyzed | ĞŸĞ°Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½ |
| Petrified | ĞĞºĞ°Ğ¼ĞµĞ½Ñ‘Ğ½ |
| Poisoned | ĞÑ‚Ñ€Ğ°Ğ²Ğ»ĞµĞ½ |
| Prone | Ğ¡Ğ±Ğ¸Ñ‚ Ñ Ğ½Ğ¾Ğ³ |
| Restrained | ĞĞ¿ÑƒÑ‚Ğ°Ğ½ |
| Stunned | ĞÑˆĞµĞ»Ğ¾Ğ¼Ğ»Ñ‘Ğ½ |
| Unconscious | Ğ‘ĞµĞ· ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ |
| Exhaustion | Ğ˜ÑÑ‚Ğ¾Ñ‰ĞµĞ½Ğ¸Ğµ |

**ĞĞ±Ñ‰Ğ¸Ğµ Ğ¸Ğ³Ñ€Ğ¾Ğ²Ñ‹Ğµ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ñ‹:**
| English | Ğ ÑƒÑÑĞºĞ¸Ğ¹ |
|---------|---------|
| Armor Class (AC) | ĞšĞ»Ğ°ÑÑ Ğ”Ğ¾ÑĞ¿ĞµÑ…Ğ° (ĞšĞ”) |
| Hit Points (HP) | ĞÑ‡ĞºĞ¸ Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ (ĞĞ—) |
| Hit Dice | ĞšĞ¾ÑÑ‚ÑŒ Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ |
| Proficiency Bonus | Ğ‘Ğ¾Ğ½ÑƒÑ ĞœĞ°ÑÑ‚ĞµÑ€ÑÑ‚Ğ²Ğ° |
| Saving Throw | Ğ¡Ğ¿Ğ°ÑĞ±Ñ€Ğ¾ÑĞ¾Ğº |
| Attack Roll | Ğ‘Ñ€Ğ¾ÑĞ¾Ğº Ğ°Ñ‚Ğ°ĞºĞ¸ |
| Damage Roll | Ğ‘Ñ€Ğ¾ÑĞ¾Ğº ÑƒÑ€Ğ¾Ğ½Ğ° |
| Spell Slot | Ğ¯Ñ‡ĞµĞ¹ĞºĞ° Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ |
| Cantrip | Ğ—Ğ°Ğ³Ğ¾Ğ²Ğ¾Ñ€ |
| Concentration | ĞšĞ¾Ğ½Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ñ†Ğ¸Ñ |
| Ritual | Ğ Ğ¸Ñ‚ÑƒĞ°Ğ» |
| Short Rest | ĞšĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ… |
| Long Rest | ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ… |
| Initiative | Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ğ° |
| Advantage | ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾ |
| Disadvantage | ĞŸĞ¾Ğ¼ĞµÑ…Ğ° |
| Inspiration | Ğ’Ğ´Ğ¾Ñ…Ğ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ |
| Experience Points (XP) | ĞÑ‡ĞºĞ¸ ĞĞ¿Ñ‹Ñ‚Ğ° (ĞĞ) |
| Challenge Rating (CR) | ĞĞ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ (ĞĞŸ) |
| Death Saving Throw | Ğ¡Ğ¿Ğ°ÑĞ±Ñ€Ğ¾ÑĞ¾Ğº Ğ¾Ñ‚ ÑĞ¼ĞµÑ€Ñ‚Ğ¸ |
| Dungeon Master (DM) | ĞœĞ°ÑÑ‚ĞµÑ€ ĞŸĞ¾Ğ´Ğ·ĞµĞ¼ĞµĞ»Ğ¸Ğ¹ (ĞœĞŸ) |

### Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ² ĞºĞ¾Ğ´Ğµ

**Ğ¡Ğ¸Ğ´ĞµÑ€Ñ‹** â€” Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ¸Ğ´ÑÑ‚ÑÑ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ Ğ¸ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ:
```php
// SpellsSeeder.php
$spell = Spell::updateOrCreate(
    ['slug' => 'fireball'],
    [
        'name' => ['ru' => 'ĞĞ³Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ ÑˆĞ°Ñ€'],
        'description' => ['ru' => 'Ğ¯Ñ€ĞºĞ¸Ğ¹ Ğ»ÑƒÑ‡ Ğ²Ñ‹Ğ»ĞµÑ‚Ğ°ĞµÑ‚ Ğ¸Ğ· Ğ²Ğ°ÑˆĞµĞ³Ğ¾ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ°Ğ»ÑŒÑ†Ğ°...'],
        'level' => 3,
        'school' => 'evocation',        // Ğ’ Ğ‘Ğ” Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ¼ enum Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ¼
        'casting_time' => '1 Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ',  // Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼
        'range' => '45 Ğ¼',              // ĞœĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° (150 ft â†’ 45 Ğ¼)
        'components' => ['Ğ’', 'Ğ¡', 'Ğœ'], // Ğ’ĞµÑ€Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹, Ğ¡Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹, ĞœĞ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹
        'duration' => 'ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ°Ñ',
        // ...
    ]
);
// ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ Eberron (Ğ±ĞµĞ· overrides)
$eberron = Setting::where('slug', 'eberron')->first();
$spell->settings()->syncWithoutDetaching([$eberron->id]);
```

**Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´** â€” Ğ¼Ğ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ enum â†’ Ñ€ÑƒÑÑĞºĞ¾Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· translations:
```json
// messages/ru.json
{
  "dnd": {
    "schools": {
      "evocation": "Ğ’Ğ¾Ğ¿Ğ»Ğ¾Ñ‰ĞµĞ½Ğ¸Ğµ",
      "necromancy": "ĞĞµĞºÑ€Ğ¾Ğ¼Ğ°Ğ½Ñ‚Ğ¸Ñ"
    },
    "conditions": {
      "blinded": "ĞÑĞ»ĞµĞ¿Ğ»Ñ‘Ğ½",
      "charmed": "ĞÑ‡Ğ°Ñ€Ğ¾Ğ²Ğ°Ğ½"
    },
    "units": {
      "meters": "Ğ¼",
      "kilometers": "ĞºĞ¼",
      "kilograms": "ĞºĞ³"
    }
  }
}
```

**Enum-Ñ‹ Ğ² Ğ‘Ğ”** Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ¼ (Ğ´Ğ»Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµĞ¼Ğ¾ÑÑ‚Ğ¸), **Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ** Ğ²ÑĞµĞ³Ğ´Ğ° Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ Ñ‡ĞµÑ€ĞµĞ· translations.

## Game Rules Reference (D&D 5e RuleSystem Seeder Data)

Ğ’ÑĞµ Ğ¸Ğ³Ñ€Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ¶Ğ¸Ğ²ÑƒÑ‚ Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ `RuleSystem` (JSONB), Ğ½Ğµ Ğ² ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³-Ñ„Ğ°Ğ¹Ğ»Ğµ.
Ğ­Ñ‚Ğ¾ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ DM'Ñƒ Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ñ‡ĞµÑ€ĞµĞ· backoffice, Ğ° Ñ‚Ğ°ĞºĞ¶Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ (Warhammer, Savage Worlds).

ĞĞ¸Ğ¶Ğµ â€” Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ ÑĞ¸Ğ´ĞµÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ "D&D 5-Ñ Ñ€ĞµĞ´Ğ°ĞºÑ†Ğ¸Ñ":

```php
// RuleSystemsSeeder.php â€” Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ D&D 5e
RuleSystem::updateOrCreate(
    ['slug' => 'dnd-5e'],
    [
        'name' => ['ru' => 'D&D 5-Ñ Ñ€ĞµĞ´Ğ°ĞºÑ†Ğ¸Ñ'],
        'is_system' => true,

        'abilities' => [
            ['key' => 'strength',     'name' => 'Ğ¡Ğ¸Ğ»Ğ°',         'short' => 'Ğ¡Ğ˜Ğ›'],
            ['key' => 'dexterity',    'name' => 'Ğ›Ğ¾Ğ²ĞºĞ¾ÑÑ‚ÑŒ',     'short' => 'Ğ›ĞĞ’'],
            ['key' => 'constitution', 'name' => 'Ğ¢ĞµĞ»Ğ¾ÑĞ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ', 'short' => 'Ğ¢Ğ•Ğ›'],
            ['key' => 'intelligence', 'name' => 'Ğ˜Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚',    'short' => 'Ğ˜ĞĞ¢'],
            ['key' => 'wisdom',       'name' => 'ĞœÑƒĞ´Ñ€Ğ¾ÑÑ‚ÑŒ',     'short' => 'ĞœĞ”Ğ '],
            ['key' => 'charisma',     'name' => 'Ğ¥Ğ°Ñ€Ğ¸Ğ·Ğ¼Ğ°',      'short' => 'Ğ¥ĞĞ '],
        ],

        'skills' => [
            ['key' => 'acrobatics',      'ability' => 'dexterity',    'name' => 'ĞĞºÑ€Ğ¾Ğ±Ğ°Ñ‚Ğ¸ĞºĞ°'],
            ['key' => 'animal_handling', 'ability' => 'wisdom',       'name' => 'Ğ£Ñ…Ğ¾Ğ´ Ğ·Ğ° Ğ¶Ğ¸Ğ²Ğ¾Ñ‚Ğ½Ñ‹Ğ¼Ğ¸'],
            ['key' => 'arcana',          'ability' => 'intelligence', 'name' => 'ĞœĞ°Ğ³Ğ¸Ñ'],
            ['key' => 'athletics',       'ability' => 'strength',     'name' => 'ĞÑ‚Ğ»ĞµÑ‚Ğ¸ĞºĞ°'],
            ['key' => 'deception',       'ability' => 'charisma',     'name' => 'ĞĞ±Ğ¼Ğ°Ğ½'],
            ['key' => 'history',         'ability' => 'intelligence', 'name' => 'Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ'],
            ['key' => 'insight',         'ability' => 'wisdom',       'name' => 'ĞŸÑ€Ğ¾Ğ½Ğ¸Ñ†Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ'],
            ['key' => 'intimidation',    'ability' => 'charisma',     'name' => 'Ğ—Ğ°Ğ¿ÑƒĞ³Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ'],
            ['key' => 'investigation',   'ability' => 'intelligence', 'name' => 'Ğ Ğ°ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ'],
            ['key' => 'medicine',        'ability' => 'wisdom',       'name' => 'ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°'],
            ['key' => 'nature',          'ability' => 'intelligence', 'name' => 'ĞŸÑ€Ğ¸Ñ€Ğ¾Ğ´Ğ°'],
            ['key' => 'perception',      'ability' => 'wisdom',       'name' => 'Ğ’Ğ½Ğ¸Ğ¼Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ'],
            ['key' => 'performance',     'ability' => 'charisma',     'name' => 'Ğ’Ñ‹ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ'],
            ['key' => 'persuasion',      'ability' => 'charisma',     'name' => 'Ğ£Ğ±ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ'],
            ['key' => 'religion',        'ability' => 'intelligence', 'name' => 'Ğ ĞµĞ»Ğ¸Ğ³Ğ¸Ñ'],
            ['key' => 'sleight_of_hand', 'ability' => 'dexterity',    'name' => 'Ğ›Ğ¾Ğ²ĞºĞ¾ÑÑ‚ÑŒ Ñ€ÑƒĞº'],
            ['key' => 'stealth',         'ability' => 'dexterity',    'name' => 'Ğ¡ĞºÑ€Ñ‹Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ'],
            ['key' => 'survival',        'ability' => 'wisdom',       'name' => 'Ğ’Ñ‹Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ'],
        ],

        'dice' => ['d4', 'd6', 'd8', 'd10', 'd12', 'd20', 'd100'],

        'formulas' => [
            'ability_modifier'  => 'floor((score - 10) / 2)',
            'proficiency_bonus' => 'floor((level - 1) / 4) + 2',
            'attack_roll'       => 'd20 + ability_mod + proficiency',
            'initiative'        => 'd20 + dexterity_mod',
            'passive_skill'     => '10 + skill_modifier',
            'hp_on_level_up'    => 'hit_die / 2 + 1 + constitution_mod',
        ],

        'conditions' => [
            ['key' => 'blinded',       'name' => 'ĞÑĞ»ĞµĞ¿Ğ»Ñ‘Ğ½'],
            ['key' => 'charmed',       'name' => 'ĞÑ‡Ğ°Ñ€Ğ¾Ğ²Ğ°Ğ½'],
            ['key' => 'deafened',      'name' => 'ĞĞ³Ğ»ÑƒÑˆÑ‘Ğ½'],
            ['key' => 'frightened',    'name' => 'Ğ˜ÑĞ¿ÑƒĞ³Ğ°Ğ½'],
            ['key' => 'grappled',      'name' => 'Ğ¡Ñ…Ğ²Ğ°Ñ‡ĞµĞ½'],
            ['key' => 'incapacitated', 'name' => 'ĞĞµĞ´ĞµĞµÑĞ¿Ğ¾ÑĞ¾Ğ±ĞµĞ½'],
            ['key' => 'invisible',     'name' => 'ĞĞµĞ²Ğ¸Ğ´Ğ¸Ğ¼'],
            ['key' => 'paralyzed',     'name' => 'ĞŸĞ°Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½'],
            ['key' => 'petrified',     'name' => 'ĞĞºĞ°Ğ¼ĞµĞ½Ñ‘Ğ½'],
            ['key' => 'poisoned',      'name' => 'ĞÑ‚Ñ€Ğ°Ğ²Ğ»ĞµĞ½'],
            ['key' => 'prone',         'name' => 'Ğ¡Ğ±Ğ¸Ñ‚ Ñ Ğ½Ğ¾Ğ³'],
            ['key' => 'restrained',    'name' => 'ĞĞ¿ÑƒÑ‚Ğ°Ğ½'],
            ['key' => 'stunned',       'name' => 'ĞÑˆĞµĞ»Ğ¾Ğ¼Ğ»Ñ‘Ğ½'],
            ['key' => 'unconscious',   'name' => 'Ğ‘ĞµĞ· ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ'],
            ['key' => 'exhaustion',    'name' => 'Ğ˜ÑÑ‚Ğ¾Ñ‰ĞµĞ½Ğ¸Ğµ'],
        ],

        'damage_types' => [
            ['key' => 'acid',        'name' => 'ĞšĞ¸ÑĞ»Ğ¾Ñ‚Ğ°'],
            ['key' => 'bludgeoning', 'name' => 'Ğ”Ñ€Ğ¾Ğ±ÑÑ‰Ğ¸Ğ¹'],
            ['key' => 'cold',        'name' => 'Ğ¥Ğ¾Ğ»Ğ¾Ğ´'],
            ['key' => 'fire',        'name' => 'ĞĞ³Ğ¾Ğ½ÑŒ'],
            ['key' => 'force',       'name' => 'Ğ¡Ğ¸Ğ»Ğ¾Ğ²Ğ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ'],
            ['key' => 'lightning',   'name' => 'ĞœĞ¾Ğ»Ğ½Ğ¸Ñ'],
            ['key' => 'necrotic',    'name' => 'ĞĞµĞºÑ€Ğ¾Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹'],
            ['key' => 'piercing',    'name' => 'ĞšĞ¾Ğ»ÑÑ‰Ğ¸Ğ¹'],
            ['key' => 'poison',      'name' => 'Ğ¯Ğ´'],
            ['key' => 'psychic',     'name' => 'ĞŸÑĞ¸Ñ…Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹'],
            ['key' => 'radiant',     'name' => 'Ğ˜Ğ·Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ'],
            ['key' => 'slashing',    'name' => 'Ğ ÑƒĞ±ÑÑ‰Ğ¸Ğ¹'],
            ['key' => 'thunder',     'name' => 'Ğ—Ğ²ÑƒĞº'],
        ],

        'magic_schools' => [
            ['key' => 'abjuration',    'name' => 'ĞĞ³Ñ€Ğ°Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ'],
            ['key' => 'conjuration',   'name' => 'Ğ’Ñ‹Ğ·Ğ¾Ğ²'],
            ['key' => 'divination',    'name' => 'ĞŸÑ€Ğ¾Ñ€Ğ¸Ñ†Ğ°Ğ½Ğ¸Ğµ'],
            ['key' => 'enchantment',   'name' => 'ĞÑ‡Ğ°Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ'],
            ['key' => 'evocation',     'name' => 'Ğ’Ğ¾Ğ¿Ğ»Ğ¾Ñ‰ĞµĞ½Ğ¸Ğµ'],
            ['key' => 'illusion',      'name' => 'Ğ˜Ğ»Ğ»ÑĞ·Ğ¸Ñ'],
            ['key' => 'necromancy',    'name' => 'ĞĞµĞºÑ€Ğ¾Ğ¼Ğ°Ğ½Ñ‚Ğ¸Ñ'],
            ['key' => 'transmutation', 'name' => 'ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ'],
        ],

        'level_range' => ['min' => 1, 'max' => 20],

        'combat_rules' => [
            'initiative_type' => 'individual',
            'death_saves' => true,
            'death_save_successes' => 3,
            'death_save_failures' => 3,
            'critical_hit_multiplier' => 'double_dice',
            'rest_types' => ['short', 'long'],
        ],

        'character_creation' => [
            'methods' => ['point_buy', 'standard_array', 'roll'],
            'point_buy_budget' => 27,
            'standard_array' => [15, 14, 13, 12, 10, 8],
            'roll_formula' => '4d6kh3',
        ],

        'currency' => [
            'units' => [
                ['key' => 'cp', 'name' => 'ĞœĞµĞ´Ğ½Ñ‹Ğµ', 'rate' => 1],
                ['key' => 'sp', 'name' => 'Ğ¡ĞµÑ€ĞµĞ±Ñ€ÑĞ½Ñ‹Ğµ', 'rate' => 10],
                ['key' => 'ep', 'name' => 'Ğ­Ğ»ĞµĞºÑ‚Ñ€ÑƒĞ¼Ğ¾Ğ²Ñ‹Ğµ', 'rate' => 50],
                ['key' => 'gp', 'name' => 'Ğ—Ğ¾Ğ»Ğ¾Ñ‚Ñ‹Ğµ', 'rate' => 100],
                ['key' => 'pp', 'name' => 'ĞŸĞ»Ğ°Ñ‚Ğ¸Ğ½Ğ¾Ğ²Ñ‹Ğµ', 'rate' => 1000],
            ],
        ],

        'units' => [
            'system' => 'metric',
            'distance' => 'Ğ¼',
            'weight' => 'ĞºĞ³',
            'grid_cell' => 1.5,  // Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ĞºĞ»ĞµÑ‚ĞºĞµ
            'conversion' => ['ft_to_m' => 0.3, 'mile_to_km' => 1.5, 'lb_to_kg' => 0.45],
        ],
    ]
);
```

**App-level config** (Ğ½Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»):
```php
// config/app-dnd.php â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ, Ğ½Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°
return [
    'locale' => 'ru',
    'default_rule_system' => 'dnd-5e',
    'default_setting' => 'eberron',
];
```

## Security

Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ â€” Ğ½Ğµ Ñ„Ğ¸Ñ‡Ğ°, Ğ° Ñ„ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€, ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ endpoint, ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ WebSocket ĞºĞ°Ğ½Ğ°Ğ» Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ñ‘Ğ½.

### Authentication
- **Laravel Passport** OAuth2 Ñ personal access tokens
- Email verification Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ° (Ğ½ĞµĞ»ÑŒĞ·Ñ Ğ²Ğ¾Ğ¹Ñ‚Ğ¸ Ğ±ĞµĞ· Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ)
- ĞĞºĞºĞ°ÑƒĞ½Ñ‚ `is_active=false` Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ â†’ Owner/DM Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ
- Ğ”ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° â†’ Ğ²ÑĞµ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾ (`tokens()->delete()`)
- Password hashing: bcrypt (Laravel default)

### Authorization â€” ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ÑÑ
```php
// Middleware stack (routes/api.php)
Route::middleware('auth:api')->group(function () {
    // Player routes â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ
    Route::prefix('player')->group(function () { ... });

    // Backoffice â€” auth + Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ¾Ğ»Ğ¸
    Route::middleware('backoffice.access')->prefix('backoffice')->group(function () { ... });
});

// BackofficeAccess middleware
if (!$user->hasAnyRole(['owner', 'dm'])) {
    abort(403);
}

// Campaign-level: Policy
class CampaignPolicy {
    public function view(User $user, Campaign $campaign): bool {
        return $user->id === $campaign->user_id           // DM ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
            || $campaign->players->contains($user->id);    // ĞŸÑ€Ğ¸Ğ³Ğ»Ğ°ÑˆÑ‘Ğ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº
    }
}

// Character-level: Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚ÑŒ
class CharacterPolicy {
    public function update(User $user, Character $character): bool {
        return $user->id === $character->user_id           // Ğ’Ğ»Ğ°Ğ´ĞµĞ»ĞµÑ† Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
            || $user->id === $character->campaign->user_id; // DM ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
    }
}
```

**ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°:**
- Player Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¢ĞĞ›Ğ¬ĞšĞ ÑĞ²Ğ¾Ğ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ¸ Ğ¸ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ ĞºÑƒĞ´Ğ° Ğ¿Ñ€Ğ¸Ğ³Ğ»Ğ°ÑˆÑ‘Ğ½
- Player ĞĞ• Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² (ĞºÑ€Ğ¾Ğ¼Ğµ Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Ğ±Ğ¸Ñ‚Ğ²Ğµ)
- DM Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ²ÑÑ‘ Ğ² ÑĞ²Ğ¾Ğ¸Ñ… ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸ÑÑ…, Ğ½Ğ¾ Ğ½Ğµ Ğ² Ñ‡ÑƒĞ¶Ğ¸Ñ…
- Owner Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ²ÑĞµĞ¼
- ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ CRUD endpoint Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Policy: `$this->authorize('update', $character)`

### WebSocket Security
```php
// channels.php â€” Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ°Ğ½Ğ°Ğ»Ğ¾Ğ²
Broadcast::channel('campaign.{id}', function (User $user, int $id) {
    $campaign = Campaign::findOrFail($id);
    return $campaign->user_id === $user->id
        || $campaign->players->contains($user->id);
});

// ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¹ ĞºĞ°Ğ½Ğ°Ğ» DM â†’ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº
Broadcast::channel('private-character.{id}', function (User $user, int $id) {
    $character = Character::findOrFail($id);
    return $user->id === $character->user_id
        || $user->id === $character->campaign->user_id;
});

// Display ĞºĞ°Ğ½Ğ°Ğ» â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ DM
Broadcast::channel('campaign.{id}.display', function (User $user, int $id) {
    return Campaign::where('id', $id)->where('user_id', $user->id)->exists();
});
```

### Input Validation & Protection
- **Form Requests** Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ endpoint â€” Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ¾ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ğ°
- **JSONB Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ** â€” ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ´Ğ»Ñ abilities, overrides, scene choices
- **Mass assignment** â€” `$fillable` Ğ½Ğ° Ğ²ÑĞµÑ… Ğ¼Ğ¾Ğ´ĞµĞ»ÑÑ…, Ğ½Ğ¸ĞºĞ¾Ğ³Ğ´Ğ° `$guarded = []`
- **SQL injection** â€” Eloquent ORM + parameter binding (Ğ½Ğ¸ĞºĞ¾Ğ³Ğ´Ğ° raw SQL Ğ±ĞµĞ· bindings)
- **XSS** â€” Ğ²ÑĞµ translatable Ğ¿Ğ¾Ğ»Ñ: `strip_tags()` / `htmlspecialchars()` Ğ¿Ñ€Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğ¸
- **Rate limiting** â€” Laravel throttle middleware Ğ½Ğ° auth endpoints (`60/min`), API (`120/min`)
- **File uploads** â€” Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ MIME types, Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ¾Ğ², Spatie MediaLibrary ÑĞ°Ğ½Ğ¸Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ¼Ñ‘Ğ½
- **CORS** â€” Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ frontend Ğ´Ğ¾Ğ¼ĞµĞ½Ğ°

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ Ğ½Ğ°Ğ¸Ğ¼ĞµĞ½ÑŒÑˆĞ¸Ñ… Ğ¿Ñ€Ğ¸Ğ²Ğ¸Ğ»ĞµĞ³Ğ¸Ğ¹
```
guest     â†’ GET  /                        (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ»ĞµĞ½Ğ´Ğ¸Ğ½Ğ³)
player    â†’ GET  /api/v1/player/*         (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)
           â†’ PUT  /api/v1/player/character/* (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¹ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶)
dm        â†’ *    /api/v1/backoffice/*     (CRUD ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°, ÑĞ²Ğ¾Ğ¸Ñ… ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹)
owner     â†’ *    /api/v1/backoffice/*     (Ğ²ÑÑ‘ + ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸ Ğ¸ Ñ€Ğ¾Ğ»ÑĞ¼Ğ¸)
```

## Coding Conventions

### Reference Implementation

Use the XStream project (`C:\Projects\xstream-next`) as reference for:
- Docker setup and configuration
- Laravel API patterns (controllers, models, traits)
- Next.js frontend patterns (layouts, components, contexts)
- DataTable with server-side sorting
- Form handling with validation
- i18n implementation
- Auth flow with Passport
- Coolify deployment config

### From XStream, adopt these patterns:

- `FormatsWithTranslations` trait for translatable models
- API response format: `{ success: true, data: {...}, meta: {...} }`
- Backoffice controller CRUD pattern with search, sort, pagination
- `BackofficeAccess` middleware â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ñ€Ğ¾Ğ»Ğ¸ owner/dm Ğ´Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº `/dashboard/*`
- `config/content.php` for pagination limits
- `config/upload.php` for upload limits
- Auth context pattern for frontend
- API client class pattern
- DataTable + columns.tsx pattern for all backoffice lists
- Dashboard sidebar layout with mobile drawer (Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ¸Ğ· XStream)

### UI Patterns (D&D themed)

**Color Palette:**
```css
--primary: #8B0000;        /* Deep Red â€” primary actions, D&D brand feel */
--secondary: #C9A94E;      /* Gold â€” highlights, important elements */
--background: #1a1a2e;     /* Dark Navy â€” Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ„Ğ¾Ğ½ */
--surface: #16213e;        /* Darker Blue â€” ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸, Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ */
--text: #e0e0e0;           /* Light Gray â€” Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ‚ĞµĞºÑÑ‚ */
--text-muted: #8892a4;     /* Muted â€” Ğ²Ñ‚Ğ¾Ñ€Ğ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ */
--success: #48c715;        /* Green â€” Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ, ÑƒÑĞ¿ĞµÑ… */
--danger: #dc2626;         /* Red â€” ÑƒÑ€Ğ¾Ğ½, Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ */
--warning: #f59e0b;        /* Amber â€” Ğ¿Ñ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ */
--info: #3b82f6;           /* Blue â€” Ğ¼Ğ°Ğ³Ğ¸Ñ, Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ */
```

**Design Principles:**
- Dark theme by default (Ğ² ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğµ Ğ´Ğ»Ñ Ğ¸Ğ³Ñ€Ñ‹ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ³Ğ»ÑƒÑˆÑ‘Ğ½Ğ½Ñ‹Ğ¹ ÑĞ²ĞµÑ‚ â€” Ñ‚Ñ‘Ğ¼Ğ½Ñ‹Ğ¹ UI Ğ½Ğµ ÑĞ»ĞµĞ¿Ğ¸Ñ‚)
- Display client â€” Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑĞºÑ€Ğ°Ğ½Ğ½Ñ‹Ğ¹, ĞºĞ¸Ğ½ĞµĞ¼Ğ°Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ğ¹, ĞĞĞ›Ğ¬ UI ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚)
- Player client â€” **mobile-first**, ĞºĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹, Ğ¾Ğ´Ğ½Ğ° Ñ€ÑƒĞºĞ°, Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ½ÑƒĞ¶Ğ½Ğ¾Ğ¼Ñƒ (Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ»ĞµĞ¶Ğ¸Ñ‚ Ğ½Ğ° ÑÑ‚Ğ¾Ğ»Ğµ Ñ€ÑĞ´Ğ¾Ğ¼ Ñ ĞºÑƒĞ±Ğ¸ĞºĞ°Ğ¼Ğ¸)
- DM client â€” **desktop-first**, Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğµ, Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ¿Ğ°Ğ½ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ (Ğ½Ğ¾ÑƒÑ‚Ğ±ÑƒĞº Ğ¿ĞµÑ€ĞµĞ´ ĞœĞ°ÑÑ‚ĞµÑ€Ğ¾Ğ¼)
- ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ñ ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ¼ â€” Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ´Ñ€ÑƒĞ³ Ğ½Ğ° Ğ´Ñ€ÑƒĞ³Ğ°, Ğ° Ğ½Ğµ Ğ² Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñ‹
- ĞšÑ€ÑƒĞ¿Ğ½Ñ‹Ğµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ¸ Ñ‚ĞµĞºÑÑ‚ Ğ½Ğ° Player client (Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ³Ğ»ÑĞ½ÑƒÑ‚ÑŒ Ğ¸ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº Ğ¸Ğ³Ñ€Ğµ)
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ¸ĞºĞ¾Ğ½ĞºĞ¸ Ğ² ÑÑ‚Ğ¸Ğ»Ğµ Ñ„ÑĞ½Ñ‚ĞµĞ·Ğ¸ Ğ³Ğ´Ğµ ÑƒĞ¼ĞµÑÑ‚Ğ½Ğ¾ (Ğ¼ĞµÑ‡Ğ¸, Ñ‰Ğ¸Ñ‚Ñ‹, ÑĞ²Ğ¸Ñ‚ĞºĞ¸)

### Toast Notifications
```typescript
import { toast } from "@/components/ui/toaster";
toast.success("Character saved!");
toast.error("Spell casting failed");
```

### State Persistence (localStorage)
```
Pattern: dnd-{context}-{purpose}
Examples:
  dnd-player-active-character
  dnd-player-active-campaign
  dnd-dashboard-active-campaign
  dnd-dashboard-battle-state
  dnd-display-settings
```

## Key Packages

### Laravel (apps/api)
- `laravel/passport` â€” OAuth2 authentication
- `laravel/reverb` â€” WebSocket server (first-party, self-hosted)
- `spatie/laravel-permission` â€” Roles and permissions
- `spatie/laravel-activitylog` â€” Audit logging
- `spatie/laravel-medialibrary` â€” Image/audio uploads with conversions
- `spatie/laravel-translatable` â€” Translatable models (ru)

### Next.js (apps/web)
- `next-intl` â€” i18n with locale-based routing
- `@radix-ui/*` â€” Headless UI (shadcn/ui)
- `tailwindcss` v4 + `@tailwindcss/vite` â€” CSS-first styling
- `framer-motion` â€” Animations (scene transitions, dice, pages)
- `@tanstack/react-table` â€” DataTables Ğ² backoffice
- `howler.js` â€” Audio playback Ğ´Ğ»Ñ Display client
- `laravel-echo` + `pusher-js` â€” WebSocket client
- `sonner` â€” Toast notifications
- `lucide-react` â€” Icons
- `@xyflow/react` â€” Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ Ğ´ĞµÑ€ĞµĞ²Ğ° ÑÑ†ĞµĞ½ (drag & drop, nodes, edges)
- `@dnd-kit/core` â€” Drag & drop (initiative order, inventory)
- `react-hook-form` + `zod` â€” Forms Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸ĞµĞ¹

## Media Handling

### Upload Limits
| Type | Limit | Formats |
|------|-------|---------|
| Character portraits | 10MB | JPG, JPEG, WebP, PNG |
| Scene backgrounds | 20MB | JPG, JPEG, WebP, PNG |
| Scene ambient video | 500MB | MP4 |
| Soundtrack audio | 50MB | MP3, OGG, WAV |

### Media Collections (Spatie)
- Character: `portrait` (single, conversions: thumb 200x200, large 600x600)
- Scene: `background` (single, conversions: thumb 400x225, large 1920x1080)
- Scene: `ambient_video` (single, no conversions)
- Monster: `portrait` (single)
- Npc: `portrait` (single)
- Soundtrack: `audio_file` (single)

## Open Gaming License (OGL/SRD)

D&D 5e Ğ¸Ğ¼ĞµĞµÑ‚ Systems Reference Document (SRD) Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¾Ğ¹ Ğ»Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸ĞµĞ¹. ĞœĞ¾Ğ¶Ğ½Ğ¾ ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
- Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° (combat, magic, conditions, etc.)
- ĞĞ´Ğ¸Ğ½ Ğ¿Ğ¾Ğ´ĞºĞ»Ğ°ÑÑ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ĞºĞ»Ğ°ÑÑĞ°
- Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ñ€Ğ°ÑÑ‹ Ğ¸ Ğ¿Ğ¾Ğ´Ñ€Ğ°ÑÑ‹
- ~300 Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğ¹
- ~300 Ğ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ¾Ğ²
- Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ ÑĞ½Ğ°Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ

**Ğ’ĞµÑÑŒ SRD ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¸Ğ¹** Ñ ĞºĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ² Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ÑƒÑÑ‚Ğ¾ÑĞ²ÑˆĞ¸ĞµÑÑ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‹ D&D Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¸Ğ¹ (ÑĞ¼. Ñ€Ğ°Ğ·Ğ´ĞµĞ» Â«Ğ›Ğ¾ĞºĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ D&D Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹ĞºÂ»).

**Ğ’ĞĞ–ĞĞ:** ĞĞ• Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ¸Ğ· Ğ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ñ… ĞºĞ½Ğ¸Ğ³ (PHB, DMG, MM beyond SRD). Ğ’ĞµÑÑŒ SRD ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ ÑĞ¸Ğ´Ğ¸Ñ‚ÑÑ Ğ² Ğ±Ğ°Ğ·Ñƒ Ğ¸ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ Eberron. Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° DM ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑĞ²Ğ¾Ğ¸ ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ¸. Ğ”Ğ»Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ¸Ğ³Ñ€Ğ¾Ğ²Ñ‹Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼ (Warhammer, Savage Worlds) DM ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ½Ğ¾Ğ²ÑƒÑ RuleSystem Ñ Ğ½ÑƒĞ»Ñ.

## Environment Files

### Local Development
- `apps/api/.env` â€” Laravel config (copy from `.env.example`)
- `apps/web/.env.local` â€” Next.js config (copy from `.env.local.example`)

### Production
- `apps/api/.env.prod` â€” Non-secret API settings (committed to repo)
- `apps/web/.env.prod` â€” Non-secret Web settings for Coolify

## Deployment

Platform: **Coolify** with Git integration (Caddy proxy) on AWS.
Ğ’ÑĞµ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ÑÑ‚ÑÑ Ğº ÑĞµÑ€Ğ²ĞµÑ€Ñƒ Ñ‡ĞµÑ€ĞµĞ· Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚ â€” Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ Ğ²ĞµĞ±-ÑĞ°Ğ¹Ñ‚.

### CORS: Handled by Caddy proxy (Coolify), NOT Laravel.
```php
// config/cors.php â†’ paths => []
```

### Coolify Applications

| App | Domain | Dockerfile | Port |
|-----|--------|-----------|------|
| DnD API | api.dnd.yourdomain.com | apps/api/Dockerfile | 8000 |
| DnD Web | dnd.yourdomain.com | apps/web/Dockerfile | 3000 |

### Coolify Secrets
```
APP_KEY, DB_HOST, DB_USERNAME, DB_PASSWORD
REDIS_HOST, REDIS_PASSWORD
AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY
PASSPORT_PRIVATE_KEY_BASE64, PASSPORT_PUBLIC_KEY_BASE64
OWNER_NAME, OWNER_EMAIL, OWNER_PASSWORD
```

## Development Priority

### Phase 1 â€” MVP (Player Client + Basic DM)
1. Auth system (login, register, email verification, role: owner/dm/player)
2. Landing page (ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ´Ğ»Ñ Ğ³Ğ¾ÑÑ‚ĞµĞ¹, Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°, ĞºĞ½Ğ¾Ğ¿ĞºĞ° Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸)
3. Backoffice skeleton (sidebar layout, user management â€” owner Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ², Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚ DM)
4. RuleSystem + Setting models (D&D 5e + Eberron ÑĞ¸Ğ´ÑÑ‚ÑÑ Ğ¸Ğ· ĞºĞ¾Ñ€Ğ¾Ğ±ĞºĞ¸)
5. DM: Campaign CRUD Ğ² backoffice (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ, Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ñƒ, Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸, Ğ¿Ñ€Ğ¸Ğ³Ğ»Ğ°ÑˆĞµĞ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²)
6. DM: Acts & Sessions management (Ğ°ĞºÑ‚Ñ‹ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€ÑƒÑÑ‚ ÑĞµÑÑĞ¸Ğ¸, CRUD)
7. Character creation wizard (Ñ€Ğ°ÑĞ°, ĞºĞ»Ğ°ÑÑ, Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, ÑĞ½Ğ°Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ â€” Ğ¿Ğ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ğ¾, Ñ Ğ¸Ğ»Ğ»ÑÑÑ‚Ñ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸, ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ¸Ğ· ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ° ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸)
8. Character sheet view (Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸, ĞĞ—, ĞšĞ” â€” ĞºÑ€ÑƒĞ¿Ğ½Ğ¾, Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ğ¾ Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°)
9. Dice roller (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾), Spell book (Ğ¿Ğ¾Ğ¸ÑĞº, Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹), Inventory management
10. DM: Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ² backoffice

### Phase 2 â€” Battle, Content & Scene Tree
1. Battle tracker Ğ² backoffice (Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ğ°, HP, ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ, Ñ…Ğ¾Ğ´Ñ‹ â€” DM ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚, Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ Ğ²Ğ¸Ğ´ÑÑ‚)
2. WebSocket Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
3. Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ Ğ´ĞµÑ€ĞµĞ²Ğ° ÑÑ†ĞµĞ½ (@xyflow/react â€” drag & drop, Ğ²ĞµÑ‚Ğ²Ğ»ĞµĞ½Ğ¸Ñ, ÑĞ²ÑĞ·Ğ¸)
4. DM: Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ¾Ğ¼ (CRUD Ğ¼Ğ¾Ğ½ÑÑ‚Ñ€Ñ‹, Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ, Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹ + Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ°Ğ¼ + overrides)
5. DM: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… ÑĞµÑ‚Ñ‚Ğ¸Ğ½Ğ³Ğ¾Ğ² Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»
6. DM: Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ÑÑ‚ĞµĞ¹, NPC, encounter builder
7. Level up flow Ğ´Ğ»Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹
8. ĞšĞ»Ğ°Ğ´Ğ±Ğ¸Ñ‰Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶ĞµĞ¹ (death tracking, ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°)

### Phase 3 â€” Display Client (ğŸ“º Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ ÑĞºÑ€Ğ°Ğ½)
1. Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ†ĞµĞ½Ğ°Ğ¼Ğ¸ Ğ² backoffice (Ñ„Ğ¾Ğ½Ñ‹, Ğ¾ÑĞ²ĞµÑ‰ĞµĞ½Ğ¸Ğµ, ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹)
2. ĞœÑƒĞ·Ñ‹ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ»ĞµĞµÑ€ (ambient + combat + custom, Ğ¿Ğ»Ğ°Ğ²Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹)
3. Display client (fullscreen scene renderer Ğ´Ğ»Ñ Ğ¢Ğ’/Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ°)
4. Ğ­ĞºÑ€Ğ°Ğ½Ñ‹ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ² ÑÑ‚Ğ¸Ğ»Ğµ CRPG (Pillars of Eternity / Baldur's Gate)
5. ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ±Ğ¸Ñ‚Ğ²Ñ‹ Ğ½Ğ° Ğ¢Ğ’ (Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ñ‚Ğ¸Ğ²Ñ‹, Ñ‡ĞµĞ¹ Ñ…Ğ¾Ğ´)
6. Display Remote Ğ² backoffice (Ğ¿ÑƒĞ»ÑŒÑ‚ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¢Ğ’ â€” ÑÑ†ĞµĞ½Ğ°, Ğ¼ÑƒĞ·Ñ‹ĞºĞ°, Ñ‚ĞµĞºÑÑ‚, Ğ·Ğ°Ñ‚ĞµĞ¼Ğ½ĞµĞ½Ğ¸Ğµ)

### Phase 4 â€” Polish
1. ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ñ‹Ğµ Ñ„Ğ¸Ñ‡Ğ¸ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° (Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸ĞºĞ»Ğ°ÑÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, Ñ‡ĞµÑ€Ñ‚Ñ‹)
2. Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ homebrew ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° (ÑĞ²Ğ¾Ğ¸ Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ, Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹, Ğ¼Ğ¾Ğ½ÑÑ‚Ñ€Ñ‹)
3. Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚/Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
4. Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑĞµÑÑĞ¸Ğ¹ Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
5. ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Player client Ğ´Ğ»Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¾Ğ² (Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿, Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ¸Ğ½Ğ³Ğ°)
6. Landing page (Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°, Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

## Gotchas & Solutions

Refer to the XStream project's CLAUDE.md and PROJECT_BOOTSTRAP_GUIDE.md for all known issues with:
- Docker & local development
- AWS S3 & CloudFront
- Coolify & production deployment
- Laravel API patterns
- Next.js frontend patterns
- Media handling
- CI/CD

The same patterns and solutions apply to this project.

## Code Quality

### PHP Standards (PHP 8.4)
- Typed class constants: `public const string STATUS_ACTIVE = 'active';`
- Readonly properties where applicable
- Import classes â€” avoid fully qualified names
- Arrow functions for simple closures

### TypeScript/React Standards
- Import React types explicitly (not `React.ReactNode`)
- Handle ignored promises with `void` operator
- React 19 ref pattern (no `forwardRef`)
- `readonly` for immutable class fields

### Pre-Commit Checks
```bash
npm run lint && npm run build && docker exec dnd_api php artisan test
```
