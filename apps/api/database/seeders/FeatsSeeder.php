<?php

namespace Database\Seeders;

use App\Models\Feat;
use App\Models\Setting;
use Illuminate\Database\Seeder;

class FeatsSeeder extends Seeder
{
    public function run(): void
    {
        $eberron = Setting::where('slug', 'eberron')->first();

        $feats = $this->getFeats();

        $count = 0;
        foreach ($feats as $featData) {
            $feat = Feat::updateOrCreate(
                ['slug' => $featData['slug']],
                $featData
            );

            if ($eberron) {
                $feat->settings()->syncWithoutDetaching([$eberron->id]);
            }
            $count++;
        }

        $this->command->info("Feats seeded: {$count}");
    }

    private function getFeats(): array
    {
        return array_merge(
            $this->getCombatFeats(),
            $this->getGeneralFeats(),
            $this->getMagicFeats(),
            $this->getSkillFeats()
        );
    }

    private function getCombatFeats(): array
    {
        return [
            [
                'slug' => 'alert',
                'name' => ['ru' => 'Бдительность'],
                'description' => ['ru' => 'Вы всегда на чеку и вас сложно застать врасплох. Вы получаете бонус +5 к инициативе. Вас нельзя застать врасплох, пока вы в сознании. Другие существа не получают преимущество на броски атаки по вам за счёт того, что вы их не видите.'],
                'prerequisites' => null,
                'benefits' => [
                    'initiative_bonus' => 5,
                    'features' => [
                        ['name' => 'Нельзя застать врасплох', 'description' => 'Вас нельзя застать врасплох, пока вы в сознании'],
                        ['name' => 'Без преимущества от невидимости', 'description' => 'Другие существа не получают преимущество на броски атаки по вам за счёт того, что вы их не видите'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'great-weapon-master',
                'name' => ['ru' => 'Мастер большого оружия'],
                'description' => ['ru' => 'Вы научились вкладывать в удары большим оружием вес своего тела, жертвуя точностью ради силы. При попадании критическим ударом рукопашным оружием или уменьшении хитов существа рукопашной атакой тяжёлым оружием до 0, вы можете бонусным действием совершить ещё одну рукопашную атаку этим оружием. Перед совершением рукопашной атаки тяжёлым оружием с которым вы владеете, вы можете выбрать штраф −5 к броску атаки. Если атака попадает, вы причиняете дополнительный урон +10.'],
                'prerequisites' => null,
                'benefits' => [
                    'features' => [
                        ['name' => 'Бонусная атака', 'description' => 'При критическом попадании или уменьшении хитов до 0 — бонусная атака'],
                        ['name' => 'Мощный удар', 'description' => '−5 к атаке для +10 к урону'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'sharpshooter',
                'name' => ['ru' => 'Меткий стрелок'],
                'description' => ['ru' => 'Вы освоили дальнобойное оружие и можете совершать невозможные выстрелы. Атака дальнобойным оружием игнорирует укрытие на половину и на три четверти. Атака дальнобойным оружием на дальней дистанции не совершается с помехой. Перед совершением атаки дальнобойным оружием, которым вы владеете, вы можете получить штраф −5 к броску атаки. Если атака попадает, вы причиняете дополнительный урон +10.'],
                'prerequisites' => null,
                'benefits' => [
                    'features' => [
                        ['name' => 'Игнорирование укрытия', 'description' => 'Игнорируете укрытие на половину и три четверти'],
                        ['name' => 'Без помехи на дальней дистанции', 'description' => 'Атака на дальней дистанции без помехи'],
                        ['name' => 'Мощный выстрел', 'description' => '−5 к атаке для +10 к урону'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'polearm-master',
                'name' => ['ru' => 'Мастер древкового оружия'],
                'description' => ['ru' => 'Вы можете держать противников на расстоянии древковым оружием. Когда вы совершаете действие Атака и атакуете только глефой, алебардой, боевым посохом или пикой, вы можете бонусным действием совершить рукопашную атаку обратным концом оружия. Урон этой атаки — 1d4 + модификатор Силы. Пока вы держите глефу, алебарду, пику, боевой посох или копьё, другие существа провоцируют атаку возможности, когда входят в вашу досягаемость.'],
                'prerequisites' => null,
                'benefits' => [
                    'features' => [
                        ['name' => 'Бонусная атака', 'description' => 'Бонусная атака обратным концом древкового оружия (1d4)'],
                        ['name' => 'Расширенная провокация', 'description' => 'Провокация атаки возможности при входе в вашу досягаемость'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'sentinel',
                'name' => ['ru' => 'Страж'],
                'description' => ['ru' => 'Вы овладели техникой использования преимуществ каждой бреши в защите врага. Когда вы попадаете по существу атакой возможности, его скорость становится равной 0 до конца этого хода. Существа провоцируют от вас атаки возможности, даже если совершили действие Отход перед тем, как покинуть вашу досягаемость. Когда существо, которое вы видите, в пределах 1,5 метров от вас атакует не вас, а другую цель, вы можете реакцией совершить рукопашную атаку по атакующему существу.'],
                'prerequisites' => null,
                'benefits' => [
                    'features' => [
                        ['name' => 'Остановка', 'description' => 'Попадание атакой возможности снижает скорость до 0'],
                        ['name' => 'Игнорирование Отхода', 'description' => 'Провокация атаки возможности даже после действия Отход'],
                        ['name' => 'Защита союзников', 'description' => 'Реакция на атаку по союзнику рядом'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'shield-master',
                'name' => ['ru' => 'Мастер щита'],
                'description' => ['ru' => 'Вы используете щиты не только для защиты, но и для нападения. Если вы совершаете действие Атака в свой ход, вы можете бонусным действием попытаться оттолкнуть щитом существо в пределах 1,5 метров. Если вы не находитесь под действием недееспособности, вы можете добавить бонус КД от щита ко всем спасброскам Ловкости от заклинаний и других вредоносных эффектов, нацеленных только на вас. Если вы подвергаетесь эффекту, позволяющему пройти спасбросок Ловкости и получить только половину урона, вы можете реакцией не получить урона совсем, если преуспели в спасброске.'],
                'prerequisites' => null,
                'benefits' => [
                    'features' => [
                        ['name' => 'Толчок щитом', 'description' => 'Бонусное действие — оттолкнуть щитом'],
                        ['name' => 'Защита от заклинаний', 'description' => 'Бонус КД от щита к спасброскам Ловкости'],
                        ['name' => 'Уклонение', 'description' => 'Реакция — нет урона при успешном спасброске Ловкости'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'dual-wielder',
                'name' => ['ru' => 'Боец двумя оружиями'],
                'description' => ['ru' => 'Вы мастерски владеете боем двумя оружиями. Вы получаете бонус +1 к КД, когда используете по отдельному рукопашному оружию в каждой руке. Вы можете использовать бой двумя оружиями, даже если эти оружия не являются лёгкими. Вы можете извлечь или убрать два одноручных оружия, когда обычно вы можете извлечь или убрать только одно.'],
                'prerequisites' => null,
                'benefits' => [
                    'ac_bonus' => 1,
                    'features' => [
                        ['name' => 'Бонус к КД', 'description' => '+1 КД при бое двумя оружиями'],
                        ['name' => 'Нет ограничения на лёгкое оружие', 'description' => 'Бой двумя одноручными оружиями'],
                        ['name' => 'Быстрое извлечение', 'description' => 'Извлечение двух оружий одним действием'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'defensive-duelist',
                'name' => ['ru' => 'Защитный дуэлянт'],
                'description' => ['ru' => 'Когда вы используете лёгкое оружие, которым владеете, в одной руке и другое существо попадает по вам рукопашной атакой, вы можете реакцией добавить свой бонус мастерства к КД для этой атаки, потенциально превращая попадание в промах.'],
                'prerequisites' => ['ability' => ['dexterity' => 13]],
                'benefits' => [
                    'features' => [
                        ['name' => 'Парирование', 'description' => 'Реакция — добавить бонус мастерства к КД от атаки'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'crossbow-expert',
                'name' => ['ru' => 'Эксперт по арбалетам'],
                'description' => ['ru' => 'Благодаря обширной практике с арбалетами вы получаете следующие преимущества: Вы игнорируете свойство «перезарядка» арбалетов, которыми владеете. Нахождение в пределах 1,5 метров от враждебного существа не накладывает помеху на ваши дальнобойные атаки. Когда вы совершаете действие Атака и атакуете одноручным оружием, вы можете бонусным действием атаковать заряженным ручным арбалетом, который держите.'],
                'prerequisites' => null,
                'benefits' => [
                    'features' => [
                        ['name' => 'Игнорирование перезарядки', 'description' => 'Игнорируете свойство «перезарядка» арбалетов'],
                        ['name' => 'Стрельба в ближнем бою', 'description' => 'Нет помехи на дальнобойные атаки в ближнем бою'],
                        ['name' => 'Бонусная атака', 'description' => 'Бонусная атака ручным арбалетом'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'mobile',
                'name' => ['ru' => 'Мобильность'],
                'description' => ['ru' => 'Вы исключительно быстры и подвижны. Ваша скорость увеличивается на 3 метра. Когда вы используете действие Рывок, труднопроходимая местность не требует дополнительного перемещения в этот ход. Когда вы совершаете рукопашную атаку по существу, вы не провоцируете от этого существа атаку возможности до конца этого хода, независимо от того, попали или нет.'],
                'prerequisites' => null,
                'benefits' => [
                    'speed_bonus' => 3,
                    'features' => [
                        ['name' => 'Увеличение скорости', 'description' => '+3 м к скорости'],
                        ['name' => 'Игнорирование труднопроходимой местности', 'description' => 'При Рывке — без замедления'],
                        ['name' => 'Выход из боя', 'description' => 'После атаки не провоцируете атаку возможности от цели'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'tough',
                'name' => ['ru' => 'Стойкость'],
                'description' => ['ru' => 'Ваши хиты увеличиваются на количество, равное удвоенному уровню, когда вы получаете эту черту. Каждый раз, когда вы получаете уровень после этого, ваш максимум хитов увеличивается на дополнительные 2 хита.'],
                'prerequisites' => null,
                'benefits' => [
                    'hp_per_level' => 2,
                    'features' => [
                        ['name' => 'Дополнительные хиты', 'description' => '+2 хита за каждый уровень'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'charger',
                'name' => ['ru' => 'Натиск'],
                'description' => ['ru' => 'Когда вы используете действие Рывок, вы можете бонусным действием совершить одну рукопашную атаку оружием или оттолкнуть существо. Если вы перемещались по прямой минимум на 3 метра непосредственно перед совершением этого бонусного действия, вы либо получаете бонус +5 к броску урона атаки (если вы выбрали совершение рукопашной атаки и попали), либо отталкиваете цель на 3 метра от себя (если вы выбрали оттолкнуть и преуспели).'],
                'prerequisites' => null,
                'benefits' => [
                    'features' => [
                        ['name' => 'Атака после Рывка', 'description' => 'Бонусное действие — атака или толчок после Рывка'],
                        ['name' => 'Мощный натиск', 'description' => '+5 урона или толчок на 3 м при разбеге от 3 м'],
                    ],
                ],
                'is_system' => true,
            ],
        ];
    }

    private function getGeneralFeats(): array
    {
        return [
            [
                'slug' => 'lucky',
                'name' => ['ru' => 'Везение'],
                'description' => ['ru' => 'У вас есть необъяснимая удачливость, которая срабатывает именно тогда, когда это нужно. У вас есть 3 очка удачи. Каждый раз, когда вы совершаете бросок атаки, проверку характеристики или спасбросок, вы можете потратить одно очко удачи для броска дополнительного d20. Вы можете использовать очко удачи после совершения исходного броска, но до объявления результата. Вы выбираете, какой из d20 использовать. Вы также можете потратить очко удачи, когда по вам совершается бросок атаки. Бросьте d20 и выберите, какой из d20 используется для атаки. Если несколько существ использует удачу на один бросок, они взаимно компенсируются и дополнительные кубики не бросаются. Вы восстанавливаете потраченные очки удачи, когда заканчиваете продолжительный отдых.'],
                'prerequisites' => null,
                'benefits' => [
                    'luck_points' => 3,
                    'features' => [
                        ['name' => 'Очки удачи', 'description' => '3 очка удачи, восстанавливаются после продолжительного отдыха'],
                        ['name' => 'Перебросить d20', 'description' => 'Потратьте очко для броска дополнительного d20'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'resilient',
                'name' => ['ru' => 'Устойчивость'],
                'description' => ['ru' => 'Выберите одну характеристику. Вы получаете следующие преимущества: Увеличьте выбранную характеристику на 1, до максимума 20. Вы получаете владение спасбросками этой характеристики.'],
                'prerequisites' => null,
                'benefits' => [
                    'ability_increase' => ['amount' => 1, 'choice' => true],
                    'saving_throw_proficiency' => ['choice' => true],
                    'features' => [
                        ['name' => 'Увеличение характеристики', 'description' => '+1 к выбранной характеристике'],
                        ['name' => 'Владение спасброском', 'description' => 'Владение спасброском выбранной характеристики'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'observant',
                'name' => ['ru' => 'Наблюдательность'],
                'description' => ['ru' => 'Быстрый в наблюдении деталей вашего окружения, вы получаете следующие преимущества: Увеличьте Интеллект или Мудрость на 1, до максимума 20. Если вы видите губы существа, когда оно говорит на языке, который вы понимаете, вы можете понять, что оно говорит, читая по губам. Вы получаете бонус +5 к пассивной Внимательности и пассивному Расследованию.'],
                'prerequisites' => null,
                'benefits' => [
                    'ability_increase' => ['options' => ['intelligence', 'wisdom'], 'amount' => 1],
                    'passive_bonus' => 5,
                    'features' => [
                        ['name' => 'Чтение по губам', 'description' => 'Понимание речи по движению губ'],
                        ['name' => 'Острый взгляд', 'description' => '+5 к пассивной Внимательности и Расследованию'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'inspiring-leader',
                'name' => ['ru' => 'Вдохновляющий лидер'],
                'description' => ['ru' => 'Вы можете потратить 10 минут на вдохновляющую речь, укрепляющую дух ваших товарищей. Когда вы это делаете, выберите до шести дружественных существ (включая, возможно, себя) в пределах 9 метров от вас, которые могут видеть или слышать вас и понимать вас. Каждое существо получает временные хиты, равные вашему уровню + ваш модификатор Харизмы. Существо не может снова получить временные хиты от этой черты, пока не завершит короткий или продолжительный отдых.'],
                'prerequisites' => ['ability' => ['charisma' => 13]],
                'benefits' => [
                    'features' => [
                        ['name' => 'Вдохновляющая речь', 'description' => '10 минут — до 6 существ получают временные хиты = уровень + модификатор Харизмы'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'actor',
                'name' => ['ru' => 'Актёр'],
                'description' => ['ru' => 'Опытный в мимикрии и драматургии, вы получаете следующие преимущества: Увеличьте Харизму на 1, до максимума 20. Вы совершаете с преимуществом проверки Обмана и Выступления, когда пытаетесь выдать себя за другого. Вы можете имитировать речь другого существа или звуки, издаваемые другими существами. Вы должны были слышать это существо говорящим или издающим звук хотя бы 1 минуту. Успешная проверка Проницательности, противопоставленная вашей проверке Обмана, позволяет слушателю определить, что эффект сымитирован.'],
                'prerequisites' => null,
                'benefits' => [
                    'ability_increase' => ['ability' => 'charisma', 'amount' => 1],
                    'features' => [
                        ['name' => 'Маскировка', 'description' => 'Преимущество на Обман и Выступление при перевоплощении'],
                        ['name' => 'Имитация', 'description' => 'Имитация голоса и звуков существ'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'athlete',
                'name' => ['ru' => 'Атлет'],
                'description' => ['ru' => 'Вы прошли обширную физическую подготовку и получаете следующие преимущества: Увеличьте Силу или Ловкость на 1, до максимума 20. Когда вы сбиты с ног, подъём требует только 1,5 метра перемещения. Лазание не требует от вас дополнительного перемещения. Вы можете совершить прыжок в длину с разбега или прыжок в высоту с разбега, разбежавшись только на 1,5 метра, а не на 3 метра.'],
                'prerequisites' => null,
                'benefits' => [
                    'ability_increase' => ['options' => ['strength', 'dexterity'], 'amount' => 1],
                    'features' => [
                        ['name' => 'Быстрый подъём', 'description' => 'Подъём требует только 1,5 м перемещения'],
                        ['name' => 'Ловкий скалолаз', 'description' => 'Лазание без дополнительных затрат перемещения'],
                        ['name' => 'Прыжок с места', 'description' => 'Прыжок с разбега требует только 1,5 м'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'durable',
                'name' => ['ru' => 'Выносливость'],
                'description' => ['ru' => 'Выносливый и закалённый, вы получаете следующие преимущества: Увеличьте Телосложение на 1, до максимума 20. Когда вы бросаете Кость Здоровья для восстановления хитов, минимальное количество восстановленных хитов равно удвоенному модификатору Телосложения (минимум 2).'],
                'prerequisites' => null,
                'benefits' => [
                    'ability_increase' => ['ability' => 'constitution', 'amount' => 1],
                    'features' => [
                        ['name' => 'Улучшенное восстановление', 'description' => 'Минимум 2×модификатор ТЕЛ хитов от Кости Здоровья'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'healer',
                'name' => ['ru' => 'Целитель'],
                'description' => ['ru' => 'Вы умелый врач, способный быстро обработать раны и вернуть товарищей в строй. Когда вы используете набор целителя для стабилизации умирающего существа, это существо также восстанавливает 1 хит. Вы можете действием использовать одно применение набора целителя, чтобы оказать помощь существу и восстановить ему 1d6+4 хита плюс дополнительные хиты, равные максимальному количеству Костей Здоровья существа. Существо не может снова получить хиты от этой черты, пока не завершит короткий или продолжительный отдых.'],
                'prerequisites' => null,
                'benefits' => [
                    'features' => [
                        ['name' => 'Стабилизация с лечением', 'description' => 'Стабилизация восстанавливает 1 хит'],
                        ['name' => 'Полевая медицина', 'description' => '1d6+4 + макс. Костей Здоровья существа хитов'],
                    ],
                ],
                'is_system' => true,
            ],
        ];
    }

    private function getMagicFeats(): array
    {
        return [
            [
                'slug' => 'war-caster',
                'name' => ['ru' => 'Боевой маг'],
                'description' => ['ru' => 'Вы практиковались в использовании магии в бою. Вы совершаете с преимуществом спасброски Телосложения для поддержания концентрации на заклинании, когда получаете урон. Вы можете выполнять соматические компоненты заклинаний, даже если в одной или обеих руках у вас оружие или щит. Когда враждебное существо провоцирует от вас атаку возможности, вы можете реакцией наложить на существо заклинание, а не совершить рукопашную атаку. Время накладывания заклинания должно быть равно 1 действию, и заклинание должно быть нацелено только на это существо.'],
                'prerequisites' => ['spellcasting' => true],
                'benefits' => [
                    'features' => [
                        ['name' => 'Концентрация', 'description' => 'Преимущество на спасброски Телосложения для концентрации'],
                        ['name' => 'Колдовство со щитом', 'description' => 'Соматические компоненты с оружием или щитом в руках'],
                        ['name' => 'Заклинание возможности', 'description' => 'Реакция — заклинание вместо атаки возможности'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'spell-sniper',
                'name' => ['ru' => 'Меткое заклинание'],
                'description' => ['ru' => 'Вы изучили техники для улучшения атак определёнными видами заклинаний. Когда вы накладываете заклинание, требующее броска атаки, дальность заклинания удваивается. Ваши заклинания, требующие броска атаки, игнорируют укрытие на половину и на три четверти. Вы изучаете один заговор, требующий броска атаки. Выберите заговор из списка заклинаний барда, жреца, друида, чародея, колдуна или волшебника. Заклинательная характеристика для этого заговора зависит от выбранного списка.'],
                'prerequisites' => ['spellcasting' => true],
                'benefits' => [
                    'cantrip' => ['choice' => true, 'attack_roll_required' => true],
                    'features' => [
                        ['name' => 'Удвоенная дальность', 'description' => 'Удвоенная дальность заклинаний с броском атаки'],
                        ['name' => 'Игнорирование укрытия', 'description' => 'Игнорирование укрытия на половину и три четверти'],
                        ['name' => 'Дополнительный заговор', 'description' => 'Заговор с броском атаки из любого списка'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'elemental-adept',
                'name' => ['ru' => 'Мастер стихий'],
                'description' => ['ru' => 'Когда вы получаете эту черту, выберите один из следующих типов урона: звук, кислота, молния, огонь или холод. Заклинания, которые вы накладываете, игнорируют сопротивление выбранному типу урона. Кроме того, когда вы бросаете урон для наложенного заклинания, причиняющего урон этого типа, вы можете считать любую выпавшую 1 на кубике урона результатом 2.'],
                'prerequisites' => ['spellcasting' => true],
                'benefits' => [
                    'damage_type_choice' => ['acid', 'cold', 'fire', 'lightning', 'thunder'],
                    'features' => [
                        ['name' => 'Игнорирование сопротивления', 'description' => 'Игнорирование сопротивления выбранному типу урона'],
                        ['name' => 'Минимальный урон', 'description' => '1 на кубике урона считается за 2'],
                    ],
                ],
                'repeatable' => true,
                'is_system' => true,
            ],
            [
                'slug' => 'ritual-caster',
                'name' => ['ru' => 'Ритуальный заклинатель'],
                'description' => ['ru' => 'Вы изучили ряд заклинаний, которые можете накладывать как ритуалы. Эти заклинания записаны в ритуальную книгу, которую вы должны иметь при себе, когда накладываете их. Когда вы выбираете эту черту, вы приобретаете ритуальную книгу с двумя заклинаниями 1-го уровня на ваш выбор. Выберите один из следующих классов: бард, жрец, друид, чародей, колдун или волшебник. Вы должны выбрать заклинания из списка заклинаний этого класса, и у выбранных заклинаний должна быть метка ритуала. Заклинательная характеристика для этих заклинаний — Интеллект, Мудрость или Харизма (ваш выбор при получении этой черты).'],
                'prerequisites' => ['ability' => ['intelligence' => 13], 'or' => [['ability' => ['wisdom' => 13]]]],
                'benefits' => [
                    'ritual_book' => true,
                    'ritual_spells' => 2,
                    'features' => [
                        ['name' => 'Ритуальная книга', 'description' => 'Книга с 2 ритуальными заклинаниями 1-го уровня'],
                        ['name' => 'Изучение ритуалов', 'description' => 'Можно добавлять найденные ритуальные заклинания'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'magic-initiate',
                'name' => ['ru' => 'Посвящённый в магию'],
                'description' => ['ru' => 'Выберите класс: бард, жрец, друид, чародей, колдун или волшебник. Вы изучаете два заговора на ваш выбор из списка заклинаний этого класса. Кроме того, выберите одно заклинание 1-го уровня из этого же списка. Вы изучаете это заклинание и можете накладывать его на самом низком уровне. Использовав это заклинание, вы должны закончить продолжительный отдых, прежде чем сможете наложить его снова. Заклинательная характеристика для этих заклинаний зависит от выбранного класса.'],
                'prerequisites' => null,
                'benefits' => [
                    'cantrips' => 2,
                    'spell_1st_level' => 1,
                    'features' => [
                        ['name' => 'Два заговора', 'description' => '2 заговора из выбранного списка'],
                        ['name' => 'Заклинание 1-го уровня', 'description' => '1 заклинание 1-го уровня, 1 раз в день'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'metamagic-adept',
                'name' => ['ru' => 'Знаток метамагии'],
                'description' => ['ru' => 'Вы изучили, как влиять на заклинания тонкими, но действенными способами. Вы изучаете два параметра Метамагии на ваш выбор из класса чародея. Вы можете использовать только один параметр Метамагии на заклинание, если только параметр не указывает иное. Когда вы получаете уровень, вы можете заменить один из известных вам параметров Метамагии на другой. У вас есть 2 очка чародейства для траты на Метамагию (эти очки добавляются к любым очкам чародейства, которые у вас есть из другого источника, но могут быть использованы только на Метамагию). Вы восстанавливаете все потраченные очки чародейства, когда заканчиваете продолжительный отдых.'],
                'prerequisites' => ['spellcasting' => true],
                'benefits' => [
                    'metamagic_options' => 2,
                    'sorcery_points' => 2,
                    'features' => [
                        ['name' => 'Метамагия', 'description' => '2 параметра Метамагии'],
                        ['name' => 'Очки чародейства', 'description' => '2 очка для Метамагии'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'fey-touched',
                'name' => ['ru' => 'Прикосновение фей'],
                'description' => ['ru' => 'Ваше воздействие с магией Страны Фей изменило вас, даровав следующие преимущества: Увеличьте Интеллект, Мудрость или Харизму на 1, до максимума 20. Вы изучаете заклинание туманный шаг и одно заклинание 1-го уровня на ваш выбор. Заклинание 1-го уровня должно быть из школы очарования или прорицания. Вы можете наложить каждое из этих заклинаний без траты ячейки заклинания. Использовав заклинание таким образом, вы должны закончить продолжительный отдых, прежде чем сможете снова наложить его таким образом. Вы также можете накладывать эти заклинания, используя ячейки заклинаний соответствующего уровня.'],
                'prerequisites' => null,
                'benefits' => [
                    'ability_increase' => ['options' => ['intelligence', 'wisdom', 'charisma'], 'amount' => 1],
                    'spells' => ['misty-step'],
                    'spell_choice' => ['level' => 1, 'schools' => ['enchantment', 'divination']],
                    'features' => [
                        ['name' => 'Туманный шаг', 'description' => 'Бесплатно 1 раз в день'],
                        ['name' => 'Заклинание 1-го уровня', 'description' => '1 заклинание очарования или прорицания'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'shadow-touched',
                'name' => ['ru' => 'Прикосновение тени'],
                'description' => ['ru' => 'Ваше воздействие с магией Царства Теней изменило вас, даровав следующие преимущества: Увеличьте Интеллект, Мудрость или Харизму на 1, до максимума 20. Вы изучаете заклинание невидимость и одно заклинание 1-го уровня на ваш выбор. Заклинание 1-го уровня должно быть из школы некромантии или иллюзии. Вы можете наложить каждое из этих заклинаний без траты ячейки заклинания. Использовав заклинание таким образом, вы должны закончить продолжительный отдых, прежде чем сможете снова наложить его таким образом. Вы также можете накладывать эти заклинания, используя ячейки заклинаний соответствующего уровня.'],
                'prerequisites' => null,
                'benefits' => [
                    'ability_increase' => ['options' => ['intelligence', 'wisdom', 'charisma'], 'amount' => 1],
                    'spells' => ['invisibility'],
                    'spell_choice' => ['level' => 1, 'schools' => ['necromancy', 'illusion']],
                    'features' => [
                        ['name' => 'Невидимость', 'description' => 'Бесплатно 1 раз в день'],
                        ['name' => 'Заклинание 1-го уровня', 'description' => '1 заклинание некромантии или иллюзии'],
                    ],
                ],
                'is_system' => true,
            ],
        ];
    }

    private function getSkillFeats(): array
    {
        return [
            [
                'slug' => 'skilled',
                'name' => ['ru' => 'Умелый'],
                'description' => ['ru' => 'Вы получаете владение любой комбинацией из трёх навыков или инструментов на ваш выбор.'],
                'prerequisites' => null,
                'benefits' => [
                    'proficiency_choices' => 3,
                    'features' => [
                        ['name' => 'Три владения', 'description' => '3 навыка или инструмента на выбор'],
                    ],
                ],
                'repeatable' => true,
                'is_system' => true,
            ],
            [
                'slug' => 'skill-expert',
                'name' => ['ru' => 'Эксперт в навыках'],
                'description' => ['ru' => 'Вы отточили свои способности до совершенства. Увеличьте одну характеристику на ваш выбор на 1, до максимума 20. Вы получаете владение одним навыком на ваш выбор. Выберите один навык, которым вы владеете. Вы получаете экспертизу в этом навыке, что означает удвоение бонуса мастерства для любой проверки характеристики с этим навыком.'],
                'prerequisites' => null,
                'benefits' => [
                    'ability_increase' => ['choice' => true, 'amount' => 1],
                    'skill_proficiency' => 1,
                    'skill_expertise' => 1,
                    'features' => [
                        ['name' => 'Увеличение характеристики', 'description' => '+1 к любой характеристике'],
                        ['name' => 'Владение навыком', 'description' => '1 новый навык'],
                        ['name' => 'Экспертиза', 'description' => 'Удвоенный бонус в одном навыке'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'prodigy',
                'name' => ['ru' => 'Вундеркинд'],
                'description' => ['ru' => 'Вы обладаете талантом к изучению нового. Вы получаете владение одним навыком на ваш выбор, владение одним инструментом на ваш выбор и свободное владение одним языком на ваш выбор. Выберите один навык, которым вы владеете. Вы получаете экспертизу в этом навыке.'],
                'prerequisites' => ['race' => ['human', 'half-elf', 'half-orc']],
                'benefits' => [
                    'skill_proficiency' => 1,
                    'tool_proficiency' => 1,
                    'language' => 1,
                    'skill_expertise' => 1,
                    'features' => [
                        ['name' => 'Навык', 'description' => 'Владение одним навыком'],
                        ['name' => 'Инструмент', 'description' => 'Владение одним инструментом'],
                        ['name' => 'Язык', 'description' => '1 дополнительный язык'],
                        ['name' => 'Экспертиза', 'description' => 'Удвоенный бонус в одном навыке'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'keen-mind',
                'name' => ['ru' => 'Острый ум'],
                'description' => ['ru' => 'Вы обладаете умом, который может отслеживать время, направление и детали с невероятной точностью. Вы получаете следующие преимущества: Увеличьте Интеллект на 1, до максимума 20. Вы всегда знаете, какой путь на север. Вы всегда знаете, сколько часов осталось до следующего восхода или заката. Вы можете точно вспомнить всё, что видели или слышали в течение последнего месяца.'],
                'prerequisites' => null,
                'benefits' => [
                    'ability_increase' => ['ability' => 'intelligence', 'amount' => 1],
                    'features' => [
                        ['name' => 'Компас', 'description' => 'Всегда знаете направление на север'],
                        ['name' => 'Часы', 'description' => 'Знаете время до восхода/заката'],
                        ['name' => 'Память', 'description' => 'Помните всё за последний месяц'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'linguist',
                'name' => ['ru' => 'Лингвист'],
                'description' => ['ru' => 'Вы изучили языки и шифры и получаете следующие преимущества: Увеличьте Интеллект на 1, до максимума 20. Вы изучаете три языка на ваш выбор. Вы можете ловко создавать письменные шифры. Другие не могут расшифровать созданный вами шифр, если вы их не научите, они не преуспеют в проверке Интеллекта (Сложность равна вашему значению Интеллекта + ваш бонус мастерства), или не используют магию для его расшифровки.'],
                'prerequisites' => null,
                'benefits' => [
                    'ability_increase' => ['ability' => 'intelligence', 'amount' => 1],
                    'languages' => 3,
                    'features' => [
                        ['name' => 'Три языка', 'description' => '3 дополнительных языка'],
                        ['name' => 'Шифрование', 'description' => 'Создание шифров, Сложность = ИНТ + бонус мастерства'],
                    ],
                ],
                'is_system' => true,
            ],
            [
                'slug' => 'dungeon-delver',
                'name' => ['ru' => 'Исследователь подземелий'],
                'description' => ['ru' => 'Привыкший к разгадыванию ловушек и тайных дверей в подземельях, вы получаете следующие преимущества: Вы совершаете с преимуществом проверки Внимательности и Расследования, совершаемые для обнаружения присутствия тайных дверей. Вы совершаете с преимуществом спасброски против ловушек. Вы получаете сопротивление урону, причиняемому ловушками. Вы можете искать ловушки во время путешествия в нормальном темпе, а не только в медленном.'],
                'prerequisites' => null,
                'benefits' => [
                    'features' => [
                        ['name' => 'Поиск дверей', 'description' => 'Преимущество на обнаружение тайных дверей'],
                        ['name' => 'Защита от ловушек', 'description' => 'Преимущество на спасброски от ловушек'],
                        ['name' => 'Сопротивление ловушкам', 'description' => 'Сопротивление урону от ловушек'],
                        ['name' => 'Быстрый поиск', 'description' => 'Поиск ловушек в нормальном темпе'],
                    ],
                ],
                'is_system' => true,
            ],
        ];
    }
}
