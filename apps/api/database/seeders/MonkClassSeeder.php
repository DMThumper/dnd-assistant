<?php

namespace Database\Seeders;

use App\Models\CharacterClass;
use App\Models\Setting;
use Illuminate\Database\Seeder;

class MonkClassSeeder extends Seeder
{
    public function run(): void
    {
        $eberron = Setting::where('slug', 'eberron')->first();
        $forgottenRealms = Setting::where('slug', 'forgotten-realms')->first();

        // Update base monk class with complete data
        $monk = CharacterClass::updateOrCreate(
            ['slug' => 'monk'],
            $this->getMonkClass()
        );

        // Attach to settings
        if ($eberron) {
            $monk->settings()->syncWithoutDetaching([$eberron->id]);
        }
        if ($forgottenRealms) {
            $monk->settings()->syncWithoutDetaching([$forgottenRealms->id]);
        }

        // Seed subclasses
        $subclasses = $this->getSubclasses();
        foreach ($subclasses as $data) {
            $subclass = CharacterClass::updateOrCreate(
                ['slug' => $data['slug']],
                array_merge($data, [
                    'hit_die' => 'd8',
                    'is_spellcaster' => false,
                    'is_system' => true,
                ])
            );

            if ($eberron) {
                $subclass->settings()->syncWithoutDetaching([$eberron->id]);
            }
            if ($forgottenRealms) {
                $subclass->settings()->syncWithoutDetaching([$forgottenRealms->id]);
            }
        }

        $this->command->info('Monk class seeded: base class + ' . count($subclasses) . ' subclasses');
    }

    private function getMonkClass(): array
    {
        return [
            'slug' => 'monk',
            'name' => ['ru' => 'Монах'],
            'description' => ['ru' => 'Мастер боевых искусств, использующий силу тела для достижения физического и духовного совершенства. Монахи черпают магическую энергию ки, проходящую через всё живое.'],
            'hit_die' => 'd8',
            'primary_abilities' => ['dexterity', 'wisdom'],
            'saving_throws' => ['strength', 'dexterity'],
            'armor_proficiencies' => [],
            'weapon_proficiencies' => ['simple', 'shortsword'],
            'tool_proficiencies' => ['choice:artisan_tool_or_musical_instrument'],
            'skill_choices' => 2,
            'skill_options' => ['acrobatics', 'athletics', 'history', 'insight', 'religion', 'stealth'],
            'starting_equipment' => [
                ['choice' => true, 'options' => [
                    [['item' => 'shortsword', 'qty' => 1]],
                    [['item' => 'simple_weapon', 'qty' => 1]],
                ]],
                ['choice' => true, 'options' => [
                    [['item' => 'dungeoneer_pack', 'qty' => 1]],
                    [['item' => 'explorer_pack', 'qty' => 1]],
                ]],
                ['item' => 'dart', 'qty' => 10],
            ],
            'starting_gold_formula' => '5d4',
            'level_features' => [
                '1' => [
                    ['key' => 'unarmored_defense', 'name' => 'Защита без доспехов', 'description' => 'Без доспехов ваш КД равен 10 + модификатор Ловкости + модификатор Мудрости.', 'type' => 'feature'],
                    ['key' => 'martial_arts', 'name' => 'Боевые искусства', 'description' => 'Владея монашеским оружием и будучи без доспехов: вы можете использовать Ловкость вместо Силы для атак и урона, можете бросать кость боевых искусств вместо обычного урона, и после действия Атака можете совершить безоружный удар бонусным действием.', 'type' => 'feature'],
                ],
                '2' => [
                    ['key' => 'ki', 'name' => 'Ки', 'description' => 'Вы получаете доступ к мистической энергии ки. Количество очков ки равно вашему уровню монаха. Вы восстанавливаете все очки ки после короткого или продолжительного отдыха.', 'type' => 'resource', 'amount' => 'level', 'recharge' => 'short_rest'],
                    ['key' => 'flurry_of_blows', 'name' => 'Шквал ударов', 'description' => 'Сразу после действия Атака вы можете потратить 1 очко ки, чтобы совершить два безоружных удара бонусным действием.', 'type' => 'feature', 'cost' => '1 ki'],
                    ['key' => 'patient_defense', 'name' => 'Терпеливая оборона', 'description' => 'Вы можете потратить 1 очко ки, чтобы совершить действие Уклонение бонусным действием.', 'type' => 'feature', 'cost' => '1 ki'],
                    ['key' => 'step_of_the_wind', 'name' => 'Шаг ветра', 'description' => 'Вы можете потратить 1 очко ки, чтобы совершить действие Отход или Рывок бонусным действием, и ваша дистанция прыжка удваивается в этом ходу.', 'type' => 'feature', 'cost' => '1 ki'],
                    ['key' => 'unarmored_movement', 'name' => 'Передвижение без доспехов', 'description' => 'Ваша скорость увеличивается на 3 метра, если вы не носите доспехи и не используете щит.', 'type' => 'feature'],
                ],
                '3' => [
                    ['key' => 'monastic_tradition', 'name' => 'Монастырская традиция', 'description' => 'Выберите монастырскую традицию, определяющую ваш путь.', 'type' => 'subclass'],
                    ['key' => 'deflect_missiles', 'name' => 'Отражение снарядов', 'description' => 'Реакцией вы можете отклонить или поймать снаряд, уменьшая урон на 1d10 + модификатор Ловкости + уровень монаха. Если урон снижен до 0, вы можете поймать снаряд и бросить его обратно за 1 очко ки (дальность 6/18 м, урон как от безоружного удара + кость боевых искусств).', 'type' => 'feature'],
                ],
                '4' => [
                    ['key' => 'ability_score_improvement', 'name' => 'Увеличение характеристик', 'description' => 'Увеличьте одну характеристику на 2 или две характеристики на 1, или возьмите черту.', 'type' => 'asi'],
                    ['key' => 'slow_fall', 'name' => 'Медленное падение', 'description' => 'Реакцией при падении вы можете уменьшить урон от падения на величину, равную вашему уровню монаха × 5.', 'type' => 'feature'],
                ],
                '5' => [
                    ['key' => 'extra_attack', 'name' => 'Дополнительная атака', 'description' => 'Когда вы совершаете действие Атака, вы можете атаковать дважды.', 'type' => 'feature'],
                    ['key' => 'stunning_strike', 'name' => 'Ошеломляющий удар', 'description' => 'Когда вы попадаете по существу рукопашной атакой оружием, вы можете потратить 1 очко ки, чтобы попытаться оглушить цель. Цель должна преуспеть в спасброске Телосложения или будет ошеломлена до конца вашего следующего хода.', 'type' => 'feature', 'cost' => '1 ki'],
                ],
                '6' => [
                    ['key' => 'ki_empowered_strikes', 'name' => 'Удары, усиленные ки', 'description' => 'Ваши безоружные удары считаются магическими для преодоления сопротивления и иммунитета к немагическим атакам и урону.', 'type' => 'feature'],
                    ['key' => 'unarmored_movement_improvement', 'name' => 'Улучшенное передвижение', 'description' => 'Ваша скорость без доспехов увеличивается до +4,5 метров.', 'type' => 'improvement'],
                ],
                '7' => [
                    ['key' => 'evasion', 'name' => 'Уклонение', 'description' => 'Когда вы подвергаетесь эффекту, требующему спасброска Ловкости для получения половины урона, вы не получаете урон при успехе и получаете только половину при провале.', 'type' => 'feature'],
                    ['key' => 'stillness_of_mind', 'name' => 'Спокойствие разума', 'description' => 'Вы можете действием прекратить один эффект, делающий вас очарованным или испуганным.', 'type' => 'feature'],
                ],
                '8' => [
                    ['key' => 'ability_score_improvement_8', 'name' => 'Увеличение характеристик', 'description' => 'Увеличьте одну характеристику на 2 или две характеристики на 1, или возьмите черту.', 'type' => 'asi'],
                ],
                '9' => [
                    ['key' => 'unarmored_movement_vertical', 'name' => 'Вертикальное передвижение', 'description' => 'Вы можете перемещаться по вертикальным поверхностям и по жидкостям, не падая, пока движетесь.', 'type' => 'improvement'],
                ],
                '10' => [
                    ['key' => 'purity_of_body', 'name' => 'Чистота тела', 'description' => 'Вы получаете иммунитет к болезням и яду.', 'type' => 'feature'],
                    ['key' => 'unarmored_movement_10', 'name' => 'Улучшенное передвижение', 'description' => 'Ваша скорость без доспехов увеличивается до +6 метров.', 'type' => 'improvement'],
                ],
                '11' => [
                    ['key' => 'martial_arts_d8', 'name' => 'Боевые искусства (d8)', 'description' => 'Ваша кость боевых искусств становится d8.', 'type' => 'improvement'],
                ],
                '12' => [
                    ['key' => 'ability_score_improvement_12', 'name' => 'Увеличение характеристик', 'description' => 'Увеличьте одну характеристику на 2 или две характеристики на 1, или возьмите черту.', 'type' => 'asi'],
                ],
                '13' => [
                    ['key' => 'tongue_of_sun_and_moon', 'name' => 'Язык солнца и луны', 'description' => 'Вы понимаете все разговорные языки. Кроме того, любое существо, понимающее язык, может понять то, что вы говорите.', 'type' => 'feature'],
                ],
                '14' => [
                    ['key' => 'diamond_soul', 'name' => 'Алмазная душа', 'description' => 'Вы получаете владение всеми спасбросками. Кроме того, при провале спасброска вы можете потратить 1 очко ки, чтобы перебросить и использовать новый результат.', 'type' => 'feature', 'cost' => '1 ki'],
                    ['key' => 'unarmored_movement_14', 'name' => 'Улучшенное передвижение', 'description' => 'Ваша скорость без доспехов увеличивается до +7,5 метров.', 'type' => 'improvement'],
                ],
                '15' => [
                    ['key' => 'timeless_body', 'name' => 'Безвременное тело', 'description' => 'Ваше ки питает ваше тело и вы не страдаете от немощи старости. Вы также не можете быть состарены магически. Вам всё ещё нужна еда и вода.', 'type' => 'feature'],
                ],
                '16' => [
                    ['key' => 'ability_score_improvement_16', 'name' => 'Увеличение характеристик', 'description' => 'Увеличьте одну характеристику на 2 или две характеристики на 1, или возьмите черту.', 'type' => 'asi'],
                ],
                '17' => [
                    ['key' => 'martial_arts_d10', 'name' => 'Боевые искусства (d10)', 'description' => 'Ваша кость боевых искусств становится d10.', 'type' => 'improvement'],
                ],
                '18' => [
                    ['key' => 'empty_body', 'name' => 'Пустое тело', 'description' => 'Действием за 4 очка ки вы становитесь невидимым на 1 минуту, получая сопротивление всему урону кроме силового. За 8 очков ки вы можете сотворить Проекцию в астрал без компонентов.', 'type' => 'feature', 'cost' => '4 ki'],
                    ['key' => 'unarmored_movement_18', 'name' => 'Улучшенное передвижение', 'description' => 'Ваша скорость без доспехов увеличивается до +9 метров.', 'type' => 'improvement'],
                ],
                '19' => [
                    ['key' => 'ability_score_improvement_19', 'name' => 'Увеличение характеристик', 'description' => 'Увеличьте одну характеристику на 2 или две характеристики на 1, или возьмите черту.', 'type' => 'asi'],
                ],
                '20' => [
                    ['key' => 'perfect_self', 'name' => 'Совершенство', 'description' => 'В начале боя, если у вас нет очков ки, вы восстанавливаете 4 очка ки.', 'type' => 'feature'],
                ],
            ],
            'progression' => [
                '1' => ['proficiency_bonus' => 2, 'martial_arts' => 'd4', 'ki_points' => 0, 'unarmored_movement' => 0],
                '2' => ['proficiency_bonus' => 2, 'martial_arts' => 'd4', 'ki_points' => 2, 'unarmored_movement' => 3],
                '3' => ['proficiency_bonus' => 2, 'martial_arts' => 'd4', 'ki_points' => 3, 'unarmored_movement' => 3],
                '4' => ['proficiency_bonus' => 2, 'martial_arts' => 'd4', 'ki_points' => 4, 'unarmored_movement' => 3],
                '5' => ['proficiency_bonus' => 3, 'martial_arts' => 'd6', 'ki_points' => 5, 'unarmored_movement' => 3],
                '6' => ['proficiency_bonus' => 3, 'martial_arts' => 'd6', 'ki_points' => 6, 'unarmored_movement' => 4.5],
                '7' => ['proficiency_bonus' => 3, 'martial_arts' => 'd6', 'ki_points' => 7, 'unarmored_movement' => 4.5],
                '8' => ['proficiency_bonus' => 3, 'martial_arts' => 'd6', 'ki_points' => 8, 'unarmored_movement' => 4.5],
                '9' => ['proficiency_bonus' => 4, 'martial_arts' => 'd6', 'ki_points' => 9, 'unarmored_movement' => 4.5],
                '10' => ['proficiency_bonus' => 4, 'martial_arts' => 'd6', 'ki_points' => 10, 'unarmored_movement' => 6],
                '11' => ['proficiency_bonus' => 4, 'martial_arts' => 'd8', 'ki_points' => 11, 'unarmored_movement' => 6],
                '12' => ['proficiency_bonus' => 4, 'martial_arts' => 'd8', 'ki_points' => 12, 'unarmored_movement' => 6],
                '13' => ['proficiency_bonus' => 5, 'martial_arts' => 'd8', 'ki_points' => 13, 'unarmored_movement' => 6],
                '14' => ['proficiency_bonus' => 5, 'martial_arts' => 'd8', 'ki_points' => 14, 'unarmored_movement' => 7.5],
                '15' => ['proficiency_bonus' => 5, 'martial_arts' => 'd8', 'ki_points' => 15, 'unarmored_movement' => 7.5],
                '16' => ['proficiency_bonus' => 5, 'martial_arts' => 'd8', 'ki_points' => 16, 'unarmored_movement' => 7.5],
                '17' => ['proficiency_bonus' => 6, 'martial_arts' => 'd10', 'ki_points' => 17, 'unarmored_movement' => 7.5],
                '18' => ['proficiency_bonus' => 6, 'martial_arts' => 'd10', 'ki_points' => 18, 'unarmored_movement' => 9],
                '19' => ['proficiency_bonus' => 6, 'martial_arts' => 'd10', 'ki_points' => 19, 'unarmored_movement' => 9],
                '20' => ['proficiency_bonus' => 6, 'martial_arts' => 'd10', 'ki_points' => 20, 'unarmored_movement' => 9],
            ],
            'is_spellcaster' => false,
            'subclass_level' => '3',
            'subclass_name' => ['ru' => 'Монастырская традиция'],
            'is_system' => true,
            'sort_order' => 6,
        ];
    }

    private function getSubclasses(): array
    {
        return [
            // WAY OF THE OPEN HAND
            [
                'slug' => 'way-of-the-open-hand',
                'name' => ['ru' => 'Путь Открытой Ладони'],
                'parent_slug' => 'monk',
                'description' => ['ru' => 'Монахи Пути Открытой Ладони — непревзойдённые мастера боевых искусств в бою без оружия и с оружием. Они изучают техники, которые позволяют им толкать и сбивать противников, а также исцелять себя.'],
                'level_features' => [
                    '3' => [
                        ['key' => 'open_hand_technique', 'name' => 'Техника открытой ладони', 'description' => 'Когда вы попадаете по существу одной из атак Шквала ударов, вы можете наложить один из следующих эффектов: сбить с ног (спасбросок Ловкости), оттолкнуть на 4,5 м (спасбросок Силы), или лишить реакции до конца вашего следующего хода (без спасброска).'],
                    ],
                    '6' => [
                        ['key' => 'wholeness_of_body', 'name' => 'Целостность тела', 'description' => 'Действием вы можете восстановить хиты в количестве, равном троекратному уровню монаха. Использование восстанавливается после продолжительного отдыха.', 'uses_per_rest' => 1, 'recharge' => 'long_rest'],
                    ],
                    '11' => [
                        ['key' => 'tranquility', 'name' => 'Безмятежность', 'description' => 'В конце продолжительного отдыха вы получаете эффект заклинания Убежище, действующий до начала следующего продолжительного отдыха. СЛ спасброска равна 8 + модификатор Мудрости + бонус мастерства.'],
                    ],
                    '17' => [
                        ['key' => 'quivering_palm', 'name' => 'Дрожащая ладонь', 'description' => 'Когда вы попадаете по существу безоружным ударом, вы можете потратить 3 очка ки, чтобы создать незаметные вибрации в его теле на количество дней, равное вашему уровню монаха. Действием вы можете прекратить вибрации: существо должно совершить спасбросок Телосложения. При провале его хиты падают до 0, при успехе — получает 10d10 некротического урона.', 'cost' => '3 ki'],
                    ],
                ],
            ],

            // WAY OF SHADOW
            [
                'slug' => 'way-of-shadow',
                'name' => ['ru' => 'Путь Тени'],
                'parent_slug' => 'monk',
                'description' => ['ru' => 'Монахи Пути Тени следуют традиции, ценящей скрытность и хитрость. Эти монахи могут называться ниндзя или теневыми танцорами, и они служат шпионами и убийцами.'],
                'level_features' => [
                    '3' => [
                        ['key' => 'shadow_arts', 'name' => 'Теневые искусства', 'description' => 'Вы можете использовать ки для создания магических эффектов. За 2 очка ки вы можете сотворить: Тьма, Тёмное зрение, Бесшумность или Малая иллюзия. Малую иллюзию можно творить без траты ки.', 'cost' => '2 ki'],
                    ],
                    '6' => [
                        ['key' => 'shadow_step', 'name' => 'Теневой шаг', 'description' => 'Бонусным действием, находясь в тусклом освещении или темноте, вы можете телепортироваться на 18 метров в другое пространство в тусклом освещении или темноте. После этого вы получаете преимущество на первую рукопашную атаку в этот ход.'],
                    ],
                    '11' => [
                        ['key' => 'cloak_of_shadows', 'name' => 'Плащ теней', 'description' => 'Находясь в тусклом освещении или темноте, вы можете действием стать невидимым. Невидимость длится до тех пор, пока вы не совершите атаку, не сотворите заклинание или не окажетесь в ярком свете.'],
                    ],
                    '17' => [
                        ['key' => 'opportunist', 'name' => 'Оппортунист', 'description' => 'Когда существо в пределах 1,5 метра от вас получает урон от атаки другого существа (не вас), вы можете реакцией совершить рукопашную атаку по этому существу.'],
                    ],
                ],
            ],

            // WAY OF THE FOUR ELEMENTS
            [
                'slug' => 'way-of-four-elements',
                'name' => ['ru' => 'Путь Четырёх Стихий'],
                'parent_slug' => 'monk',
                'description' => ['ru' => 'Монахи Пути Четырёх Стихий обучаются направлять стихийные силы, подчиняя своему ки огонь, воду, землю и воздух.'],
                'level_features' => [
                    '3' => [
                        ['key' => 'disciple_of_elements', 'name' => 'Ученик стихий', 'description' => 'Вы изучаете магические дисциплины, использующие ки для создания стихийных эффектов. Вы знаете дисциплину Стихийная настройка и одну дисциплину на выбор. На 6, 11 и 17 уровнях вы изучаете дополнительные дисциплины.'],
                        ['key' => 'elemental_attunement', 'name' => 'Стихийная настройка', 'description' => 'Действием вы можете создать один из эффектов: безвредное сенсорное проявление стихии, мгновенно зажечь или потушить свечу/факел, охладить или нагреть до 0,5 кг вещества на 1 час, создать фигуру из стихии (куб до 30 см).'],
                    ],
                    '6' => [
                        ['key' => 'elemental_discipline_6', 'name' => 'Дополнительная дисциплина', 'description' => 'Вы изучаете одну дополнительную стихийную дисциплину. При получении этой способности вы также можете заменить одну известную дисциплину на другую.', 'type' => 'choice'],
                    ],
                    '11' => [
                        ['key' => 'elemental_discipline_11', 'name' => 'Дополнительная дисциплина', 'description' => 'Вы изучаете одну дополнительную стихийную дисциплину. При получении этой способности вы также можете заменить одну известную дисциплину на другую.', 'type' => 'choice'],
                    ],
                    '17' => [
                        ['key' => 'elemental_discipline_17', 'name' => 'Дополнительная дисциплина', 'description' => 'Вы изучаете одну дополнительную стихийную дисциплину. При получении этой способности вы также можете заменить одну известную дисциплину на другую.', 'type' => 'choice'],
                    ],
                ],
            ],

            // WAY OF THE LONG DEATH
            [
                'slug' => 'way-of-the-long-death',
                'name' => ['ru' => 'Путь Долгой Смерти'],
                'parent_slug' => 'monk',
                'description' => ['ru' => 'Монахи Пути Долгой Смерти одержимы смыслом и механикой умирания. Они получают мрачные знания, наблюдая за переходом существ из жизни в смерть, и используют эту мудрость в бою.'],
                'level_features' => [
                    '3' => [
                        ['key' => 'touch_of_death', 'name' => 'Прикосновение смерти', 'description' => 'Когда вы уменьшаете хиты существа до 0 в пределах 1,5 м от вас, вы получаете временные хиты, равные вашему модификатору Мудрости + уровень монаха (минимум 1).'],
                    ],
                    '6' => [
                        ['key' => 'hour_of_reaping', 'name' => 'Час жатвы', 'description' => 'Действием вы можете заставить каждое существо в пределах 9 м, которое вас видит, совершить спасбросок Мудрости или стать испуганным вами до конца вашего следующего хода.'],
                    ],
                    '11' => [
                        ['key' => 'mastery_of_death', 'name' => 'Власть над смертью', 'description' => 'Когда ваши хиты падают до 0, вы можете потратить 1 очко ки (реакция не требуется), чтобы вместо этого иметь 1 хит.', 'cost' => '1 ki'],
                    ],
                    '17' => [
                        ['key' => 'touch_of_long_death', 'name' => 'Прикосновение долгой смерти', 'description' => 'Действием вы можете коснуться существа и потратить 1-10 очков ки. Цель совершает спасбросок Телосложения. При провале получает 2d10 некротического урона за каждое потраченное очко ки. При успехе — половина.', 'cost' => '1-10 ki'],
                    ],
                ],
            ],

            // WAY OF THE SUN SOUL
            [
                'slug' => 'way-of-the-sun-soul',
                'name' => ['ru' => 'Путь Солнечной Души'],
                'parent_slug' => 'monk',
                'description' => ['ru' => 'Монахи Пути Солнечной Души учатся направлять собственную жизненную энергию в испепеляющие лучи света. Они верят, что достигнут просветления, высвободив сияние своей души.'],
                'level_features' => [
                    '3' => [
                        ['key' => 'radiant_sun_bolt', 'name' => 'Луч сияющего солнца', 'description' => 'Вы получаете дальнобойную атаку заклинанием (дальность 9 м). Бонус атаки равен модификатору Ловкости + бонус мастерства, урон равен кости боевых искусств + модификатор Ловкости сияющего урона. При действии Атака вы можете потратить 1 очко ки, чтобы совершить две дополнительные атаки лучом бонусным действием.', 'cost' => '1 ki'],
                    ],
                    '6' => [
                        ['key' => 'searing_arc_strike', 'name' => 'Удар палящей дуги', 'description' => 'Сразу после действия Атака вы можете потратить 2 очка ки, чтобы сотворить Огненные ладони как бонусное действие. Вы можете потратить дополнительные очки ки, чтобы усилить заклинание (1 очко за уровень, максимум 3 очка).', 'cost' => '2+ ki'],
                    ],
                    '11' => [
                        ['key' => 'searing_sunburst', 'name' => 'Палящая вспышка', 'description' => 'Действием вы создаёте сферу света с радиусом 6 м в точке в пределах 45 м. Существа в сфере совершают спасбросок Телосложения. При провале получают 2d6 сияющего урона. При успехе — половина. Вы можете потратить 1-3 очка ки, чтобы добавить 2d6 урона за каждое очко.', 'cost' => '0-3 ki'],
                    ],
                    '17' => [
                        ['key' => 'sun_shield', 'name' => 'Солнечный щит', 'description' => 'Вы излучаете яркий свет в радиусе 9 м и тусклый свет ещё на 9 м. Бонусным действием вы можете отключить или включить свет. Пока свет активен, когда существо попадает по вам рукопашной атакой, оно получает сияющий урон, равный 5 + модификатор Мудрости.'],
                    ],
                ],
            ],

            // WAY OF THE DRUNKEN MASTER
            [
                'slug' => 'way-of-drunken-master',
                'name' => ['ru' => 'Путь Пьяного Мастера'],
                'parent_slug' => 'monk',
                'description' => ['ru' => 'Путь Пьяного Мастера учит использовать непредсказуемые, шатающиеся движения пьяницы в бою. Пьяный мастер сбивает противников с толку своей неустойчивой походкой, а затем наносит точный удар.'],
                'level_features' => [
                    '3' => [
                        ['key' => 'bonus_proficiencies', 'name' => 'Дополнительное владение', 'description' => 'Вы получаете владение Выступлением и набором пивовара.'],
                        ['key' => 'drunken_technique', 'name' => 'Техника пьяницы', 'description' => 'Когда вы используете Шквал ударов, вы получаете преимущества действия Отход, и ваша скорость передвижения увеличивается на 3 метра до конца хода.'],
                    ],
                    '6' => [
                        ['key' => 'tipsy_sway', 'name' => 'Пьяное покачивание', 'description' => 'Прыжок с места: длина и высота прыжка увеличиваются, как при разбеге. Перенаправление промаха: когда существо промахивается по вам рукопашной атакой, вы можете реакцией потратить 1 очко ки, чтобы эта атака попала по другому существу в пределах 1,5 м от вас (кроме атакующего).', 'cost' => '1 ki'],
                    ],
                    '11' => [
                        ['key' => 'drunkards_luck', 'name' => 'Удача пьяницы', 'description' => 'Когда вы совершаете проверку характеристики, бросок атаки или спасбросок и имеете помеху, вы можете потратить 2 очка ки, чтобы отменить помеху для этого броска.', 'cost' => '2 ki'],
                    ],
                    '17' => [
                        ['key' => 'intoxicated_frenzy', 'name' => 'Опьянённое безумие', 'description' => 'Когда вы используете Шквал ударов, вы можете совершить до трёх дополнительных атак (всего пять атак Шквалом), при условии, что каждая из этих атак направлена по разным целям.'],
                    ],
                ],
            ],

            // WAY OF THE KENSEI
            [
                'slug' => 'way-of-kensei',
                'name' => ['ru' => 'Путь Кенсея'],
                'parent_slug' => 'monk',
                'description' => ['ru' => 'Монахи Пути Кенсея рассматривают своё оружие как продолжение собственного тела. Они совершенствуют мастерство владения оружием до такой степени, что оно становится единым целым с их телом.'],
                'level_features' => [
                    '3' => [
                        ['key' => 'path_of_kensei', 'name' => 'Путь кенсея', 'description' => 'Выберите 2 типа оружия в качестве оружия кенсея (одно рукопашное и одно дальнобойное, не может быть тяжёлым или особым). Вы владеете этим оружием, и оно считается монашеским для вас.'],
                        ['key' => 'agile_parry', 'name' => 'Ловкое парирование', 'description' => 'Если вы совершаете безоружный удар как часть действия Атака, держа оружие кенсея в руке, вы получаете +2 к КД до начала следующего хода.'],
                        ['key' => 'kensei_shot', 'name' => 'Выстрел кенсея', 'description' => 'Бонусным действием вы можете добавить 1d4 к урону дальнобойных атак оружием кенсея в этом ходу.'],
                        ['key' => 'way_of_brush', 'name' => 'Путь кисти', 'description' => 'Вы получаете владение набором каллиграфа или художника.'],
                    ],
                    '6' => [
                        ['key' => 'one_with_blade', 'name' => 'Единство с клинком', 'description' => 'Ваши атаки оружием кенсея считаются магическими. Кроме того, за 1 очко ки при попадании оружием кенсея вы можете добавить к урону кость боевых искусств (Точный удар).', 'cost' => '1 ki'],
                    ],
                    '11' => [
                        ['key' => 'sharpen_blade', 'name' => 'Заточка клинка', 'description' => 'Бонусным действием потратьте 1-3 очка ки, чтобы ваше оружие кенсея получило бонус к атаке и урону, равный потраченным очкам, на 1 минуту.', 'cost' => '1-3 ki'],
                    ],
                    '17' => [
                        ['key' => 'unerring_accuracy', 'name' => 'Безошибочная точность', 'description' => 'Если вы промахиваетесь броском атаки оружием монаха в свой ход, вы можете перебросить его. Можно использовать один раз за ход.'],
                    ],
                ],
            ],

            // WAY OF MERCY
            [
                'slug' => 'way-of-mercy',
                'name' => ['ru' => 'Путь Милосердия'],
                'parent_slug' => 'monk',
                'description' => ['ru' => 'Монахи Пути Милосердия учатся манипулировать жизненной силой других, неся исцеление нуждающимся и страдание врагам. Они носят маски, скрывающие их лица.'],
                'level_features' => [
                    '3' => [
                        ['key' => 'implements_of_mercy', 'name' => 'Инструменты милосердия', 'description' => 'Вы получаете владение Проницательностью и Медициной, а также набором травника.'],
                        ['key' => 'hand_of_healing', 'name' => 'Рука исцеления', 'description' => 'Действием потратьте 1 очко ки, чтобы коснуться существа и восстановить ему хиты, равные броску кости боевых искусств + модификатор Мудрости. При Шквале ударов можно заменить один удар на исцеление без дополнительной траты ки.', 'cost' => '1 ki'],
                        ['key' => 'hand_of_harm', 'name' => 'Рука вреда', 'description' => 'Когда вы попадаете по существу безоружным ударом, потратьте 1 очко ки, чтобы нанести дополнительный некротический урон, равный броску кости боевых искусств + модификатор Мудрости. Можно использовать раз в ход.', 'cost' => '1 ki'],
                    ],
                    '6' => [
                        ['key' => 'physicians_touch', 'name' => 'Прикосновение целителя', 'description' => 'Когда вы используете Руку исцеления, вы также можете снять одно из состояний: отравлен, ослеплён, оглушён, парализован, испуган или болезнь. Когда вы используете Руку вреда, цель должна совершить спасбросок Телосложения или будет отравлена до конца вашего следующего хода.'],
                    ],
                    '11' => [
                        ['key' => 'flurry_of_healing_and_harm', 'name' => 'Шквал исцеления и вреда', 'description' => 'При Шквале ударов вы можете заменить каждый удар на использование Руки исцеления (без траты ки). Кроме того, при Шквале ударов Рука вреда не стоит ки.'],
                    ],
                    '17' => [
                        ['key' => 'hand_of_ultimate_mercy', 'name' => 'Рука высшего милосердия', 'description' => 'Действием коснитесь трупа существа, умершего за последние 24 часа. Потратьте 5 очков ки, чтобы вернуть его к жизни с хитами, равными 4d10 + модификатор Мудрости. Существо избавляется от всех состояний. Раз за продолжительный отдых.', 'cost' => '5 ki'],
                    ],
                ],
            ],

            // WAY OF THE ASTRAL SELF
            [
                'slug' => 'way-of-astral-self',
                'name' => ['ru' => 'Путь Астрального Я'],
                'parent_slug' => 'monk',
                'description' => ['ru' => 'Монахи Пути Астрального Я видят своё тело как иллюзию. Они сосредотачиваются на своём астральном я — полупрозрачной форме, которая представляет их истинную сущность.'],
                'level_features' => [
                    '3' => [
                        ['key' => 'arms_of_astral_self', 'name' => 'Руки астрального я', 'description' => 'Бонусным действием потратьте 1 очко ки, чтобы призвать руки вашего астрального я на 10 минут. Руки имеют досягаемость 3 м, наносят урон силой (кость боевых искусств), и вы можете использовать Мудрость вместо Силы/Ловкости для атак и проверок. Существа в пределах 3 м при призыве совершают спасбросок Ловкости или получают 2d× урона силой (× = ваш модификатор Мудрости).', 'cost' => '1 ki'],
                    ],
                    '6' => [
                        ['key' => 'visage_of_astral_self', 'name' => 'Лик астрального я', 'description' => 'Бонусным действием потратьте 1 очко ки (или призовите вместе с руками), чтобы призвать лик на 10 минут. Астральное зрение: тёмное зрение 36 м. Мудрость прозорливости: преимущество на Проницательность и Запугивание. Астральный голос: ваш голос слышен на 180 м.', 'cost' => '1 ki'],
                    ],
                    '11' => [
                        ['key' => 'body_of_astral_self', 'name' => 'Тело астрального я', 'description' => 'При активных руках и лике вы можете потратить 1 очко ки, чтобы призвать тело на 10 минут. Отклонение энергии: реакцией при получении урона кислотой, холодом, огнём, молнией или силой уменьшите урон на 1d10 + модификатор Мудрости. Усиленные руки: раз в ход добавьте кость боевых искусств к урону рук.', 'cost' => '1 ki'],
                    ],
                    '17' => [
                        ['key' => 'awakened_astral_self', 'name' => 'Пробуждённое астральное я', 'description' => 'Бонусным действием потратьте 5 очков ки, чтобы призвать полное астральное я (руки, лик и тело) на 10 минут. Бонус к КД +2. При Шквале ударов вы совершаете три атаки вместо двух.', 'cost' => '5 ki'],
                    ],
                ],
            ],

            // WAY OF THE ASCENDANT DRAGON
            [
                'slug' => 'way-of-ascendant-dragon',
                'name' => ['ru' => 'Путь Восходящего Дракона'],
                'parent_slug' => 'monk',
                'description' => ['ru' => 'Монахи Пути Восходящего Дракона обращаются к силе драконов, чтобы усилить своё ки и пробудить драконий дух внутри себя.'],
                'level_features' => [
                    '3' => [
                        ['key' => 'draconic_disciple', 'name' => 'Ученик дракона', 'description' => 'Вы можете говорить на Драконьем языке. Вы можете заменить тип урона безоружного удара на урон кислотой, холодом, огнём, молнией или ядом.'],
                        ['key' => 'breath_of_dragon', 'name' => 'Дыхание дракона', 'description' => 'Когда вы совершаете действие Атака, вы можете заменить одну атаку выдохом стихийной энергии (конус 6 м или линия 9 м × 1,5 м). Выберите урон: кислота, холод, огонь, молния или яд. Существа совершают спасбросок Ловкости. При провале получают 2 броска кости боевых искусств урона, при успехе — половину. Бесплатно число раз = бонус мастерства за отдых, далее за 1 очко ки.', 'cost' => '0/1 ki'],
                    ],
                    '6' => [
                        ['key' => 'wings_unfurled', 'name' => 'Расправленные крылья', 'description' => 'Когда вы используете Шаг ветра, вы можете развернуть призрачные драконьи крылья и получить скорость полёта, равную скорости передвижения, до конца хода.'],
                    ],
                    '11' => [
                        ['key' => 'aspect_of_wyrm', 'name' => 'Аспект змея', 'description' => 'Бонусным действием потратьте 3 очка ки, чтобы создать ауру драконьей силы радиусом 3 м на 1 минуту. Устрашающее присутствие: при создании ауры существа по выбору совершают спасбросок Мудрости или становятся испуганными на 1 минуту. Сопротивление: вы и союзники в ауре получают сопротивление выбранному типу урона.', 'cost' => '3 ki'],
                    ],
                    '17' => [
                        ['key' => 'ascendant_aspect', 'name' => 'Аспект восхождения', 'description' => 'Дыхание дракона наносит 4 кости боевых искусств урона. При активном Аспекте змея реакцией при получении урона выбранного типа вы можете отменить урон и восстановить хиты, равные половине отменённого урона. Ваша аура усиливается: взрывная ярость за 1 очко ки наносит 3d10 урона существам в пределах 3 м (спасбросок Ловкости для половины).', 'cost' => '1 ki'],
                    ],
                ],
            ],
        ];
    }
}
